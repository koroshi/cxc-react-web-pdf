var Vg=u=>{throw TypeError(u)};var Ku=(u,t,n)=>t.has(u)||Vg("Cannot "+n);var Xt=(u,t,n)=>(Ku(u,t,"read from private field"),n?n.call(u):t.get(u)),Ln=(u,t,n)=>t.has(u)?Vg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(u):t.set(u,n),Ve=(u,t,n,s)=>(Ku(u,t,"write to private field"),s?s.call(u,n):t.set(u,n),n),Nn=(u,t,n)=>(Ku(u,t,"access private method"),n);var Xg=(u,t,n,s)=>({set _(r){Ve(u,t,r,n)},get _(){return Xt(u,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function Mv(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var Qu={exports:{}},cr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg;function Dv(){if(Yg)return cr;Yg=1;var u=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,r,o){var c=null;if(o!==void 0&&(c=""+o),r.key!==void 0&&(c=""+r.key),"key"in r){o={};for(var h in r)h!=="key"&&(o[h]=r[h])}else o=r;return r=o.ref,{$$typeof:u,type:s,key:c,ref:r!==void 0?r:null,props:o}}return cr.Fragment=t,cr.jsx=n,cr.jsxs=n,cr}var $g;function Ov(){return $g||($g=1,Qu.exports=Dv()),Qu.exports}var bt=Ov(),Wu={exports:{}},_t={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kg;function Lv(){if(Kg)return _t;Kg=1;var u=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function b(M){return M===null||typeof M!="object"?null:(M=y&&M[y]||M["@@iterator"],typeof M=="function"?M:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function w(M,X,W){this.props=M,this.context=X,this.refs=E,this.updater=W||A}w.prototype.isReactComponent={},w.prototype.setState=function(M,X){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,X,"setState")},w.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function T(){}T.prototype=w.prototype;function L(M,X,W){this.props=M,this.context=X,this.refs=E,this.updater=W||A}var R=L.prototype=new T;R.constructor=L,S(R,w.prototype),R.isPureReactComponent=!0;var N=Array.isArray,C={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function z(M,X,W,Q,nt,pt){return W=pt.ref,{$$typeof:u,type:M,key:X,ref:W!==void 0?W:null,props:pt}}function V(M,X){return z(M.type,X,void 0,void 0,void 0,M.props)}function G(M){return typeof M=="object"&&M!==null&&M.$$typeof===u}function K(M){var X={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(W){return X[W]})}var Z=/\/+/g;function st(M,X){return typeof M=="object"&&M!==null&&M.key!=null?K(""+M.key):X.toString(36)}function mt(){}function lt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(mt,mt):(M.status="pending",M.then(function(X){M.status==="pending"&&(M.status="fulfilled",M.value=X)},function(X){M.status==="pending"&&(M.status="rejected",M.reason=X)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function rt(M,X,W,Q,nt){var pt=typeof M;(pt==="undefined"||pt==="boolean")&&(M=null);var at=!1;if(M===null)at=!0;else switch(pt){case"bigint":case"string":case"number":at=!0;break;case"object":switch(M.$$typeof){case u:case t:at=!0;break;case g:return at=M._init,rt(at(M._payload),X,W,Q,nt)}}if(at)return nt=nt(M),at=Q===""?"."+st(M,0):Q,N(nt)?(W="",at!=null&&(W=at.replace(Z,"$&/")+"/"),rt(nt,X,W,"",function(de){return de})):nt!=null&&(G(nt)&&(nt=V(nt,W+(nt.key==null||M&&M.key===nt.key?"":(""+nt.key).replace(Z,"$&/")+"/")+at)),X.push(nt)),1;at=0;var Et=Q===""?".":Q+":";if(N(M))for(var Dt=0;Dt<M.length;Dt++)Q=M[Dt],pt=Et+st(Q,Dt),at+=rt(Q,X,W,pt,nt);else if(Dt=b(M),typeof Dt=="function")for(M=Dt.call(M),Dt=0;!(Q=M.next()).done;)Q=Q.value,pt=Et+st(Q,Dt++),at+=rt(Q,X,W,pt,nt);else if(pt==="object"){if(typeof M.then=="function")return rt(lt(M),X,W,Q,nt);throw X=String(M),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return at}function D(M,X,W){if(M==null)return M;var Q=[],nt=0;return rt(M,Q,"","",function(pt){return X.call(W,pt,nt++)}),Q}function H(M){if(M._status===-1){var X=M._result;X=X(),X.then(function(W){(M._status===0||M._status===-1)&&(M._status=1,M._result=W)},function(W){(M._status===0||M._status===-1)&&(M._status=2,M._result=W)}),M._status===-1&&(M._status=0,M._result=X)}if(M._status===1)return M._result.default;throw M._result}var J=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function yt(){}return _t.Children={map:D,forEach:function(M,X,W){D(M,function(){X.apply(this,arguments)},W)},count:function(M){var X=0;return D(M,function(){X++}),X},toArray:function(M){return D(M,function(X){return X})||[]},only:function(M){if(!G(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},_t.Component=w,_t.Fragment=n,_t.Profiler=r,_t.PureComponent=L,_t.StrictMode=s,_t.Suspense=f,_t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,_t.__COMPILER_RUNTIME={__proto__:null,c:function(M){return C.H.useMemoCache(M)}},_t.cache=function(M){return function(){return M.apply(null,arguments)}},_t.cloneElement=function(M,X,W){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var Q=S({},M.props),nt=M.key,pt=void 0;if(X!=null)for(at in X.ref!==void 0&&(pt=void 0),X.key!==void 0&&(nt=""+X.key),X)!U.call(X,at)||at==="key"||at==="__self"||at==="__source"||at==="ref"&&X.ref===void 0||(Q[at]=X[at]);var at=arguments.length-2;if(at===1)Q.children=W;else if(1<at){for(var Et=Array(at),Dt=0;Dt<at;Dt++)Et[Dt]=arguments[Dt+2];Q.children=Et}return z(M.type,nt,void 0,void 0,pt,Q)},_t.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:o,_context:M},M},_t.createElement=function(M,X,W){var Q,nt={},pt=null;if(X!=null)for(Q in X.key!==void 0&&(pt=""+X.key),X)U.call(X,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(nt[Q]=X[Q]);var at=arguments.length-2;if(at===1)nt.children=W;else if(1<at){for(var Et=Array(at),Dt=0;Dt<at;Dt++)Et[Dt]=arguments[Dt+2];nt.children=Et}if(M&&M.defaultProps)for(Q in at=M.defaultProps,at)nt[Q]===void 0&&(nt[Q]=at[Q]);return z(M,pt,void 0,void 0,null,nt)},_t.createRef=function(){return{current:null}},_t.forwardRef=function(M){return{$$typeof:h,render:M}},_t.isValidElement=G,_t.lazy=function(M){return{$$typeof:g,_payload:{_status:-1,_result:M},_init:H}},_t.memo=function(M,X){return{$$typeof:p,type:M,compare:X===void 0?null:X}},_t.startTransition=function(M){var X=C.T,W={};C.T=W;try{var Q=M(),nt=C.S;nt!==null&&nt(W,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(yt,J)}catch(pt){J(pt)}finally{C.T=X}},_t.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},_t.use=function(M){return C.H.use(M)},_t.useActionState=function(M,X,W){return C.H.useActionState(M,X,W)},_t.useCallback=function(M,X){return C.H.useCallback(M,X)},_t.useContext=function(M){return C.H.useContext(M)},_t.useDebugValue=function(){},_t.useDeferredValue=function(M,X){return C.H.useDeferredValue(M,X)},_t.useEffect=function(M,X,W){var Q=C.H;if(typeof W=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(M,X)},_t.useId=function(){return C.H.useId()},_t.useImperativeHandle=function(M,X,W){return C.H.useImperativeHandle(M,X,W)},_t.useInsertionEffect=function(M,X){return C.H.useInsertionEffect(M,X)},_t.useLayoutEffect=function(M,X){return C.H.useLayoutEffect(M,X)},_t.useMemo=function(M,X){return C.H.useMemo(M,X)},_t.useOptimistic=function(M,X){return C.H.useOptimistic(M,X)},_t.useReducer=function(M,X,W){return C.H.useReducer(M,X,W)},_t.useRef=function(M){return C.H.useRef(M)},_t.useState=function(M){return C.H.useState(M)},_t.useSyncExternalStore=function(M,X,W){return C.H.useSyncExternalStore(M,X,W)},_t.useTransition=function(){return C.H.useTransition()},_t.version="19.1.0",_t}var Qg;function Dh(){return Qg||(Qg=1,Wu.exports=Lv()),Wu.exports}var tt=Dh(),Zu={exports:{}},ur={},Ju={exports:{}},th={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg;function Nv(){return Wg||(Wg=1,function(u){function t(D,H){var J=D.length;D.push(H);t:for(;0<J;){var yt=J-1>>>1,M=D[yt];if(0<r(M,H))D[yt]=H,D[J]=M,J=yt;else break t}}function n(D){return D.length===0?null:D[0]}function s(D){if(D.length===0)return null;var H=D[0],J=D.pop();if(J!==H){D[0]=J;t:for(var yt=0,M=D.length,X=M>>>1;yt<X;){var W=2*(yt+1)-1,Q=D[W],nt=W+1,pt=D[nt];if(0>r(Q,J))nt<M&&0>r(pt,Q)?(D[yt]=pt,D[nt]=J,yt=nt):(D[yt]=Q,D[W]=J,yt=W);else if(nt<M&&0>r(pt,J))D[yt]=pt,D[nt]=J,yt=nt;else break t}}return H}function r(D,H){var J=D.sortIndex-H.sortIndex;return J!==0?J:D.id-H.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;u.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();u.unstable_now=function(){return c.now()-h}}var f=[],p=[],g=1,y=null,b=3,A=!1,S=!1,E=!1,w=!1,T=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function N(D){for(var H=n(p);H!==null;){if(H.callback===null)s(p);else if(H.startTime<=D)s(p),H.sortIndex=H.expirationTime,t(f,H);else break;H=n(p)}}function C(D){if(E=!1,N(D),!S)if(n(f)!==null)S=!0,U||(U=!0,st());else{var H=n(p);H!==null&&rt(C,H.startTime-D)}}var U=!1,z=-1,V=5,G=-1;function K(){return w?!0:!(u.unstable_now()-G<V)}function Z(){if(w=!1,U){var D=u.unstable_now();G=D;var H=!0;try{t:{S=!1,E&&(E=!1,L(z),z=-1),A=!0;var J=b;try{e:{for(N(D),y=n(f);y!==null&&!(y.expirationTime>D&&K());){var yt=y.callback;if(typeof yt=="function"){y.callback=null,b=y.priorityLevel;var M=yt(y.expirationTime<=D);if(D=u.unstable_now(),typeof M=="function"){y.callback=M,N(D),H=!0;break e}y===n(f)&&s(f),N(D)}else s(f);y=n(f)}if(y!==null)H=!0;else{var X=n(p);X!==null&&rt(C,X.startTime-D),H=!1}}break t}finally{y=null,b=J,A=!1}H=void 0}}finally{H?st():U=!1}}}var st;if(typeof R=="function")st=function(){R(Z)};else if(typeof MessageChannel<"u"){var mt=new MessageChannel,lt=mt.port2;mt.port1.onmessage=Z,st=function(){lt.postMessage(null)}}else st=function(){T(Z,0)};function rt(D,H){z=T(function(){D(u.unstable_now())},H)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(D){D.callback=null},u.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<D?Math.floor(1e3/D):5},u.unstable_getCurrentPriorityLevel=function(){return b},u.unstable_next=function(D){switch(b){case 1:case 2:case 3:var H=3;break;default:H=b}var J=b;b=H;try{return D()}finally{b=J}},u.unstable_requestPaint=function(){w=!0},u.unstable_runWithPriority=function(D,H){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var J=b;b=D;try{return H()}finally{b=J}},u.unstable_scheduleCallback=function(D,H,J){var yt=u.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?yt+J:yt):J=yt,D){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=J+M,D={id:g++,callback:H,priorityLevel:D,startTime:J,expirationTime:M,sortIndex:-1},J>yt?(D.sortIndex=J,t(p,D),n(f)===null&&D===n(p)&&(E?(L(z),z=-1):E=!0,rt(C,J-yt))):(D.sortIndex=M,t(f,D),S||A||(S=!0,U||(U=!0,st()))),D},u.unstable_shouldYield=K,u.unstable_wrapCallback=function(D){var H=b;return function(){var J=b;b=H;try{return D.apply(this,arguments)}finally{b=J}}}}(th)),th}var Zg;function kv(){return Zg||(Zg=1,Ju.exports=Nv()),Ju.exports}var eh={exports:{}},Oe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function Pv(){if(Jg)return Oe;Jg=1;var u=Dh();function t(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(f,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:f,containerInfo:p,implementation:g}}var c=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Oe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Oe.createPortal=function(f,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return o(f,p,null,g)},Oe.flushSync=function(f){var p=c.T,g=s.p;try{if(c.T=null,s.p=2,f)return f()}finally{c.T=p,s.p=g,s.d.f()}},Oe.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(f,p))},Oe.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},Oe.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var g=p.as,y=h(g,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?s.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:A}):g==="script"&&s.d.X(f,{crossOrigin:y,integrity:b,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Oe.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=h(p.as,p.crossOrigin);s.d.M(f,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(f)},Oe.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=h(g,p.crossOrigin);s.d.L(f,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Oe.preloadModule=function(f,p){if(typeof f=="string")if(p){var g=h(p.as,p.crossOrigin);s.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(f)},Oe.requestFormReset=function(f){s.d.r(f)},Oe.unstable_batchedUpdates=function(f,p){return f(p)},Oe.useFormState=function(f,p,g){return c.H.useFormState(f,p,g)},Oe.useFormStatus=function(){return c.H.useHostTransitionStatus()},Oe.version="19.1.0",Oe}var tm;function Bv(){if(tm)return eh.exports;tm=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(t){console.error(t)}}return u(),eh.exports=Pv(),eh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var em;function zv(){if(em)return ur;em=1;var u=kv(),t=Dh(),n=Bv();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function c(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function h(e){if(o(e)!==e)throw Error(s(188))}function f(e){var i=e.alternate;if(!i){if(i=o(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,l=i;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return h(d),e;if(m===l)return h(d),i;m=m.sibling}throw Error(s(188))}if(a.return!==l.return)a=d,l=m;else{for(var v=!1,_=d.child;_;){if(_===a){v=!0,a=d,l=m;break}if(_===l){v=!0,l=d,a=m;break}_=_.sibling}if(!v){for(_=m.child;_;){if(_===a){v=!0,a=m,l=d;break}if(_===l){v=!0,l=m,a=d;break}_=_.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function p(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=p(e),i!==null)return i;e=e.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),R=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function st(e){return e===null||typeof e!="object"?null:(e=Z&&e[Z]||e["@@iterator"],typeof e=="function"?e:null)}var mt=Symbol.for("react.client.reference");function lt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===mt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case w:return"Profiler";case E:return"StrictMode";case C:return"Suspense";case U:return"SuspenseList";case G:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case A:return"Portal";case R:return(e.displayName||"Context")+".Provider";case L:return(e._context.displayName||"Context")+".Consumer";case N:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case z:return i=e.displayName||null,i!==null?i:lt(e.type)||"Memo";case V:i=e._payload,e=e._init;try{return lt(e(i))}catch{}}return null}var rt=Array.isArray,D=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},yt=[],M=-1;function X(e){return{current:e}}function W(e){0>M||(e.current=yt[M],yt[M]=null,M--)}function Q(e,i){M++,yt[M]=e.current,e.current=i}var nt=X(null),pt=X(null),at=X(null),Et=X(null);function Dt(e,i){switch(Q(at,i),Q(pt,e),Q(nt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?vg(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=vg(i),e=Ag(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}W(nt),Q(nt,e)}function de(){W(nt),W(pt),W(at)}function zt(e){e.memoizedState!==null&&Q(Et,e);var i=nt.current,a=Ag(i,e.type);i!==a&&(Q(pt,e),Q(nt,a))}function He(e){pt.current===e&&(W(nt),W(pt)),Et.current===e&&(W(Et),sr._currentValue=J)}var Qe=Object.prototype.hasOwnProperty,fe=u.unstable_scheduleCallback,kt=u.unstable_cancelCallback,re=u.unstable_shouldYield,$t=u.unstable_requestPaint,pe=u.unstable_now,oi=u.unstable_getCurrentPriorityLevel,li=u.unstable_ImmediatePriority,Hr=u.unstable_UserBlockingPriority,In=u.unstable_NormalPriority,Pl=u.unstable_LowPriority,Fr=u.unstable_IdlePriority,Bl=u.log,zl=u.unstable_setDisableYieldValue,Pi=null,oe=null;function We(e){if(typeof Bl=="function"&&zl(e),oe&&typeof oe.setStrictMode=="function")try{oe.setStrictMode(Pi,e)}catch{}}var be=Math.clz32?Math.clz32:gb,da=Math.log,pb=Math.LN2;function gb(e){return e>>>=0,e===0?32:31-(da(e)/pb|0)|0}var Ir=256,jr=4194304;function Bi(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Gr(e,i,a){var l=e.pendingLanes;if(l===0)return 0;var d=0,m=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var _=l&134217727;return _!==0?(l=_&~m,l!==0?d=Bi(l):(v&=_,v!==0?d=Bi(v):a||(a=_&~e,a!==0&&(d=Bi(a))))):(_=l&~m,_!==0?d=Bi(_):v!==0?d=Bi(v):a||(a=l&~e,a!==0&&(d=Bi(a)))),d===0?0:i!==0&&i!==d&&(i&m)===0&&(m=d&-d,a=i&-i,m>=a||m===32&&(a&4194048)!==0)?i:d}function fa(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function mb(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ed(){var e=Ir;return Ir<<=1,(Ir&4194048)===0&&(Ir=256),e}function nd(){var e=jr;return jr<<=1,(jr&62914560)===0&&(jr=4194304),e}function Ul(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function pa(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function yb(e,i,a,l,d,m){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var _=e.entanglements,x=e.expirationTimes,B=e.hiddenUpdates;for(a=v&~a;0<a;){var q=31-be(a),$=1<<q;_[q]=0,x[q]=-1;var F=B[q];if(F!==null)for(B[q]=null,q=0;q<F.length;q++){var I=F[q];I!==null&&(I.lane&=-536870913)}a&=~$}l!==0&&id(e,l,0),m!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=m&~(v&~i))}function id(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var l=31-be(i);e.entangledLanes|=i,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194090}function sd(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var l=31-be(a),d=1<<l;d&i|e[l]&i&&(e[l]|=i),a&=~d}}function Hl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ad(){var e=H.p;return e!==0?e:(e=window.event,e===void 0?32:Hg(e.type))}function bb(e,i){var a=H.p;try{return H.p=e,i()}finally{H.p=a}}var ci=Math.random().toString(36).slice(2),Me="__reactFiber$"+ci,Fe="__reactProps$"+ci,ps="__reactContainer$"+ci,Il="__reactEvents$"+ci,vb="__reactListeners$"+ci,Ab="__reactHandles$"+ci,rd="__reactResources$"+ci,ga="__reactMarker$"+ci;function jl(e){delete e[Me],delete e[Fe],delete e[Il],delete e[vb],delete e[Ab]}function gs(e){var i=e[Me];if(i)return i;for(var a=e.parentNode;a;){if(i=a[ps]||a[Me]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=wg(e);e!==null;){if(a=e[Me])return a;e=wg(e)}return i}e=a,a=e.parentNode}return null}function ms(e){if(e=e[Me]||e[ps]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function ma(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function ys(e){var i=e[rd];return i||(i=e[rd]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ve(e){e[ga]=!0}var od=new Set,ld={};function zi(e,i){bs(e,i),bs(e+"Capture",i)}function bs(e,i){for(ld[e]=i,e=0;e<i.length;e++)od.add(i[e])}var Sb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cd={},ud={};function Eb(e){return Qe.call(ud,e)?!0:Qe.call(cd,e)?!1:Sb.test(e)?ud[e]=!0:(cd[e]=!0,!1)}function qr(e,i,a){if(Eb(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function Vr(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function jn(e,i,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+l)}}var Gl,hd;function vs(e){if(Gl===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Gl=i&&i[1]||"",hd=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gl+e+hd}var ql=!1;function Vl(e,i){if(!e||ql)return"";ql=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(I){var F=I}Reflect.construct(e,[],$)}else{try{$.call()}catch(I){F=I}e.call($.prototype)}}else{try{throw Error()}catch(I){F=I}($=e())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(I){if(I&&F&&typeof I.stack=="string")return[I.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),v=m[0],_=m[1];if(v&&_){var x=v.split(`
`),B=_.split(`
`);for(d=l=0;l<x.length&&!x[l].includes("DetermineComponentFrameRoot");)l++;for(;d<B.length&&!B[d].includes("DetermineComponentFrameRoot");)d++;if(l===x.length||d===B.length)for(l=x.length-1,d=B.length-1;1<=l&&0<=d&&x[l]!==B[d];)d--;for(;1<=l&&0<=d;l--,d--)if(x[l]!==B[d]){if(l!==1||d!==1)do if(l--,d--,0>d||x[l]!==B[d]){var q=`
`+x[l].replace(" at new "," at ");return e.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",e.displayName)),q}while(1<=l&&0<=d);break}}}finally{ql=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?vs(a):""}function _b(e){switch(e.tag){case 26:case 27:case 5:return vs(e.type);case 16:return vs("Lazy");case 13:return vs("Suspense");case 19:return vs("SuspenseList");case 0:case 15:return Vl(e.type,!1);case 11:return Vl(e.type.render,!1);case 1:return Vl(e.type,!0);case 31:return vs("Activity");default:return""}}function dd(e){try{var i="";do i+=_b(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function cn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fd(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function wb(e){var i=fd(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),l=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return d.call(this)},set:function(v){l=""+v,m.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Xr(e){e._valueTracker||(e._valueTracker=wb(e))}function pd(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return e&&(l=fd(e)?e.checked?"true":"false":e.value),e=l,e!==a?(i.setValue(e),!0):!1}function Yr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Tb=/[\n"\\]/g;function un(e){return e.replace(Tb,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Xl(e,i,a,l,d,m,v,_){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+cn(i)):e.value!==""+cn(i)&&(e.value=""+cn(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?Yl(e,v,cn(i)):a!=null?Yl(e,v,cn(a)):l!=null&&e.removeAttribute("value"),d==null&&m!=null&&(e.defaultChecked=!!m),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+cn(_):e.removeAttribute("name")}function gd(e,i,a,l,d,m,v,_){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),i!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;a=a!=null?""+cn(a):"",i=i!=null?""+cn(i):a,_||i===e.value||(e.value=i),e.defaultValue=i}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=_?e.checked:!!l,e.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function Yl(e,i,a){i==="number"&&Yr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function As(e,i,a,l){if(e=e.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=i.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&l&&(e[a].defaultSelected=!0)}else{for(a=""+cn(a),i=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}i!==null||e[d].disabled||(i=e[d])}i!==null&&(i.selected=!0)}}function md(e,i,a){if(i!=null&&(i=""+cn(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+cn(a):""}function yd(e,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(rt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=cn(i),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function Ss(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var xb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bd(e,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":l?e.setProperty(i,a):typeof a!="number"||a===0||xb.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function vd(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in i)l=i[d],i.hasOwnProperty(d)&&a[d]!==l&&bd(e,d,l)}else for(var m in i)i.hasOwnProperty(m)&&bd(e,m,i[m])}function $l(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $r(e){return Cb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Kl=null;function Ql(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Es=null,_s=null;function Ad(e){var i=ms(e);if(i&&(e=i.stateNode)){var a=e[Fe]||null;t:switch(e=i.stateNode,i.type){case"input":if(Xl(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+un(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==e&&l.form===e.form){var d=l[Fe]||null;if(!d)throw Error(s(90));Xl(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===e.form&&pd(l)}break t;case"textarea":md(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&As(e,!!a.multiple,i,!1)}}}var Wl=!1;function Sd(e,i,a){if(Wl)return e(i,a);Wl=!0;try{var l=e(i);return l}finally{if(Wl=!1,(Es!==null||_s!==null)&&(ko(),Es&&(i=Es,e=_s,_s=Es=null,Ad(i),e)))for(i=0;i<e.length;i++)Ad(e[i])}}function ya(e,i){var a=e.stateNode;if(a===null)return null;var l=a[Fe]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zl=!1;if(Gn)try{var ba={};Object.defineProperty(ba,"passive",{get:function(){Zl=!0}}),window.addEventListener("test",ba,ba),window.removeEventListener("test",ba,ba)}catch{Zl=!1}var ui=null,Jl=null,Kr=null;function Ed(){if(Kr)return Kr;var e,i=Jl,a=i.length,l,d="value"in ui?ui.value:ui.textContent,m=d.length;for(e=0;e<a&&i[e]===d[e];e++);var v=a-e;for(l=1;l<=v&&i[a-l]===d[m-l];l++);return Kr=d.slice(e,1<l?1-l:void 0)}function Qr(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Wr(){return!0}function _d(){return!1}function Ie(e){function i(a,l,d,m,v){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(a=e[_],this[_]=a?a(m):m[_]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Wr:_d,this.isPropagationStopped=_d,this}return g(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wr)},persist:function(){},isPersistent:Wr}),i}var Ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zr=Ie(Ui),va=g({},Ui,{view:0,detail:0}),Mb=Ie(va),tc,ec,Aa,Jr=g({},va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ic,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Aa&&(Aa&&e.type==="mousemove"?(tc=e.screenX-Aa.screenX,ec=e.screenY-Aa.screenY):ec=tc=0,Aa=e),tc)},movementY:function(e){return"movementY"in e?e.movementY:ec}}),wd=Ie(Jr),Db=g({},Jr,{dataTransfer:0}),Ob=Ie(Db),Lb=g({},va,{relatedTarget:0}),nc=Ie(Lb),Nb=g({},Ui,{animationName:0,elapsedTime:0,pseudoElement:0}),kb=Ie(Nb),Pb=g({},Ui,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Bb=Ie(Pb),zb=g({},Ui,{data:0}),Td=Ie(zb),Ub={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ib(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Fb[e])?!!i[e]:!1}function ic(){return Ib}var jb=g({},va,{key:function(e){if(e.key){var i=Ub[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Qr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Hb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ic,charCode:function(e){return e.type==="keypress"?Qr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Gb=Ie(jb),qb=g({},Jr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xd=Ie(qb),Vb=g({},va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ic}),Xb=Ie(Vb),Yb=g({},Ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),$b=Ie(Yb),Kb=g({},Jr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Qb=Ie(Kb),Wb=g({},Ui,{newState:0,oldState:0}),Zb=Ie(Wb),Jb=[9,13,27,32],sc=Gn&&"CompositionEvent"in window,Sa=null;Gn&&"documentMode"in document&&(Sa=document.documentMode);var t0=Gn&&"TextEvent"in window&&!Sa,Rd=Gn&&(!sc||Sa&&8<Sa&&11>=Sa),Cd=" ",Md=!1;function Dd(e,i){switch(e){case"keyup":return Jb.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Od(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ws=!1;function e0(e,i){switch(e){case"compositionend":return Od(i);case"keypress":return i.which!==32?null:(Md=!0,Cd);case"textInput":return e=i.data,e===Cd&&Md?null:e;default:return null}}function n0(e,i){if(ws)return e==="compositionend"||!sc&&Dd(e,i)?(e=Ed(),Kr=Jl=ui=null,ws=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Rd&&i.locale!=="ko"?null:i.data;default:return null}}var i0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ld(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!i0[e.type]:i==="textarea"}function Nd(e,i,a,l){Es?_s?_s.push(l):_s=[l]:Es=l,i=Fo(i,"onChange"),0<i.length&&(a=new Zr("onChange","change",null,a,l),e.push({event:a,listeners:i}))}var Ea=null,_a=null;function s0(e){pg(e,0)}function to(e){var i=ma(e);if(pd(i))return e}function kd(e,i){if(e==="change")return i}var Pd=!1;if(Gn){var ac;if(Gn){var rc="oninput"in document;if(!rc){var Bd=document.createElement("div");Bd.setAttribute("oninput","return;"),rc=typeof Bd.oninput=="function"}ac=rc}else ac=!1;Pd=ac&&(!document.documentMode||9<document.documentMode)}function zd(){Ea&&(Ea.detachEvent("onpropertychange",Ud),_a=Ea=null)}function Ud(e){if(e.propertyName==="value"&&to(_a)){var i=[];Nd(i,_a,e,Ql(e)),Sd(s0,i)}}function a0(e,i,a){e==="focusin"?(zd(),Ea=i,_a=a,Ea.attachEvent("onpropertychange",Ud)):e==="focusout"&&zd()}function r0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return to(_a)}function o0(e,i){if(e==="click")return to(i)}function l0(e,i){if(e==="input"||e==="change")return to(i)}function c0(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Ze=typeof Object.is=="function"?Object.is:c0;function wa(e,i){if(Ze(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!Qe.call(i,d)||!Ze(e[d],i[d]))return!1}return!0}function Hd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fd(e,i){var a=Hd(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=i&&l>=i)return{node:a,offset:i-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Hd(a)}}function Id(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Id(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function jd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Yr(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=Yr(e.document)}return i}function oc(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var u0=Gn&&"documentMode"in document&&11>=document.documentMode,Ts=null,lc=null,Ta=null,cc=!1;function Gd(e,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;cc||Ts==null||Ts!==Yr(l)||(l=Ts,"selectionStart"in l&&oc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ta&&wa(Ta,l)||(Ta=l,l=Fo(lc,"onSelect"),0<l.length&&(i=new Zr("onSelect","select",null,i,a),e.push({event:i,listeners:l}),i.target=Ts)))}function Hi(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var xs={animationend:Hi("Animation","AnimationEnd"),animationiteration:Hi("Animation","AnimationIteration"),animationstart:Hi("Animation","AnimationStart"),transitionrun:Hi("Transition","TransitionRun"),transitionstart:Hi("Transition","TransitionStart"),transitioncancel:Hi("Transition","TransitionCancel"),transitionend:Hi("Transition","TransitionEnd")},uc={},qd={};Gn&&(qd=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function Fi(e){if(uc[e])return uc[e];if(!xs[e])return e;var i=xs[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in qd)return uc[e]=i[a];return e}var Vd=Fi("animationend"),Xd=Fi("animationiteration"),Yd=Fi("animationstart"),h0=Fi("transitionrun"),d0=Fi("transitionstart"),f0=Fi("transitioncancel"),$d=Fi("transitionend"),Kd=new Map,hc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hc.push("scrollEnd");function Sn(e,i){Kd.set(e,i),zi(i,[e])}var Qd=new WeakMap;function hn(e,i){if(typeof e=="object"&&e!==null){var a=Qd.get(e);return a!==void 0?a:(i={value:e,source:i,stack:dd(i)},Qd.set(e,i),i)}return{value:e,source:i,stack:dd(i)}}var dn=[],Rs=0,dc=0;function eo(){for(var e=Rs,i=dc=Rs=0;i<e;){var a=dn[i];dn[i++]=null;var l=dn[i];dn[i++]=null;var d=dn[i];dn[i++]=null;var m=dn[i];if(dn[i++]=null,l!==null&&d!==null){var v=l.pending;v===null?d.next=d:(d.next=v.next,v.next=d),l.pending=d}m!==0&&Wd(a,d,m)}}function no(e,i,a,l){dn[Rs++]=e,dn[Rs++]=i,dn[Rs++]=a,dn[Rs++]=l,dc|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function fc(e,i,a,l){return no(e,i,a,l),io(e)}function Cs(e,i){return no(e,null,null,i),io(e)}function Wd(e,i,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var d=!1,m=e.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(d=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,d&&i!==null&&(d=31-be(a),e=m.hiddenUpdates,l=e[d],l===null?e[d]=[i]:l.push(i),i.lane=a|536870912),m):null}function io(e){if(50<Qa)throw Qa=0,vu=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Ms={};function p0(e,i,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Je(e,i,a,l){return new p0(e,i,a,l)}function pc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qn(e,i){var a=e.alternate;return a===null?(a=Je(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Zd(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function so(e,i,a,l,d,m){var v=0;if(l=e,typeof e=="function")pc(e)&&(v=1);else if(typeof e=="string")v=mv(e,a,nt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case G:return e=Je(31,a,i,d),e.elementType=G,e.lanes=m,e;case S:return Ii(a.children,d,m,i);case E:v=8,d|=24;break;case w:return e=Je(12,a,i,d|2),e.elementType=w,e.lanes=m,e;case C:return e=Je(13,a,i,d),e.elementType=C,e.lanes=m,e;case U:return e=Je(19,a,i,d),e.elementType=U,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case T:case R:v=10;break t;case L:v=9;break t;case N:v=11;break t;case z:v=14;break t;case V:v=16,l=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),l=null}return i=Je(v,a,i,d),i.elementType=e,i.type=l,i.lanes=m,i}function Ii(e,i,a,l){return e=Je(7,e,l,i),e.lanes=a,e}function gc(e,i,a){return e=Je(6,e,null,i),e.lanes=a,e}function mc(e,i,a){return i=Je(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Ds=[],Os=0,ao=null,ro=0,fn=[],pn=0,ji=null,Vn=1,Xn="";function Gi(e,i){Ds[Os++]=ro,Ds[Os++]=ao,ao=e,ro=i}function Jd(e,i,a){fn[pn++]=Vn,fn[pn++]=Xn,fn[pn++]=ji,ji=e;var l=Vn;e=Xn;var d=32-be(l)-1;l&=~(1<<d),a+=1;var m=32-be(i)+d;if(30<m){var v=d-d%5;m=(l&(1<<v)-1).toString(32),l>>=v,d-=v,Vn=1<<32-be(i)+d|a<<d|l,Xn=m+e}else Vn=1<<m|a<<d|l,Xn=e}function yc(e){e.return!==null&&(Gi(e,1),Jd(e,1,0))}function bc(e){for(;e===ao;)ao=Ds[--Os],Ds[Os]=null,ro=Ds[--Os],Ds[Os]=null;for(;e===ji;)ji=fn[--pn],fn[pn]=null,Xn=fn[--pn],fn[pn]=null,Vn=fn[--pn],fn[pn]=null}var Be=null,Wt=null,Nt=!1,qi=null,Rn=!1,vc=Error(s(519));function Vi(e){var i=Error(s(418,""));throw Ca(hn(i,e)),vc}function tf(e){var i=e.stateNode,a=e.type,l=e.memoizedProps;switch(i[Me]=e,i[Fe]=l,a){case"dialog":Rt("cancel",i),Rt("close",i);break;case"iframe":case"object":case"embed":Rt("load",i);break;case"video":case"audio":for(a=0;a<Za.length;a++)Rt(Za[a],i);break;case"source":Rt("error",i);break;case"img":case"image":case"link":Rt("error",i),Rt("load",i);break;case"details":Rt("toggle",i);break;case"input":Rt("invalid",i),gd(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Xr(i);break;case"select":Rt("invalid",i);break;case"textarea":Rt("invalid",i),yd(i,l.value,l.defaultValue,l.children),Xr(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||bg(i.textContent,a)?(l.popover!=null&&(Rt("beforetoggle",i),Rt("toggle",i)),l.onScroll!=null&&Rt("scroll",i),l.onScrollEnd!=null&&Rt("scrollend",i),l.onClick!=null&&(i.onclick=Io),i=!0):i=!1,i||Vi(e)}function ef(e){for(Be=e.return;Be;)switch(Be.tag){case 5:case 13:Rn=!1;return;case 27:case 3:Rn=!0;return;default:Be=Be.return}}function xa(e){if(e!==Be)return!1;if(!Nt)return ef(e),Nt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Pu(e.type,e.memoizedProps)),a=!a),a&&Wt&&Vi(e),ef(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){Wt=_n(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}Wt=null}}else i===27?(i=Wt,xi(e.type)?(e=Hu,Hu=null,Wt=e):Wt=i):Wt=Be?_n(e.stateNode.nextSibling):null;return!0}function Ra(){Wt=Be=null,Nt=!1}function nf(){var e=qi;return e!==null&&(qe===null?qe=e:qe.push.apply(qe,e),qi=null),e}function Ca(e){qi===null?qi=[e]:qi.push(e)}var Ac=X(null),Xi=null,Yn=null;function hi(e,i,a){Q(Ac,i._currentValue),i._currentValue=a}function $n(e){e._currentValue=Ac.current,W(Ac)}function Sc(e,i,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),e===a)break;e=e.return}}function Ec(e,i,a,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var m=d.dependencies;if(m!==null){var v=d.child;m=m.firstContext;t:for(;m!==null;){var _=m;m=d;for(var x=0;x<i.length;x++)if(_.context===i[x]){m.lanes|=a,_=m.alternate,_!==null&&(_.lanes|=a),Sc(m.return,a,e),l||(v=null);break t}m=_.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(s(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),Sc(v,a,e),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===e){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function Ma(e,i,a,l){e=null;for(var d=i,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var _=d.type;Ze(d.pendingProps.value,v.value)||(e!==null?e.push(_):e=[_])}}else if(d===Et.current){if(v=d.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(sr):e=[sr])}d=d.return}e!==null&&Ec(i,e,a,l),i.flags|=262144}function oo(e){for(e=e.firstContext;e!==null;){if(!Ze(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Yi(e){Xi=e,Yn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function De(e){return sf(Xi,e)}function lo(e,i){return Xi===null&&Yi(e),sf(e,i)}function sf(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Yn===null){if(e===null)throw Error(s(308));Yn=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Yn=Yn.next=i;return a}var g0=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},m0=u.unstable_scheduleCallback,y0=u.unstable_NormalPriority,ge={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _c(){return{controller:new g0,data:new Map,refCount:0}}function Da(e){e.refCount--,e.refCount===0&&m0(y0,function(){e.controller.abort()})}var Oa=null,wc=0,Ls=0,Ns=null;function b0(e,i){if(Oa===null){var a=Oa=[];wc=0,Ls=xu(),Ns={status:"pending",value:void 0,then:function(l){a.push(l)}}}return wc++,i.then(af,af),i}function af(){if(--wc===0&&Oa!==null){Ns!==null&&(Ns.status="fulfilled");var e=Oa;Oa=null,Ls=0,Ns=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function v0(e,i){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return e.then(function(){l.status="fulfilled",l.value=i;for(var d=0;d<a.length;d++)(0,a[d])(i)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var rf=D.S;D.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&b0(e,i),rf!==null&&rf(e,i)};var $i=X(null);function Tc(){var e=$i.current;return e!==null?e:qt.pooledCache}function co(e,i){i===null?Q($i,$i.current):Q($i,i.pool)}function of(){var e=Tc();return e===null?null:{parent:ge._currentValue,pool:e}}var La=Error(s(460)),lf=Error(s(474)),uo=Error(s(542)),xc={then:function(){}};function cf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ho(){}function uf(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(ho,ho),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,df(e),e;default:if(typeof i.status=="string")i.then(ho,ho);else{if(e=qt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(l){if(i.status==="pending"){var d=i;d.status="fulfilled",d.value=l}},function(l){if(i.status==="pending"){var d=i;d.status="rejected",d.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,df(e),e}throw Na=i,La}}var Na=null;function hf(){if(Na===null)throw Error(s(459));var e=Na;return Na=null,e}function df(e){if(e===La||e===uo)throw Error(s(483))}var di=!1;function Rc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Cc(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function fi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function pi(e,i,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Pt&2)!==0){var d=l.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),l.pending=i,i=io(e),Wd(e,null,a),i}return no(e,l,i,a),io(e)}function ka(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,sd(e,a)}}function Mc(e,i){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?d=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?d=m=i:m=m.next=i}else d=m=i;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var Dc=!1;function Pa(){if(Dc){var e=Ns;if(e!==null)throw e}}function Ba(e,i,a,l){Dc=!1;var d=e.updateQueue;di=!1;var m=d.firstBaseUpdate,v=d.lastBaseUpdate,_=d.shared.pending;if(_!==null){d.shared.pending=null;var x=_,B=x.next;x.next=null,v===null?m=B:v.next=B,v=x;var q=e.alternate;q!==null&&(q=q.updateQueue,_=q.lastBaseUpdate,_!==v&&(_===null?q.firstBaseUpdate=B:_.next=B,q.lastBaseUpdate=x))}if(m!==null){var $=d.baseState;v=0,q=B=x=null,_=m;do{var F=_.lane&-536870913,I=F!==_.lane;if(I?(Ot&F)===F:(l&F)===F){F!==0&&F===Ls&&(Dc=!0),q!==null&&(q=q.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});t:{var gt=e,ht=_;F=i;var Ft=a;switch(ht.tag){case 1:if(gt=ht.payload,typeof gt=="function"){$=gt.call(Ft,$,F);break t}$=gt;break t;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=ht.payload,F=typeof gt=="function"?gt.call(Ft,$,F):gt,F==null)break t;$=g({},$,F);break t;case 2:di=!0}}F=_.callback,F!==null&&(e.flags|=64,I&&(e.flags|=8192),I=d.callbacks,I===null?d.callbacks=[F]:I.push(F))}else I={lane:F,tag:_.tag,payload:_.payload,callback:_.callback,next:null},q===null?(B=q=I,x=$):q=q.next=I,v|=F;if(_=_.next,_===null){if(_=d.shared.pending,_===null)break;I=_,_=I.next,I.next=null,d.lastBaseUpdate=I,d.shared.pending=null}}while(!0);q===null&&(x=$),d.baseState=x,d.firstBaseUpdate=B,d.lastBaseUpdate=q,m===null&&(d.shared.lanes=0),Ei|=v,e.lanes=v,e.memoizedState=$}}function ff(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function pf(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)ff(a[e],i)}var ks=X(null),fo=X(0);function gf(e,i){e=ei,Q(fo,e),Q(ks,i),ei=e|i.baseLanes}function Oc(){Q(fo,ei),Q(ks,ks.current)}function Lc(){ei=fo.current,W(ks),W(fo)}var gi=0,wt=null,Ut=null,le=null,po=!1,Ps=!1,Ki=!1,go=0,za=0,Bs=null,A0=0;function Jt(){throw Error(s(321))}function Nc(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!Ze(e[a],i[a]))return!1;return!0}function kc(e,i,a,l,d,m){return gi=m,wt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,D.H=e===null||e.memoizedState===null?Zf:Jf,Ki=!1,m=a(l,d),Ki=!1,Ps&&(m=yf(i,a,l,d)),mf(e),m}function mf(e){D.H=So;var i=Ut!==null&&Ut.next!==null;if(gi=0,le=Ut=wt=null,po=!1,za=0,Bs=null,i)throw Error(s(300));e===null||Ae||(e=e.dependencies,e!==null&&oo(e)&&(Ae=!0))}function yf(e,i,a,l){wt=e;var d=0;do{if(Ps&&(Bs=null),za=0,Ps=!1,25<=d)throw Error(s(301));if(d+=1,le=Ut=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}D.H=R0,m=i(a,l)}while(Ps);return m}function S0(){var e=D.H,i=e.useState()[0];return i=typeof i.then=="function"?Ua(i):i,e=e.useState()[0],(Ut!==null?Ut.memoizedState:null)!==e&&(wt.flags|=1024),i}function Pc(){var e=go!==0;return go=0,e}function Bc(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function zc(e){if(po){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}po=!1}gi=0,le=Ut=wt=null,Ps=!1,za=go=0,Bs=null}function je(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return le===null?wt.memoizedState=le=e:le=le.next=e,le}function ce(){if(Ut===null){var e=wt.alternate;e=e!==null?e.memoizedState:null}else e=Ut.next;var i=le===null?wt.memoizedState:le.next;if(i!==null)le=i,Ut=e;else{if(e===null)throw wt.alternate===null?Error(s(467)):Error(s(310));Ut=e,e={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},le===null?wt.memoizedState=le=e:le=le.next=e}return le}function Uc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ua(e){var i=za;return za+=1,Bs===null&&(Bs=[]),e=uf(Bs,e,i),i=wt,(le===null?i.memoizedState:le.next)===null&&(i=i.alternate,D.H=i===null||i.memoizedState===null?Zf:Jf),e}function mo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ua(e);if(e.$$typeof===R)return De(e)}throw Error(s(438,String(e)))}function Hc(e){var i=null,a=wt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=wt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(d){return d.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Uc(),wt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),l=0;l<e;l++)a[l]=K;return i.index++,a}function Kn(e,i){return typeof i=="function"?i(e):i}function yo(e){var i=ce();return Fc(i,Ut,e)}function Fc(e,i,a){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var d=e.baseQueue,m=l.pending;if(m!==null){if(d!==null){var v=d.next;d.next=m.next,m.next=v}i.baseQueue=d=m,l.pending=null}if(m=e.baseState,d===null)e.memoizedState=m;else{i=d.next;var _=v=null,x=null,B=i,q=!1;do{var $=B.lane&-536870913;if($!==B.lane?(Ot&$)===$:(gi&$)===$){var F=B.revertLane;if(F===0)x!==null&&(x=x.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),$===Ls&&(q=!0);else if((gi&F)===F){B=B.next,F===Ls&&(q=!0);continue}else $={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},x===null?(_=x=$,v=m):x=x.next=$,wt.lanes|=F,Ei|=F;$=B.action,Ki&&a(m,$),m=B.hasEagerState?B.eagerState:a(m,$)}else F={lane:$,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},x===null?(_=x=F,v=m):x=x.next=F,wt.lanes|=$,Ei|=$;B=B.next}while(B!==null&&B!==i);if(x===null?v=m:x.next=_,!Ze(m,e.memoizedState)&&(Ae=!0,q&&(a=Ns,a!==null)))throw a;e.memoizedState=m,e.baseState=v,e.baseQueue=x,l.lastRenderedState=m}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Ic(e){var i=ce(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=a.dispatch,d=a.pending,m=i.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do m=e(m,v.action),v=v.next;while(v!==d);Ze(m,i.memoizedState)||(Ae=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,l]}function bf(e,i,a){var l=wt,d=ce(),m=Nt;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!Ze((Ut||d).memoizedState,a);v&&(d.memoizedState=a,Ae=!0),d=d.queue;var _=Sf.bind(null,l,d,e);if(Ha(2048,8,_,[e]),d.getSnapshot!==i||v||le!==null&&le.memoizedState.tag&1){if(l.flags|=2048,zs(9,bo(),Af.bind(null,l,d,a,i),null),qt===null)throw Error(s(349));m||(gi&124)!==0||vf(l,i,a)}return a}function vf(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=wt.updateQueue,i===null?(i=Uc(),wt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function Af(e,i,a,l){i.value=a,i.getSnapshot=l,Ef(i)&&_f(e)}function Sf(e,i,a){return a(function(){Ef(i)&&_f(e)})}function Ef(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!Ze(e,a)}catch{return!0}}function _f(e){var i=Cs(e,2);i!==null&&an(i,e,2)}function jc(e){var i=je();if(typeof e=="function"){var a=e;if(e=a(),Ki){We(!0);try{a()}finally{We(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:e},i}function wf(e,i,a,l){return e.baseState=a,Fc(e,Ut,typeof l=="function"?l:Kn)}function E0(e,i,a,l,d){if(Ao(e))throw Error(s(485));if(e=i.action,e!==null){var m={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};D.T!==null?a(!0):m.isTransition=!1,l(m),a=i.pending,a===null?(m.next=i.pending=m,Tf(i,m)):(m.next=a.next,i.pending=a.next=m)}}function Tf(e,i){var a=i.action,l=i.payload,d=e.state;if(i.isTransition){var m=D.T,v={};D.T=v;try{var _=a(d,l),x=D.S;x!==null&&x(v,_),xf(e,i,_)}catch(B){Gc(e,i,B)}finally{D.T=m}}else try{m=a(d,l),xf(e,i,m)}catch(B){Gc(e,i,B)}}function xf(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Rf(e,i,l)},function(l){return Gc(e,i,l)}):Rf(e,i,a)}function Rf(e,i,a){i.status="fulfilled",i.value=a,Cf(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,Tf(e,a)))}function Gc(e,i,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Cf(i),i=i.next;while(i!==l)}e.action=null}function Cf(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Mf(e,i){return i}function Df(e,i){if(Nt){var a=qt.formState;if(a!==null){t:{var l=wt;if(Nt){if(Wt){e:{for(var d=Wt,m=Rn;d.nodeType!==8;){if(!m){d=null;break e}if(d=_n(d.nextSibling),d===null){d=null;break e}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){Wt=_n(d.nextSibling),l=d.data==="F!";break t}}Vi(l)}l=!1}l&&(i=a[0])}}return a=je(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mf,lastRenderedState:i},a.queue=l,a=Kf.bind(null,wt,l),l.dispatch=a,l=jc(!1),m=$c.bind(null,wt,!1,l.queue),l=je(),d={state:i,dispatch:null,action:e,pending:null},l.queue=d,a=E0.bind(null,wt,d,m,a),d.dispatch=a,l.memoizedState=e,[i,a,!1]}function Of(e){var i=ce();return Lf(i,Ut,e)}function Lf(e,i,a){if(i=Fc(e,i,Mf)[0],e=yo(Kn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Ua(i)}catch(v){throw v===La?uo:v}else l=i;i=ce();var d=i.queue,m=d.dispatch;return a!==i.memoizedState&&(wt.flags|=2048,zs(9,bo(),_0.bind(null,d,a),null)),[l,m,e]}function _0(e,i){e.action=i}function Nf(e){var i=ce(),a=Ut;if(a!==null)return Lf(i,a,e);ce(),i=i.memoizedState,a=ce();var l=a.queue.dispatch;return a.memoizedState=e,[i,l,!1]}function zs(e,i,a,l){return e={tag:e,create:a,deps:l,inst:i,next:null},i=wt.updateQueue,i===null&&(i=Uc(),wt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,i.lastEffect=e),e}function bo(){return{destroy:void 0,resource:void 0}}function kf(){return ce().memoizedState}function vo(e,i,a,l){var d=je();l=l===void 0?null:l,wt.flags|=e,d.memoizedState=zs(1|i,bo(),a,l)}function Ha(e,i,a,l){var d=ce();l=l===void 0?null:l;var m=d.memoizedState.inst;Ut!==null&&l!==null&&Nc(l,Ut.memoizedState.deps)?d.memoizedState=zs(i,m,a,l):(wt.flags|=e,d.memoizedState=zs(1|i,m,a,l))}function Pf(e,i){vo(8390656,8,e,i)}function Bf(e,i){Ha(2048,8,e,i)}function zf(e,i){return Ha(4,2,e,i)}function Uf(e,i){return Ha(4,4,e,i)}function Hf(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Ff(e,i,a){a=a!=null?a.concat([e]):null,Ha(4,4,Hf.bind(null,i,e),a)}function qc(){}function If(e,i){var a=ce();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Nc(i,l[1])?l[0]:(a.memoizedState=[e,i],e)}function jf(e,i){var a=ce();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Nc(i,l[1]))return l[0];if(l=e(),Ki){We(!0);try{e()}finally{We(!1)}}return a.memoizedState=[l,i],l}function Vc(e,i,a){return a===void 0||(gi&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=Vp(),wt.lanes|=e,Ei|=e,a)}function Gf(e,i,a,l){return Ze(a,i)?a:ks.current!==null?(e=Vc(e,a,l),Ze(e,i)||(Ae=!0),e):(gi&42)===0?(Ae=!0,e.memoizedState=a):(e=Vp(),wt.lanes|=e,Ei|=e,i)}function qf(e,i,a,l,d){var m=H.p;H.p=m!==0&&8>m?m:8;var v=D.T,_={};D.T=_,$c(e,!1,i,a);try{var x=d(),B=D.S;if(B!==null&&B(_,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var q=v0(x,l);Fa(e,i,q,sn(e))}else Fa(e,i,l,sn(e))}catch($){Fa(e,i,{then:function(){},status:"rejected",reason:$},sn())}finally{H.p=m,D.T=v}}function w0(){}function Xc(e,i,a,l){if(e.tag!==5)throw Error(s(476));var d=Vf(e).queue;qf(e,d,i,J,a===null?w0:function(){return Xf(e),a(l)})}function Vf(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:J},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Xf(e){var i=Vf(e).next.queue;Fa(e,i,{},sn())}function Yc(){return De(sr)}function Yf(){return ce().memoizedState}function $f(){return ce().memoizedState}function T0(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=sn();e=fi(a);var l=pi(i,e,a);l!==null&&(an(l,i,a),ka(l,i,a)),i={cache:_c()},e.payload=i;return}i=i.return}}function x0(e,i,a){var l=sn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ao(e)?Qf(i,a):(a=fc(e,i,a,l),a!==null&&(an(a,e,l),Wf(a,i,l)))}function Kf(e,i,a){var l=sn();Fa(e,i,a,l)}function Fa(e,i,a,l){var d={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ao(e))Qf(i,d);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var v=i.lastRenderedState,_=m(v,a);if(d.hasEagerState=!0,d.eagerState=_,Ze(_,v))return no(e,i,d,0),qt===null&&eo(),!1}catch{}finally{}if(a=fc(e,i,d,l),a!==null)return an(a,e,l),Wf(a,i,l),!0}return!1}function $c(e,i,a,l){if(l={lane:2,revertLane:xu(),action:l,hasEagerState:!1,eagerState:null,next:null},Ao(e)){if(i)throw Error(s(479))}else i=fc(e,a,l,2),i!==null&&an(i,e,2)}function Ao(e){var i=e.alternate;return e===wt||i!==null&&i===wt}function Qf(e,i){Ps=po=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Wf(e,i,a){if((a&4194048)!==0){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,sd(e,a)}}var So={readContext:De,use:mo,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt,useHostTransitionStatus:Jt,useFormState:Jt,useActionState:Jt,useOptimistic:Jt,useMemoCache:Jt,useCacheRefresh:Jt},Zf={readContext:De,use:mo,useCallback:function(e,i){return je().memoizedState=[e,i===void 0?null:i],e},useContext:De,useEffect:Pf,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,vo(4194308,4,Hf.bind(null,i,e),a)},useLayoutEffect:function(e,i){return vo(4194308,4,e,i)},useInsertionEffect:function(e,i){vo(4,2,e,i)},useMemo:function(e,i){var a=je();i=i===void 0?null:i;var l=e();if(Ki){We(!0);try{e()}finally{We(!1)}}return a.memoizedState=[l,i],l},useReducer:function(e,i,a){var l=je();if(a!==void 0){var d=a(i);if(Ki){We(!0);try{a(i)}finally{We(!1)}}}else d=i;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=x0.bind(null,wt,e),[l.memoizedState,e]},useRef:function(e){var i=je();return e={current:e},i.memoizedState=e},useState:function(e){e=jc(e);var i=e.queue,a=Kf.bind(null,wt,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:qc,useDeferredValue:function(e,i){var a=je();return Vc(a,e,i)},useTransition:function(){var e=jc(!1);return e=qf.bind(null,wt,e.queue,!0,!1),je().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var l=wt,d=je();if(Nt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),qt===null)throw Error(s(349));(Ot&124)!==0||vf(l,i,a)}d.memoizedState=a;var m={value:a,getSnapshot:i};return d.queue=m,Pf(Sf.bind(null,l,m,e),[e]),l.flags|=2048,zs(9,bo(),Af.bind(null,l,m,a,i),null),a},useId:function(){var e=je(),i=qt.identifierPrefix;if(Nt){var a=Xn,l=Vn;a=(l&~(1<<32-be(l)-1)).toString(32)+a,i=""+i+"R"+a,a=go++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=A0++,i=""+i+"r"+a.toString(32)+"";return e.memoizedState=i},useHostTransitionStatus:Yc,useFormState:Df,useActionState:Df,useOptimistic:function(e){var i=je();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=$c.bind(null,wt,!0,a),a.dispatch=i,[e,i]},useMemoCache:Hc,useCacheRefresh:function(){return je().memoizedState=T0.bind(null,wt)}},Jf={readContext:De,use:mo,useCallback:If,useContext:De,useEffect:Bf,useImperativeHandle:Ff,useInsertionEffect:zf,useLayoutEffect:Uf,useMemo:jf,useReducer:yo,useRef:kf,useState:function(){return yo(Kn)},useDebugValue:qc,useDeferredValue:function(e,i){var a=ce();return Gf(a,Ut.memoizedState,e,i)},useTransition:function(){var e=yo(Kn)[0],i=ce().memoizedState;return[typeof e=="boolean"?e:Ua(e),i]},useSyncExternalStore:bf,useId:Yf,useHostTransitionStatus:Yc,useFormState:Of,useActionState:Of,useOptimistic:function(e,i){var a=ce();return wf(a,Ut,e,i)},useMemoCache:Hc,useCacheRefresh:$f},R0={readContext:De,use:mo,useCallback:If,useContext:De,useEffect:Bf,useImperativeHandle:Ff,useInsertionEffect:zf,useLayoutEffect:Uf,useMemo:jf,useReducer:Ic,useRef:kf,useState:function(){return Ic(Kn)},useDebugValue:qc,useDeferredValue:function(e,i){var a=ce();return Ut===null?Vc(a,e,i):Gf(a,Ut.memoizedState,e,i)},useTransition:function(){var e=Ic(Kn)[0],i=ce().memoizedState;return[typeof e=="boolean"?e:Ua(e),i]},useSyncExternalStore:bf,useId:Yf,useHostTransitionStatus:Yc,useFormState:Nf,useActionState:Nf,useOptimistic:function(e,i){var a=ce();return Ut!==null?wf(a,Ut,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Hc,useCacheRefresh:$f},Us=null,Ia=0;function Eo(e){var i=Ia;return Ia+=1,Us===null&&(Us=[]),uf(Us,e,i)}function ja(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function _o(e,i){throw i.$$typeof===y?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function tp(e){var i=e._init;return i(e._payload)}function ep(e){function i(k,O){if(e){var P=k.deletions;P===null?(k.deletions=[O],k.flags|=16):P.push(O)}}function a(k,O){if(!e)return null;for(;O!==null;)i(k,O),O=O.sibling;return null}function l(k){for(var O=new Map;k!==null;)k.key!==null?O.set(k.key,k):O.set(k.index,k),k=k.sibling;return O}function d(k,O){return k=qn(k,O),k.index=0,k.sibling=null,k}function m(k,O,P){return k.index=P,e?(P=k.alternate,P!==null?(P=P.index,P<O?(k.flags|=67108866,O):P):(k.flags|=67108866,O)):(k.flags|=1048576,O)}function v(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function _(k,O,P,Y){return O===null||O.tag!==6?(O=gc(P,k.mode,Y),O.return=k,O):(O=d(O,P),O.return=k,O)}function x(k,O,P,Y){var it=P.type;return it===S?q(k,O,P.props.children,Y,P.key):O!==null&&(O.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===V&&tp(it)===O.type)?(O=d(O,P.props),ja(O,P),O.return=k,O):(O=so(P.type,P.key,P.props,null,k.mode,Y),ja(O,P),O.return=k,O)}function B(k,O,P,Y){return O===null||O.tag!==4||O.stateNode.containerInfo!==P.containerInfo||O.stateNode.implementation!==P.implementation?(O=mc(P,k.mode,Y),O.return=k,O):(O=d(O,P.children||[]),O.return=k,O)}function q(k,O,P,Y,it){return O===null||O.tag!==7?(O=Ii(P,k.mode,Y,it),O.return=k,O):(O=d(O,P),O.return=k,O)}function $(k,O,P){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=gc(""+O,k.mode,P),O.return=k,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case b:return P=so(O.type,O.key,O.props,null,k.mode,P),ja(P,O),P.return=k,P;case A:return O=mc(O,k.mode,P),O.return=k,O;case V:var Y=O._init;return O=Y(O._payload),$(k,O,P)}if(rt(O)||st(O))return O=Ii(O,k.mode,P,null),O.return=k,O;if(typeof O.then=="function")return $(k,Eo(O),P);if(O.$$typeof===R)return $(k,lo(k,O),P);_o(k,O)}return null}function F(k,O,P,Y){var it=O!==null?O.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return it!==null?null:_(k,O,""+P,Y);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case b:return P.key===it?x(k,O,P,Y):null;case A:return P.key===it?B(k,O,P,Y):null;case V:return it=P._init,P=it(P._payload),F(k,O,P,Y)}if(rt(P)||st(P))return it!==null?null:q(k,O,P,Y,null);if(typeof P.then=="function")return F(k,O,Eo(P),Y);if(P.$$typeof===R)return F(k,O,lo(k,P),Y);_o(k,P)}return null}function I(k,O,P,Y,it){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return k=k.get(P)||null,_(O,k,""+Y,it);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case b:return k=k.get(Y.key===null?P:Y.key)||null,x(O,k,Y,it);case A:return k=k.get(Y.key===null?P:Y.key)||null,B(O,k,Y,it);case V:var Tt=Y._init;return Y=Tt(Y._payload),I(k,O,P,Y,it)}if(rt(Y)||st(Y))return k=k.get(P)||null,q(O,k,Y,it,null);if(typeof Y.then=="function")return I(k,O,P,Eo(Y),it);if(Y.$$typeof===R)return I(k,O,P,lo(O,Y),it);_o(O,Y)}return null}function gt(k,O,P,Y){for(var it=null,Tt=null,ot=O,dt=O=0,Ee=null;ot!==null&&dt<P.length;dt++){ot.index>dt?(Ee=ot,ot=null):Ee=ot.sibling;var Lt=F(k,ot,P[dt],Y);if(Lt===null){ot===null&&(ot=Ee);break}e&&ot&&Lt.alternate===null&&i(k,ot),O=m(Lt,O,dt),Tt===null?it=Lt:Tt.sibling=Lt,Tt=Lt,ot=Ee}if(dt===P.length)return a(k,ot),Nt&&Gi(k,dt),it;if(ot===null){for(;dt<P.length;dt++)ot=$(k,P[dt],Y),ot!==null&&(O=m(ot,O,dt),Tt===null?it=ot:Tt.sibling=ot,Tt=ot);return Nt&&Gi(k,dt),it}for(ot=l(ot);dt<P.length;dt++)Ee=I(ot,k,dt,P[dt],Y),Ee!==null&&(e&&Ee.alternate!==null&&ot.delete(Ee.key===null?dt:Ee.key),O=m(Ee,O,dt),Tt===null?it=Ee:Tt.sibling=Ee,Tt=Ee);return e&&ot.forEach(function(Oi){return i(k,Oi)}),Nt&&Gi(k,dt),it}function ht(k,O,P,Y){if(P==null)throw Error(s(151));for(var it=null,Tt=null,ot=O,dt=O=0,Ee=null,Lt=P.next();ot!==null&&!Lt.done;dt++,Lt=P.next()){ot.index>dt?(Ee=ot,ot=null):Ee=ot.sibling;var Oi=F(k,ot,Lt.value,Y);if(Oi===null){ot===null&&(ot=Ee);break}e&&ot&&Oi.alternate===null&&i(k,ot),O=m(Oi,O,dt),Tt===null?it=Oi:Tt.sibling=Oi,Tt=Oi,ot=Ee}if(Lt.done)return a(k,ot),Nt&&Gi(k,dt),it;if(ot===null){for(;!Lt.done;dt++,Lt=P.next())Lt=$(k,Lt.value,Y),Lt!==null&&(O=m(Lt,O,dt),Tt===null?it=Lt:Tt.sibling=Lt,Tt=Lt);return Nt&&Gi(k,dt),it}for(ot=l(ot);!Lt.done;dt++,Lt=P.next())Lt=I(ot,k,dt,Lt.value,Y),Lt!==null&&(e&&Lt.alternate!==null&&ot.delete(Lt.key===null?dt:Lt.key),O=m(Lt,O,dt),Tt===null?it=Lt:Tt.sibling=Lt,Tt=Lt);return e&&ot.forEach(function(Cv){return i(k,Cv)}),Nt&&Gi(k,dt),it}function Ft(k,O,P,Y){if(typeof P=="object"&&P!==null&&P.type===S&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case b:t:{for(var it=P.key;O!==null;){if(O.key===it){if(it=P.type,it===S){if(O.tag===7){a(k,O.sibling),Y=d(O,P.props.children),Y.return=k,k=Y;break t}}else if(O.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===V&&tp(it)===O.type){a(k,O.sibling),Y=d(O,P.props),ja(Y,P),Y.return=k,k=Y;break t}a(k,O);break}else i(k,O);O=O.sibling}P.type===S?(Y=Ii(P.props.children,k.mode,Y,P.key),Y.return=k,k=Y):(Y=so(P.type,P.key,P.props,null,k.mode,Y),ja(Y,P),Y.return=k,k=Y)}return v(k);case A:t:{for(it=P.key;O!==null;){if(O.key===it)if(O.tag===4&&O.stateNode.containerInfo===P.containerInfo&&O.stateNode.implementation===P.implementation){a(k,O.sibling),Y=d(O,P.children||[]),Y.return=k,k=Y;break t}else{a(k,O);break}else i(k,O);O=O.sibling}Y=mc(P,k.mode,Y),Y.return=k,k=Y}return v(k);case V:return it=P._init,P=it(P._payload),Ft(k,O,P,Y)}if(rt(P))return gt(k,O,P,Y);if(st(P)){if(it=st(P),typeof it!="function")throw Error(s(150));return P=it.call(P),ht(k,O,P,Y)}if(typeof P.then=="function")return Ft(k,O,Eo(P),Y);if(P.$$typeof===R)return Ft(k,O,lo(k,P),Y);_o(k,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,O!==null&&O.tag===6?(a(k,O.sibling),Y=d(O,P),Y.return=k,k=Y):(a(k,O),Y=gc(P,k.mode,Y),Y.return=k,k=Y),v(k)):a(k,O)}return function(k,O,P,Y){try{Ia=0;var it=Ft(k,O,P,Y);return Us=null,it}catch(ot){if(ot===La||ot===uo)throw ot;var Tt=Je(29,ot,null,k.mode);return Tt.lanes=Y,Tt.return=k,Tt}finally{}}}var Hs=ep(!0),np=ep(!1),gn=X(null),Cn=null;function mi(e){var i=e.alternate;Q(me,me.current&1),Q(gn,e),Cn===null&&(i===null||ks.current!==null||i.memoizedState!==null)&&(Cn=e)}function ip(e){if(e.tag===22){if(Q(me,me.current),Q(gn,e),Cn===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(Cn=e)}}else yi()}function yi(){Q(me,me.current),Q(gn,gn.current)}function Qn(e){W(gn),Cn===e&&(Cn=null),W(me)}var me=X(0);function wo(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Uu(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Kc(e,i,a,l){i=e.memoizedState,a=a(l,i),a=a==null?i:g({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Qc={enqueueSetState:function(e,i,a){e=e._reactInternals;var l=sn(),d=fi(l);d.payload=i,a!=null&&(d.callback=a),i=pi(e,d,l),i!==null&&(an(i,e,l),ka(i,e,l))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var l=sn(),d=fi(l);d.tag=1,d.payload=i,a!=null&&(d.callback=a),i=pi(e,d,l),i!==null&&(an(i,e,l),ka(i,e,l))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=sn(),l=fi(a);l.tag=2,i!=null&&(l.callback=i),i=pi(e,l,a),i!==null&&(an(i,e,a),ka(i,e,a))}};function sp(e,i,a,l,d,m,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,m,v):i.prototype&&i.prototype.isPureReactComponent?!wa(a,l)||!wa(d,m):!0}function ap(e,i,a,l){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==e&&Qc.enqueueReplaceState(i,i.state,null)}function Qi(e,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(e=e.defaultProps){a===i&&(a=g({},a));for(var d in e)a[d]===void 0&&(a[d]=e[d])}return a}var To=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function rp(e){To(e)}function op(e){console.error(e)}function lp(e){To(e)}function xo(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function cp(e,i,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Wc(e,i,a){return a=fi(a),a.tag=3,a.payload={element:null},a.callback=function(){xo(e,i)},a}function up(e){return e=fi(e),e.tag=3,e}function hp(e,i,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var m=l.value;e.payload=function(){return d(m)},e.callback=function(){cp(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){cp(i,a,l),typeof d!="function"&&(_i===null?_i=new Set([this]):_i.add(this));var _=l.stack;this.componentDidCatch(l.value,{componentStack:_!==null?_:""})})}function C0(e,i,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Ma(i,a,d,!0),a=gn.current,a!==null){switch(a.tag){case 13:return Cn===null?Su():a.alternate===null&&Zt===0&&(Zt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===xc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),_u(e,l,d)),!1;case 22:return a.flags|=65536,l===xc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),_u(e,l,d)),!1}throw Error(s(435,a.tag))}return _u(e,l,d),Su(),!1}if(Nt)return i=gn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=d,l!==vc&&(e=Error(s(422),{cause:l}),Ca(hn(e,a)))):(l!==vc&&(i=Error(s(423),{cause:l}),Ca(hn(i,a))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=hn(l,a),d=Wc(e.stateNode,l,d),Mc(e,d),Zt!==4&&(Zt=2)),!1;var m=Error(s(520),{cause:l});if(m=hn(m,a),Ka===null?Ka=[m]:Ka.push(m),Zt!==4&&(Zt=2),i===null)return!0;l=hn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=d&-d,a.lanes|=e,e=Wc(a.stateNode,l,e),Mc(a,e),!1;case 1:if(i=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(_i===null||!_i.has(m))))return a.flags|=65536,d&=-d,a.lanes|=d,d=up(d),hp(d,e,a,l),Mc(a,d),!1}a=a.return}while(a!==null);return!1}var dp=Error(s(461)),Ae=!1;function Te(e,i,a,l){i.child=e===null?np(i,null,a,l):Hs(i,e.child,a,l)}function fp(e,i,a,l,d){a=a.render;var m=i.ref;if("ref"in l){var v={};for(var _ in l)_!=="ref"&&(v[_]=l[_])}else v=l;return Yi(i),l=kc(e,i,a,v,m,d),_=Pc(),e!==null&&!Ae?(Bc(e,i,d),Wn(e,i,d)):(Nt&&_&&yc(i),i.flags|=1,Te(e,i,l,d),i.child)}function pp(e,i,a,l,d){if(e===null){var m=a.type;return typeof m=="function"&&!pc(m)&&m.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=m,gp(e,i,m,l,d)):(e=so(a.type,null,l,i,i.mode,d),e.ref=i.ref,e.return=i,i.child=e)}if(m=e.child,!au(e,d)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:wa,a(v,l)&&e.ref===i.ref)return Wn(e,i,d)}return i.flags|=1,e=qn(m,l),e.ref=i.ref,e.return=i,i.child=e}function gp(e,i,a,l,d){if(e!==null){var m=e.memoizedProps;if(wa(m,l)&&e.ref===i.ref)if(Ae=!1,i.pendingProps=l=m,au(e,d))(e.flags&131072)!==0&&(Ae=!0);else return i.lanes=e.lanes,Wn(e,i,d)}return Zc(e,i,a,l,d)}function mp(e,i,a){var l=i.pendingProps,d=l.children,m=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=m!==null?m.baseLanes|a:a,e!==null){for(d=i.child=e.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;i.childLanes=m&~l}else i.childLanes=0,i.child=null;return yp(e,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&co(i,m!==null?m.cachePool:null),m!==null?gf(i,m):Oc(),ip(i);else return i.lanes=i.childLanes=536870912,yp(e,i,m!==null?m.baseLanes|a:a,a)}else m!==null?(co(i,m.cachePool),gf(i,m),yi(),i.memoizedState=null):(e!==null&&co(i,null),Oc(),yi());return Te(e,i,d,a),i.child}function yp(e,i,a,l){var d=Tc();return d=d===null?null:{parent:ge._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},e!==null&&co(i,null),Oc(),ip(i),e!==null&&Ma(e,i,l,!0),null}function Ro(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Zc(e,i,a,l,d){return Yi(i),a=kc(e,i,a,l,void 0,d),l=Pc(),e!==null&&!Ae?(Bc(e,i,d),Wn(e,i,d)):(Nt&&l&&yc(i),i.flags|=1,Te(e,i,a,d),i.child)}function bp(e,i,a,l,d,m){return Yi(i),i.updateQueue=null,a=yf(i,l,a,d),mf(e),l=Pc(),e!==null&&!Ae?(Bc(e,i,m),Wn(e,i,m)):(Nt&&l&&yc(i),i.flags|=1,Te(e,i,a,m),i.child)}function vp(e,i,a,l,d){if(Yi(i),i.stateNode===null){var m=Ms,v=a.contextType;typeof v=="object"&&v!==null&&(m=De(v)),m=new a(l,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Qc,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=l,m.state=i.memoizedState,m.refs={},Rc(i),v=a.contextType,m.context=typeof v=="object"&&v!==null?De(v):Ms,m.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Kc(i,a,v,l),m.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Qc.enqueueReplaceState(m,m.state,null),Ba(i,l,m,d),Pa(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(e===null){m=i.stateNode;var _=i.memoizedProps,x=Qi(a,_);m.props=x;var B=m.context,q=a.contextType;v=Ms,typeof q=="object"&&q!==null&&(v=De(q));var $=a.getDerivedStateFromProps;q=typeof $=="function"||typeof m.getSnapshotBeforeUpdate=="function",_=i.pendingProps!==_,q||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_||B!==v)&&ap(i,m,l,v),di=!1;var F=i.memoizedState;m.state=F,Ba(i,l,m,d),Pa(),B=i.memoizedState,_||F!==B||di?(typeof $=="function"&&(Kc(i,a,$,l),B=i.memoizedState),(x=di||sp(i,a,x,l,F,B,v))?(q||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=B),m.props=l,m.state=B,m.context=v,l=x):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{m=i.stateNode,Cc(e,i),v=i.memoizedProps,q=Qi(a,v),m.props=q,$=i.pendingProps,F=m.context,B=a.contextType,x=Ms,typeof B=="object"&&B!==null&&(x=De(B)),_=a.getDerivedStateFromProps,(B=typeof _=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==$||F!==x)&&ap(i,m,l,x),di=!1,F=i.memoizedState,m.state=F,Ba(i,l,m,d),Pa();var I=i.memoizedState;v!==$||F!==I||di||e!==null&&e.dependencies!==null&&oo(e.dependencies)?(typeof _=="function"&&(Kc(i,a,_,l),I=i.memoizedState),(q=di||sp(i,a,q,l,F,I,x)||e!==null&&e.dependencies!==null&&oo(e.dependencies))?(B||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,I,x),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,I,x)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&F===e.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&F===e.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=I),m.props=l,m.state=I,m.context=x,l=q):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&F===e.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&F===e.memoizedState||(i.flags|=1024),l=!1)}return m=l,Ro(e,i),l=(i.flags&128)!==0,m||l?(m=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,e!==null&&l?(i.child=Hs(i,e.child,null,d),i.child=Hs(i,null,a,d)):Te(e,i,a,d),i.memoizedState=m.state,e=i.child):e=Wn(e,i,d),e}function Ap(e,i,a,l){return Ra(),i.flags|=256,Te(e,i,a,l),i.child}var Jc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tu(e){return{baseLanes:e,cachePool:of()}}function eu(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=mn),e}function Sp(e,i,a){var l=i.pendingProps,d=!1,m=(i.flags&128)!==0,v;if((v=m)||(v=e!==null&&e.memoizedState===null?!1:(me.current&2)!==0),v&&(d=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(Nt){if(d?mi(i):yi(),Nt){var _=Wt,x;if(x=_){t:{for(x=_,_=Rn;x.nodeType!==8;){if(!_){_=null;break t}if(x=_n(x.nextSibling),x===null){_=null;break t}}_=x}_!==null?(i.memoizedState={dehydrated:_,treeContext:ji!==null?{id:Vn,overflow:Xn}:null,retryLane:536870912,hydrationErrors:null},x=Je(18,null,null,0),x.stateNode=_,x.return=i,i.child=x,Be=i,Wt=null,x=!0):x=!1}x||Vi(i)}if(_=i.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return Uu(_)?i.lanes=32:i.lanes=536870912,null;Qn(i)}return _=l.children,l=l.fallback,d?(yi(),d=i.mode,_=Co({mode:"hidden",children:_},d),l=Ii(l,d,a,null),_.return=i,l.return=i,_.sibling=l,i.child=_,d=i.child,d.memoizedState=tu(a),d.childLanes=eu(e,v,a),i.memoizedState=Jc,l):(mi(i),nu(i,_))}if(x=e.memoizedState,x!==null&&(_=x.dehydrated,_!==null)){if(m)i.flags&256?(mi(i),i.flags&=-257,i=iu(e,i,a)):i.memoizedState!==null?(yi(),i.child=e.child,i.flags|=128,i=null):(yi(),d=l.fallback,_=i.mode,l=Co({mode:"visible",children:l.children},_),d=Ii(d,_,a,null),d.flags|=2,l.return=i,d.return=i,l.sibling=d,i.child=l,Hs(i,e.child,null,a),l=i.child,l.memoizedState=tu(a),l.childLanes=eu(e,v,a),i.memoizedState=Jc,i=d);else if(mi(i),Uu(_)){if(v=_.nextSibling&&_.nextSibling.dataset,v)var B=v.dgst;v=B,l=Error(s(419)),l.stack="",l.digest=v,Ca({value:l,source:null,stack:null}),i=iu(e,i,a)}else if(Ae||Ma(e,i,a,!1),v=(a&e.childLanes)!==0,Ae||v){if(v=qt,v!==null&&(l=a&-a,l=(l&42)!==0?1:Hl(l),l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==x.retryLane))throw x.retryLane=l,Cs(e,l),an(v,e,l),dp;_.data==="$?"||Su(),i=iu(e,i,a)}else _.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=x.treeContext,Wt=_n(_.nextSibling),Be=i,Nt=!0,qi=null,Rn=!1,e!==null&&(fn[pn++]=Vn,fn[pn++]=Xn,fn[pn++]=ji,Vn=e.id,Xn=e.overflow,ji=i),i=nu(i,l.children),i.flags|=4096);return i}return d?(yi(),d=l.fallback,_=i.mode,x=e.child,B=x.sibling,l=qn(x,{mode:"hidden",children:l.children}),l.subtreeFlags=x.subtreeFlags&65011712,B!==null?d=qn(B,d):(d=Ii(d,_,a,null),d.flags|=2),d.return=i,l.return=i,l.sibling=d,i.child=l,l=d,d=i.child,_=e.child.memoizedState,_===null?_=tu(a):(x=_.cachePool,x!==null?(B=ge._currentValue,x=x.parent!==B?{parent:B,pool:B}:x):x=of(),_={baseLanes:_.baseLanes|a,cachePool:x}),d.memoizedState=_,d.childLanes=eu(e,v,a),i.memoizedState=Jc,l):(mi(i),a=e.child,e=a.sibling,a=qn(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function nu(e,i){return i=Co({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Co(e,i){return e=Je(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function iu(e,i,a){return Hs(i,e.child,null,a),e=nu(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Ep(e,i,a){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i),Sc(e.return,i,a)}function su(e,i,a,l,d){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=a,m.tailMode=d)}function _p(e,i,a){var l=i.pendingProps,d=l.revealOrder,m=l.tail;if(Te(e,i,l.children,a),l=me.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ep(e,a,i);else if(e.tag===19)Ep(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(Q(me,l),d){case"forwards":for(a=i.child,d=null;a!==null;)e=a.alternate,e!==null&&wo(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),su(i,!1,d,a,m);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(e=d.alternate,e!==null&&wo(e)===null){i.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}su(i,!0,a,null,m);break;case"together":su(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Wn(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Ei|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Ma(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=qn(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=qn(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function au(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&oo(e)))}function M0(e,i,a){switch(i.tag){case 3:Dt(i,i.stateNode.containerInfo),hi(i,ge,e.memoizedState.cache),Ra();break;case 27:case 5:zt(i);break;case 4:Dt(i,i.stateNode.containerInfo);break;case 10:hi(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(mi(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Sp(e,i,a):(mi(i),e=Wn(e,i,a),e!==null?e.sibling:null);mi(i);break;case 19:var d=(e.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Ma(e,i,a,!1),l=(a&i.childLanes)!==0),d){if(l)return _p(e,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Q(me,me.current),l)break;return null;case 22:case 23:return i.lanes=0,mp(e,i,a);case 24:hi(i,ge,e.memoizedState.cache)}return Wn(e,i,a)}function wp(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Ae=!0;else{if(!au(e,a)&&(i.flags&128)===0)return Ae=!1,M0(e,i,a);Ae=(e.flags&131072)!==0}else Ae=!1,Nt&&(i.flags&1048576)!==0&&Jd(i,ro,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var l=i.elementType,d=l._init;if(l=d(l._payload),i.type=l,typeof l=="function")pc(l)?(e=Qi(l,e),i.tag=1,i=vp(null,i,l,e,a)):(i.tag=0,i=Zc(null,i,l,e,a));else{if(l!=null){if(d=l.$$typeof,d===N){i.tag=11,i=fp(null,i,l,e,a);break t}else if(d===z){i.tag=14,i=pp(null,i,l,e,a);break t}}throw i=lt(l)||l,Error(s(306,i,""))}}return i;case 0:return Zc(e,i,i.type,i.pendingProps,a);case 1:return l=i.type,d=Qi(l,i.pendingProps),vp(e,i,l,d,a);case 3:t:{if(Dt(i,i.stateNode.containerInfo),e===null)throw Error(s(387));l=i.pendingProps;var m=i.memoizedState;d=m.element,Cc(e,i),Ba(i,l,null,a);var v=i.memoizedState;if(l=v.cache,hi(i,ge,l),l!==m.cache&&Ec(i,[ge],a,!0),Pa(),l=v.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=Ap(e,i,l,a);break t}else if(l!==d){d=hn(Error(s(424)),i),Ca(d),i=Ap(e,i,l,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Wt=_n(e.firstChild),Be=i,Nt=!0,qi=null,Rn=!0,a=np(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ra(),l===d){i=Wn(e,i,a);break t}Te(e,i,l,a)}i=i.child}return i;case 26:return Ro(e,i),e===null?(a=Cg(i.type,null,i.pendingProps,null))?i.memoizedState=a:Nt||(a=i.type,e=i.pendingProps,l=jo(at.current).createElement(a),l[Me]=i,l[Fe]=e,Re(l,a,e),ve(l),i.stateNode=l):i.memoizedState=Cg(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return zt(i),e===null&&Nt&&(l=i.stateNode=Tg(i.type,i.pendingProps,at.current),Be=i,Rn=!0,d=Wt,xi(i.type)?(Hu=d,Wt=_n(l.firstChild)):Wt=d),Te(e,i,i.pendingProps.children,a),Ro(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Nt&&((d=l=Wt)&&(l=iv(l,i.type,i.pendingProps,Rn),l!==null?(i.stateNode=l,Be=i,Wt=_n(l.firstChild),Rn=!1,d=!0):d=!1),d||Vi(i)),zt(i),d=i.type,m=i.pendingProps,v=e!==null?e.memoizedProps:null,l=m.children,Pu(d,m)?l=null:v!==null&&Pu(d,v)&&(i.flags|=32),i.memoizedState!==null&&(d=kc(e,i,S0,null,null,a),sr._currentValue=d),Ro(e,i),Te(e,i,l,a),i.child;case 6:return e===null&&Nt&&((e=a=Wt)&&(a=sv(a,i.pendingProps,Rn),a!==null?(i.stateNode=a,Be=i,Wt=null,e=!0):e=!1),e||Vi(i)),null;case 13:return Sp(e,i,a);case 4:return Dt(i,i.stateNode.containerInfo),l=i.pendingProps,e===null?i.child=Hs(i,null,l,a):Te(e,i,l,a),i.child;case 11:return fp(e,i,i.type,i.pendingProps,a);case 7:return Te(e,i,i.pendingProps,a),i.child;case 8:return Te(e,i,i.pendingProps.children,a),i.child;case 12:return Te(e,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,hi(i,i.type,l.value),Te(e,i,l.children,a),i.child;case 9:return d=i.type._context,l=i.pendingProps.children,Yi(i),d=De(d),l=l(d),i.flags|=1,Te(e,i,l,a),i.child;case 14:return pp(e,i,i.type,i.pendingProps,a);case 15:return gp(e,i,i.type,i.pendingProps,a);case 19:return _p(e,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},e===null?(a=Co(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=qn(e.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return mp(e,i,a);case 24:return Yi(i),l=De(ge),e===null?(d=Tc(),d===null&&(d=qt,m=_c(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=a),d=m),i.memoizedState={parent:l,cache:d},Rc(i),hi(i,ge,d)):((e.lanes&a)!==0&&(Cc(e,i),Ba(i,null,null,a),Pa()),d=e.memoizedState,m=i.memoizedState,d.parent!==l?(d={parent:l,cache:l},i.memoizedState=d,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=d),hi(i,ge,l)):(l=m.cache,hi(i,ge,l),l!==d.cache&&Ec(i,[ge],a,!0))),Te(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Zn(e){e.flags|=4}function Tp(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ng(i)){if(i=gn.current,i!==null&&((Ot&4194048)===Ot?Cn!==null:(Ot&62914560)!==Ot&&(Ot&536870912)===0||i!==Cn))throw Na=xc,lf;e.flags|=8192}}function Mo(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?nd():536870912,e.lanes|=i,Gs|=i)}function Ga(e,i){if(!Nt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Kt(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(i)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=a,i}function D0(e,i,a){var l=i.pendingProps;switch(bc(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(i),null;case 1:return Kt(i),null;case 3:return a=i.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),$n(ge),de(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(xa(i)?Zn(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,nf())),Kt(i),null;case 26:return a=i.memoizedState,e===null?(Zn(i),a!==null?(Kt(i),Tp(i,a)):(Kt(i),i.flags&=-16777217)):a?a!==e.memoizedState?(Zn(i),Kt(i),Tp(i,a)):(Kt(i),i.flags&=-16777217):(e.memoizedProps!==l&&Zn(i),Kt(i),i.flags&=-16777217),null;case 27:He(i),a=at.current;var d=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==l&&Zn(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return Kt(i),null}e=nt.current,xa(i)?tf(i):(e=Tg(d,l,a),i.stateNode=e,Zn(i))}return Kt(i),null;case 5:if(He(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&Zn(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return Kt(i),null}if(e=nt.current,xa(i))tf(i);else{switch(d=jo(at.current),e){case 1:e=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?d.createElement("select",{is:l.is}):d.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?d.createElement(a,{is:l.is}):d.createElement(a)}}e[Me]=i,e[Fe]=l;t:for(d=i.child;d!==null;){if(d.tag===5||d.tag===6)e.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===i)break t;for(;d.sibling===null;){if(d.return===null||d.return===i)break t;d=d.return}d.sibling.return=d.return,d=d.sibling}i.stateNode=e;t:switch(Re(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Zn(i)}}return Kt(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==l&&Zn(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(e=at.current,xa(i)){if(e=i.stateNode,a=i.memoizedProps,l=null,d=Be,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[Me]=i,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||bg(e.nodeValue,a)),e||Vi(i)}else e=jo(e).createTextNode(l),e[Me]=i,i.stateNode=e}return Kt(i),null;case 13:if(l=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=xa(i),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(s(318));if(d=i.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[Me]=i}else Ra(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Kt(i),d=!1}else d=nf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return i.flags&256?(Qn(i),i):(Qn(i),null)}if(Qn(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=i.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool);var m=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),Mo(i,i.updateQueue),Kt(i),null;case 4:return de(),e===null&&Du(i.stateNode.containerInfo),Kt(i),null;case 10:return $n(i.type),Kt(i),null;case 19:if(W(me),d=i.memoizedState,d===null)return Kt(i),null;if(l=(i.flags&128)!==0,m=d.rendering,m===null)if(l)Ga(d,!1);else{if(Zt!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(m=wo(e),m!==null){for(i.flags|=128,Ga(d,!1),e=m.updateQueue,i.updateQueue=e,Mo(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Zd(a,e),a=a.sibling;return Q(me,me.current&1|2),i.child}e=e.sibling}d.tail!==null&&pe()>Lo&&(i.flags|=128,l=!0,Ga(d,!1),i.lanes=4194304)}else{if(!l)if(e=wo(m),e!==null){if(i.flags|=128,l=!0,e=e.updateQueue,i.updateQueue=e,Mo(i,e),Ga(d,!0),d.tail===null&&d.tailMode==="hidden"&&!m.alternate&&!Nt)return Kt(i),null}else 2*pe()-d.renderingStartTime>Lo&&a!==536870912&&(i.flags|=128,l=!0,Ga(d,!1),i.lanes=4194304);d.isBackwards?(m.sibling=i.child,i.child=m):(e=d.last,e!==null?e.sibling=m:i.child=m,d.last=m)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=pe(),i.sibling=null,e=me.current,Q(me,l?e&1|2:e&1),i):(Kt(i),null);case 22:case 23:return Qn(i),Lc(),l=i.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(Kt(i),i.subtreeFlags&6&&(i.flags|=8192)):Kt(i),a=i.updateQueue,a!==null&&Mo(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),e!==null&&W($i),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),$n(ge),Kt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function O0(e,i){switch(bc(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return $n(ge),de(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return He(i),null;case 13:if(Qn(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Ra()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return W(me),null;case 4:return de(),null;case 10:return $n(i.type),null;case 22:case 23:return Qn(i),Lc(),e!==null&&W($i),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return $n(ge),null;case 25:return null;default:return null}}function xp(e,i){switch(bc(i),i.tag){case 3:$n(ge),de();break;case 26:case 27:case 5:He(i);break;case 4:de();break;case 13:Qn(i);break;case 19:W(me);break;case 10:$n(i.type);break;case 22:case 23:Qn(i),Lc(),e!==null&&W($i);break;case 24:$n(ge)}}function qa(e,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&e)===e){l=void 0;var m=a.create,v=a.inst;l=m(),v.destroy=l}a=a.next}while(a!==d)}}catch(_){jt(i,i.return,_)}}function bi(e,i,a){try{var l=i.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var m=d.next;l=m;do{if((l.tag&e)===e){var v=l.inst,_=v.destroy;if(_!==void 0){v.destroy=void 0,d=i;var x=a,B=_;try{B()}catch(q){jt(d,x,q)}}}l=l.next}while(l!==m)}}catch(q){jt(i,i.return,q)}}function Rp(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{pf(i,a)}catch(l){jt(e,e.return,l)}}}function Cp(e,i,a){a.props=Qi(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){jt(e,i,l)}}function Va(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(d){jt(e,i,d)}}function Mn(e,i){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){jt(e,i,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){jt(e,i,d)}else a.current=null}function Mp(e){var i=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){jt(e,e.return,d)}}function ru(e,i,a){try{var l=e.stateNode;Z0(l,e.type,a,i),l[Fe]=i}catch(d){jt(e,e.return,d)}}function Dp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&xi(e.type)||e.tag===4}function ou(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Dp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&xi(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lu(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Io));else if(l!==4&&(l===27&&xi(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(lu(e,i,a),e=e.sibling;e!==null;)lu(e,i,a),e=e.sibling}function Do(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(l!==4&&(l===27&&xi(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Do(e,i,a),e=e.sibling;e!==null;)Do(e,i,a),e=e.sibling}function Op(e){var i=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,d=i.attributes;d.length;)i.removeAttributeNode(d[0]);Re(i,l,a),i[Me]=e,i[Fe]=a}catch(m){jt(e,e.return,m)}}var Jn=!1,te=!1,cu=!1,Lp=typeof WeakSet=="function"?WeakSet:Set,Se=null;function L0(e,i){if(e=e.containerInfo,Nu=$o,e=jd(e),oc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break t}var v=0,_=-1,x=-1,B=0,q=0,$=e,F=null;e:for(;;){for(var I;$!==a||d!==0&&$.nodeType!==3||(_=v+d),$!==m||l!==0&&$.nodeType!==3||(x=v+l),$.nodeType===3&&(v+=$.nodeValue.length),(I=$.firstChild)!==null;)F=$,$=I;for(;;){if($===e)break e;if(F===a&&++B===d&&(_=v),F===m&&++q===l&&(x=v),(I=$.nextSibling)!==null)break;$=F,F=$.parentNode}$=I}a=_===-1||x===-1?null:{start:_,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(ku={focusedElem:e,selectionRange:a},$o=!1,Se=i;Se!==null;)if(i=Se,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,Se=e;else for(;Se!==null;){switch(i=Se,m=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,a=i,d=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var gt=Qi(a.type,d,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(gt,m),l.__reactInternalSnapshotBeforeUpdate=e}catch(ht){jt(a,a.return,ht)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)zu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":zu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Se=e;break}Se=i.return}}function Np(e,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:vi(e,a),l&4&&qa(5,a);break;case 1:if(vi(e,a),l&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(v){jt(a,a.return,v)}else{var d=Qi(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(d,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){jt(a,a.return,v)}}l&64&&Rp(a),l&512&&Va(a,a.return);break;case 3:if(vi(e,a),l&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{pf(e,i)}catch(v){jt(a,a.return,v)}}break;case 27:i===null&&l&4&&Op(a);case 26:case 5:vi(e,a),i===null&&l&4&&Mp(a),l&512&&Va(a,a.return);break;case 12:vi(e,a);break;case 13:vi(e,a),l&4&&Bp(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=I0.bind(null,a),av(e,a))));break;case 22:if(l=a.memoizedState!==null||Jn,!l){i=i!==null&&i.memoizedState!==null||te,d=Jn;var m=te;Jn=l,(te=i)&&!m?Ai(e,a,(a.subtreeFlags&8772)!==0):vi(e,a),Jn=d,te=m}break;case 30:break;default:vi(e,a)}}function kp(e){var i=e.alternate;i!==null&&(e.alternate=null,kp(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&jl(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Vt=null,Ge=!1;function ti(e,i,a){for(a=a.child;a!==null;)Pp(e,i,a),a=a.sibling}function Pp(e,i,a){if(oe&&typeof oe.onCommitFiberUnmount=="function")try{oe.onCommitFiberUnmount(Pi,a)}catch{}switch(a.tag){case 26:te||Mn(a,i),ti(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:te||Mn(a,i);var l=Vt,d=Ge;xi(a.type)&&(Vt=a.stateNode,Ge=!1),ti(e,i,a),tr(a.stateNode),Vt=l,Ge=d;break;case 5:te||Mn(a,i);case 6:if(l=Vt,d=Ge,Vt=null,ti(e,i,a),Vt=l,Ge=d,Vt!==null)if(Ge)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(a.stateNode)}catch(m){jt(a,i,m)}else try{Vt.removeChild(a.stateNode)}catch(m){jt(a,i,m)}break;case 18:Vt!==null&&(Ge?(e=Vt,_g(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),lr(e)):_g(Vt,a.stateNode));break;case 4:l=Vt,d=Ge,Vt=a.stateNode.containerInfo,Ge=!0,ti(e,i,a),Vt=l,Ge=d;break;case 0:case 11:case 14:case 15:te||bi(2,a,i),te||bi(4,a,i),ti(e,i,a);break;case 1:te||(Mn(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Cp(a,i,l)),ti(e,i,a);break;case 21:ti(e,i,a);break;case 22:te=(l=te)||a.memoizedState!==null,ti(e,i,a),te=l;break;default:ti(e,i,a)}}function Bp(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{lr(e)}catch(a){jt(i,i.return,a)}}function N0(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Lp),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Lp),i;default:throw Error(s(435,e.tag))}}function uu(e,i){var a=N0(e);i.forEach(function(l){var d=j0.bind(null,e,l);a.has(l)||(a.add(l),l.then(d,d))})}function tn(e,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],m=e,v=i,_=v;t:for(;_!==null;){switch(_.tag){case 27:if(xi(_.type)){Vt=_.stateNode,Ge=!1;break t}break;case 5:Vt=_.stateNode,Ge=!1;break t;case 3:case 4:Vt=_.stateNode.containerInfo,Ge=!0;break t}_=_.return}if(Vt===null)throw Error(s(160));Pp(m,v,d),Vt=null,Ge=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)zp(i,e),i=i.sibling}var En=null;function zp(e,i){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:tn(i,e),en(e),l&4&&(bi(3,e,e.return),qa(3,e),bi(5,e,e.return));break;case 1:tn(i,e),en(e),l&512&&(te||a===null||Mn(a,a.return)),l&64&&Jn&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=En;if(tn(i,e),en(e),l&512&&(te||a===null||Mn(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,d=d.ownerDocument||d;e:switch(l){case"title":m=d.getElementsByTagName("title")[0],(!m||m[ga]||m[Me]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(l),d.head.insertBefore(m,d.querySelector("head > title"))),Re(m,l,a),m[Me]=e,ve(m),l=m;break t;case"link":var v=Og("link","href",d).get(l+(a.href||""));if(v){for(var _=0;_<v.length;_++)if(m=v[_],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(_,1);break e}}m=d.createElement(l),Re(m,l,a),d.head.appendChild(m);break;case"meta":if(v=Og("meta","content",d).get(l+(a.content||""))){for(_=0;_<v.length;_++)if(m=v[_],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(_,1);break e}}m=d.createElement(l),Re(m,l,a),d.head.appendChild(m);break;default:throw Error(s(468,l))}m[Me]=e,ve(m),l=m}e.stateNode=l}else Lg(d,e.type,e.stateNode);else e.stateNode=Dg(d,l,e.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?Lg(d,e.type,e.stateNode):Dg(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&ru(e,e.memoizedProps,a.memoizedProps)}break;case 27:tn(i,e),en(e),l&512&&(te||a===null||Mn(a,a.return)),a!==null&&l&4&&ru(e,e.memoizedProps,a.memoizedProps);break;case 5:if(tn(i,e),en(e),l&512&&(te||a===null||Mn(a,a.return)),e.flags&32){d=e.stateNode;try{Ss(d,"")}catch(I){jt(e,e.return,I)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,ru(e,d,a!==null?a.memoizedProps:d)),l&1024&&(cu=!0);break;case 6:if(tn(i,e),en(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(I){jt(e,e.return,I)}}break;case 3:if(Vo=null,d=En,En=Go(i.containerInfo),tn(i,e),En=d,en(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{lr(i.containerInfo)}catch(I){jt(e,e.return,I)}cu&&(cu=!1,Up(e));break;case 4:l=En,En=Go(e.stateNode.containerInfo),tn(i,e),en(e),En=l;break;case 12:tn(i,e),en(e);break;case 13:tn(i,e),en(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(mu=pe()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,uu(e,l)));break;case 22:d=e.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,B=Jn,q=te;if(Jn=B||d,te=q||x,tn(i,e),te=q,Jn=B,en(e),l&8192)t:for(i=e.stateNode,i._visibility=d?i._visibility&-2:i._visibility|1,d&&(a===null||x||Jn||te||Wi(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){x=a=i;try{if(m=x.stateNode,d)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{_=x.stateNode;var $=x.memoizedProps.style,F=$!=null&&$.hasOwnProperty("display")?$.display:null;_.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(I){jt(x,x.return,I)}}}else if(i.tag===6){if(a===null){x=i;try{x.stateNode.nodeValue=d?"":x.memoizedProps}catch(I){jt(x,x.return,I)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,uu(e,a))));break;case 19:tn(i,e),en(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,uu(e,l)));break;case 30:break;case 21:break;default:tn(i,e),en(e)}}function en(e){var i=e.flags;if(i&2){try{for(var a,l=e.return;l!==null;){if(Dp(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var d=a.stateNode,m=ou(e);Do(e,m,d);break;case 5:var v=a.stateNode;a.flags&32&&(Ss(v,""),a.flags&=-33);var _=ou(e);Do(e,_,v);break;case 3:case 4:var x=a.stateNode.containerInfo,B=ou(e);lu(e,B,x);break;default:throw Error(s(161))}}catch(q){jt(e,e.return,q)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Up(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Up(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function vi(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Np(e,i.alternate,i),i=i.sibling}function Wi(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:bi(4,i,i.return),Wi(i);break;case 1:Mn(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Cp(i,i.return,a),Wi(i);break;case 27:tr(i.stateNode);case 26:case 5:Mn(i,i.return),Wi(i);break;case 22:i.memoizedState===null&&Wi(i);break;case 30:Wi(i);break;default:Wi(i)}e=e.sibling}}function Ai(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,d=e,m=i,v=m.flags;switch(m.tag){case 0:case 11:case 15:Ai(d,m,a),qa(4,m);break;case 1:if(Ai(d,m,a),l=m,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(B){jt(l,l.return,B)}if(l=m,d=l.updateQueue,d!==null){var _=l.stateNode;try{var x=d.shared.hiddenCallbacks;if(x!==null)for(d.shared.hiddenCallbacks=null,d=0;d<x.length;d++)ff(x[d],_)}catch(B){jt(l,l.return,B)}}a&&v&64&&Rp(m),Va(m,m.return);break;case 27:Op(m);case 26:case 5:Ai(d,m,a),a&&l===null&&v&4&&Mp(m),Va(m,m.return);break;case 12:Ai(d,m,a);break;case 13:Ai(d,m,a),a&&v&4&&Bp(d,m);break;case 22:m.memoizedState===null&&Ai(d,m,a),Va(m,m.return);break;case 30:break;default:Ai(d,m,a)}i=i.sibling}}function hu(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Da(a))}function du(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Da(e))}function Dn(e,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Hp(e,i,a,l),i=i.sibling}function Hp(e,i,a,l){var d=i.flags;switch(i.tag){case 0:case 11:case 15:Dn(e,i,a,l),d&2048&&qa(9,i);break;case 1:Dn(e,i,a,l);break;case 3:Dn(e,i,a,l),d&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Da(e)));break;case 12:if(d&2048){Dn(e,i,a,l),e=i.stateNode;try{var m=i.memoizedProps,v=m.id,_=m.onPostCommit;typeof _=="function"&&_(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(x){jt(i,i.return,x)}}else Dn(e,i,a,l);break;case 13:Dn(e,i,a,l);break;case 23:break;case 22:m=i.stateNode,v=i.alternate,i.memoizedState!==null?m._visibility&2?Dn(e,i,a,l):Xa(e,i):m._visibility&2?Dn(e,i,a,l):(m._visibility|=2,Fs(e,i,a,l,(i.subtreeFlags&10256)!==0)),d&2048&&hu(v,i);break;case 24:Dn(e,i,a,l),d&2048&&du(i.alternate,i);break;default:Dn(e,i,a,l)}}function Fs(e,i,a,l,d){for(d=d&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=e,v=i,_=a,x=l,B=v.flags;switch(v.tag){case 0:case 11:case 15:Fs(m,v,_,x,d),qa(8,v);break;case 23:break;case 22:var q=v.stateNode;v.memoizedState!==null?q._visibility&2?Fs(m,v,_,x,d):Xa(m,v):(q._visibility|=2,Fs(m,v,_,x,d)),d&&B&2048&&hu(v.alternate,v);break;case 24:Fs(m,v,_,x,d),d&&B&2048&&du(v.alternate,v);break;default:Fs(m,v,_,x,d)}i=i.sibling}}function Xa(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,l=i,d=l.flags;switch(l.tag){case 22:Xa(a,l),d&2048&&hu(l.alternate,l);break;case 24:Xa(a,l),d&2048&&du(l.alternate,l);break;default:Xa(a,l)}i=i.sibling}}var Ya=8192;function Is(e){if(e.subtreeFlags&Ya)for(e=e.child;e!==null;)Fp(e),e=e.sibling}function Fp(e){switch(e.tag){case 26:Is(e),e.flags&Ya&&e.memoizedState!==null&&bv(En,e.memoizedState,e.memoizedProps);break;case 5:Is(e);break;case 3:case 4:var i=En;En=Go(e.stateNode.containerInfo),Is(e),En=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=Ya,Ya=16777216,Is(e),Ya=i):Is(e));break;default:Is(e)}}function Ip(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function $a(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Se=l,Gp(l,e)}Ip(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)jp(e),e=e.sibling}function jp(e){switch(e.tag){case 0:case 11:case 15:$a(e),e.flags&2048&&bi(9,e,e.return);break;case 3:$a(e);break;case 12:$a(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Oo(e)):$a(e);break;default:$a(e)}}function Oo(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Se=l,Gp(l,e)}Ip(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:bi(8,i,i.return),Oo(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Oo(i));break;default:Oo(i)}e=e.sibling}}function Gp(e,i){for(;Se!==null;){var a=Se;switch(a.tag){case 0:case 11:case 15:bi(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Da(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Se=l;else t:for(a=e;Se!==null;){l=Se;var d=l.sibling,m=l.return;if(kp(l),l===a){Se=null;break t}if(d!==null){d.return=m,Se=d;break t}Se=m}}}var k0={getCacheForType:function(e){var i=De(ge),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},P0=typeof WeakMap=="function"?WeakMap:Map,Pt=0,qt=null,xt=null,Ot=0,Bt=0,nn=null,Si=!1,js=!1,fu=!1,ei=0,Zt=0,Ei=0,Zi=0,pu=0,mn=0,Gs=0,Ka=null,qe=null,gu=!1,mu=0,Lo=1/0,No=null,_i=null,xe=0,wi=null,qs=null,Vs=0,yu=0,bu=null,qp=null,Qa=0,vu=null;function sn(){if((Pt&2)!==0&&Ot!==0)return Ot&-Ot;if(D.T!==null){var e=Ls;return e!==0?e:xu()}return ad()}function Vp(){mn===0&&(mn=(Ot&536870912)===0||Nt?ed():536870912);var e=gn.current;return e!==null&&(e.flags|=32),mn}function an(e,i,a){(e===qt&&(Bt===2||Bt===9)||e.cancelPendingCommit!==null)&&(Xs(e,0),Ti(e,Ot,mn,!1)),pa(e,a),((Pt&2)===0||e!==qt)&&(e===qt&&((Pt&2)===0&&(Zi|=a),Zt===4&&Ti(e,Ot,mn,!1)),On(e))}function Xp(e,i,a){if((Pt&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&e.expiredLanes)===0||fa(e,i),d=l?U0(e,i):Eu(e,i,!0),m=l;do{if(d===0){js&&!l&&Ti(e,i,0,!1);break}else{if(a=e.current.alternate,m&&!B0(a)){d=Eu(e,i,!1),m=!1;continue}if(d===2){if(m=i,e.errorRecoveryDisabledLanes&m)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var _=e;d=Ka;var x=_.current.memoizedState.isDehydrated;if(x&&(Xs(_,v).flags|=256),v=Eu(_,v,!1),v!==2){if(fu&&!x){_.errorRecoveryDisabledLanes|=m,Zi|=m,d=4;break t}m=qe,qe=d,m!==null&&(qe===null?qe=m:qe.push.apply(qe,m))}d=v}if(m=!1,d!==2)continue}}if(d===1){Xs(e,0),Ti(e,i,0,!0);break}t:{switch(l=e,m=d,m){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Ti(l,i,mn,!Si);break t;case 2:qe=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(d=mu+300-pe(),10<d)){if(Ti(l,i,mn,!Si),Gr(l,0,!0)!==0)break t;l.timeoutHandle=Sg(Yp.bind(null,l,a,qe,No,gu,i,mn,Zi,Gs,Si,m,2,-0,0),d);break t}Yp(l,a,qe,No,gu,i,mn,Zi,Gs,Si,m,0,-0,0)}}break}while(!0);On(e)}function Yp(e,i,a,l,d,m,v,_,x,B,q,$,F,I){if(e.timeoutHandle=-1,$=i.subtreeFlags,($&8192||($&16785408)===16785408)&&(ir={stylesheets:null,count:0,unsuspend:yv},Fp(i),$=vv(),$!==null)){e.cancelPendingCommit=$(tg.bind(null,e,i,m,a,l,d,v,_,x,q,1,F,I)),Ti(e,m,v,!B);return}tg(e,i,m,a,l,d,v,_,x)}function B0(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],m=d.getSnapshot;d=d.value;try{if(!Ze(m(),d))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ti(e,i,a,l){i&=~pu,i&=~Zi,e.suspendedLanes|=i,e.pingedLanes&=~i,l&&(e.warmLanes|=i),l=e.expirationTimes;for(var d=i;0<d;){var m=31-be(d),v=1<<m;l[m]=-1,d&=~v}a!==0&&id(e,a,i)}function ko(){return(Pt&6)===0?(Wa(0),!1):!0}function Au(){if(xt!==null){if(Bt===0)var e=xt.return;else e=xt,Yn=Xi=null,zc(e),Us=null,Ia=0,e=xt;for(;e!==null;)xp(e.alternate,e),e=e.return;xt=null}}function Xs(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,tv(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Au(),qt=e,xt=a=qn(e.current,null),Ot=i,Bt=0,nn=null,Si=!1,js=fa(e,i),fu=!1,Gs=mn=pu=Zi=Ei=Zt=0,qe=Ka=null,gu=!1,(i&8)!==0&&(i|=i&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=i;0<l;){var d=31-be(l),m=1<<d;i|=e[d],l&=~m}return ei=i,eo(),a}function $p(e,i){wt=null,D.H=So,i===La||i===uo?(i=hf(),Bt=3):i===lf?(i=hf(),Bt=4):Bt=i===dp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,nn=i,xt===null&&(Zt=1,xo(e,hn(i,e.current)))}function Kp(){var e=D.H;return D.H=So,e===null?So:e}function Qp(){var e=D.A;return D.A=k0,e}function Su(){Zt=4,Si||(Ot&4194048)!==Ot&&gn.current!==null||(js=!0),(Ei&134217727)===0&&(Zi&134217727)===0||qt===null||Ti(qt,Ot,mn,!1)}function Eu(e,i,a){var l=Pt;Pt|=2;var d=Kp(),m=Qp();(qt!==e||Ot!==i)&&(No=null,Xs(e,i)),i=!1;var v=Zt;t:do try{if(Bt!==0&&xt!==null){var _=xt,x=nn;switch(Bt){case 8:Au(),v=6;break t;case 3:case 2:case 9:case 6:gn.current===null&&(i=!0);var B=Bt;if(Bt=0,nn=null,Ys(e,_,x,B),a&&js){v=0;break t}break;default:B=Bt,Bt=0,nn=null,Ys(e,_,x,B)}}z0(),v=Zt;break}catch(q){$p(e,q)}while(!0);return i&&e.shellSuspendCounter++,Yn=Xi=null,Pt=l,D.H=d,D.A=m,xt===null&&(qt=null,Ot=0,eo()),v}function z0(){for(;xt!==null;)Wp(xt)}function U0(e,i){var a=Pt;Pt|=2;var l=Kp(),d=Qp();qt!==e||Ot!==i?(No=null,Lo=pe()+500,Xs(e,i)):js=fa(e,i);t:do try{if(Bt!==0&&xt!==null){i=xt;var m=nn;e:switch(Bt){case 1:Bt=0,nn=null,Ys(e,i,m,1);break;case 2:case 9:if(cf(m)){Bt=0,nn=null,Zp(i);break}i=function(){Bt!==2&&Bt!==9||qt!==e||(Bt=7),On(e)},m.then(i,i);break t;case 3:Bt=7;break t;case 4:Bt=5;break t;case 7:cf(m)?(Bt=0,nn=null,Zp(i)):(Bt=0,nn=null,Ys(e,i,m,7));break;case 5:var v=null;switch(xt.tag){case 26:v=xt.memoizedState;case 5:case 27:var _=xt;if(!v||Ng(v)){Bt=0,nn=null;var x=_.sibling;if(x!==null)xt=x;else{var B=_.return;B!==null?(xt=B,Po(B)):xt=null}break e}}Bt=0,nn=null,Ys(e,i,m,5);break;case 6:Bt=0,nn=null,Ys(e,i,m,6);break;case 8:Au(),Zt=6;break t;default:throw Error(s(462))}}H0();break}catch(q){$p(e,q)}while(!0);return Yn=Xi=null,D.H=l,D.A=d,Pt=a,xt!==null?0:(qt=null,Ot=0,eo(),Zt)}function H0(){for(;xt!==null&&!re();)Wp(xt)}function Wp(e){var i=wp(e.alternate,e,ei);e.memoizedProps=e.pendingProps,i===null?Po(e):xt=i}function Zp(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=bp(a,i,i.pendingProps,i.type,void 0,Ot);break;case 11:i=bp(a,i,i.pendingProps,i.type.render,i.ref,Ot);break;case 5:zc(i);default:xp(a,i),i=xt=Zd(i,ei),i=wp(a,i,ei)}e.memoizedProps=e.pendingProps,i===null?Po(e):xt=i}function Ys(e,i,a,l){Yn=Xi=null,zc(i),Us=null,Ia=0;var d=i.return;try{if(C0(e,d,i,a,Ot)){Zt=1,xo(e,hn(a,e.current)),xt=null;return}}catch(m){if(d!==null)throw xt=d,m;Zt=1,xo(e,hn(a,e.current)),xt=null;return}i.flags&32768?(Nt||l===1?e=!0:js||(Ot&536870912)!==0?e=!1:(Si=e=!0,(l===2||l===9||l===3||l===6)&&(l=gn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Jp(i,e)):Po(i)}function Po(e){var i=e;do{if((i.flags&32768)!==0){Jp(i,Si);return}e=i.return;var a=D0(i.alternate,i,ei);if(a!==null){xt=a;return}if(i=i.sibling,i!==null){xt=i;return}xt=i=e}while(i!==null);Zt===0&&(Zt=5)}function Jp(e,i){do{var a=O0(e.alternate,e);if(a!==null){a.flags&=32767,xt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){xt=e;return}xt=e=a}while(e!==null);Zt=6,xt=null}function tg(e,i,a,l,d,m,v,_,x){e.cancelPendingCommit=null;do Bo();while(xe!==0);if((Pt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(m=i.lanes|i.childLanes,m|=dc,yb(e,a,m,v,_,x),e===qt&&(xt=qt=null,Ot=0),qs=i,wi=e,Vs=a,yu=m,bu=d,qp=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,G0(In,function(){return ag(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=D.T,D.T=null,d=H.p,H.p=2,v=Pt,Pt|=4;try{L0(e,i,a)}finally{Pt=v,H.p=d,D.T=l}}xe=1,eg(),ng(),ig()}}function eg(){if(xe===1){xe=0;var e=wi,i=qs,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=D.T,D.T=null;var l=H.p;H.p=2;var d=Pt;Pt|=4;try{zp(i,e);var m=ku,v=jd(e.containerInfo),_=m.focusedElem,x=m.selectionRange;if(v!==_&&_&&_.ownerDocument&&Id(_.ownerDocument.documentElement,_)){if(x!==null&&oc(_)){var B=x.start,q=x.end;if(q===void 0&&(q=B),"selectionStart"in _)_.selectionStart=B,_.selectionEnd=Math.min(q,_.value.length);else{var $=_.ownerDocument||document,F=$&&$.defaultView||window;if(F.getSelection){var I=F.getSelection(),gt=_.textContent.length,ht=Math.min(x.start,gt),Ft=x.end===void 0?ht:Math.min(x.end,gt);!I.extend&&ht>Ft&&(v=Ft,Ft=ht,ht=v);var k=Fd(_,ht),O=Fd(_,Ft);if(k&&O&&(I.rangeCount!==1||I.anchorNode!==k.node||I.anchorOffset!==k.offset||I.focusNode!==O.node||I.focusOffset!==O.offset)){var P=$.createRange();P.setStart(k.node,k.offset),I.removeAllRanges(),ht>Ft?(I.addRange(P),I.extend(O.node,O.offset)):(P.setEnd(O.node,O.offset),I.addRange(P))}}}}for($=[],I=_;I=I.parentNode;)I.nodeType===1&&$.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<$.length;_++){var Y=$[_];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}$o=!!Nu,ku=Nu=null}finally{Pt=d,H.p=l,D.T=a}}e.current=i,xe=2}}function ng(){if(xe===2){xe=0;var e=wi,i=qs,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=D.T,D.T=null;var l=H.p;H.p=2;var d=Pt;Pt|=4;try{Np(e,i.alternate,i)}finally{Pt=d,H.p=l,D.T=a}}xe=3}}function ig(){if(xe===4||xe===3){xe=0,$t();var e=wi,i=qs,a=Vs,l=qp;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?xe=5:(xe=0,qs=wi=null,sg(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(_i=null),Fl(a),i=i.stateNode,oe&&typeof oe.onCommitFiberRoot=="function")try{oe.onCommitFiberRoot(Pi,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=D.T,d=H.p,H.p=2,D.T=null;try{for(var m=e.onRecoverableError,v=0;v<l.length;v++){var _=l[v];m(_.value,{componentStack:_.stack})}}finally{D.T=i,H.p=d}}(Vs&3)!==0&&Bo(),On(e),d=e.pendingLanes,(a&4194090)!==0&&(d&42)!==0?e===vu?Qa++:(Qa=0,vu=e):Qa=0,Wa(0)}}function sg(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Da(i)))}function Bo(e){return eg(),ng(),ig(),ag()}function ag(){if(xe!==5)return!1;var e=wi,i=yu;yu=0;var a=Fl(Vs),l=D.T,d=H.p;try{H.p=32>a?32:a,D.T=null,a=bu,bu=null;var m=wi,v=Vs;if(xe=0,qs=wi=null,Vs=0,(Pt&6)!==0)throw Error(s(331));var _=Pt;if(Pt|=4,jp(m.current),Hp(m,m.current,v,a),Pt=_,Wa(0,!1),oe&&typeof oe.onPostCommitFiberRoot=="function")try{oe.onPostCommitFiberRoot(Pi,m)}catch{}return!0}finally{H.p=d,D.T=l,sg(e,i)}}function rg(e,i,a){i=hn(a,i),i=Wc(e.stateNode,i,2),e=pi(e,i,2),e!==null&&(pa(e,2),On(e))}function jt(e,i,a){if(e.tag===3)rg(e,e,a);else for(;i!==null;){if(i.tag===3){rg(i,e,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(_i===null||!_i.has(l))){e=hn(a,e),a=up(2),l=pi(i,a,2),l!==null&&(hp(a,l,i,e),pa(l,2),On(l));break}}i=i.return}}function _u(e,i,a){var l=e.pingCache;if(l===null){l=e.pingCache=new P0;var d=new Set;l.set(i,d)}else d=l.get(i),d===void 0&&(d=new Set,l.set(i,d));d.has(a)||(fu=!0,d.add(a),e=F0.bind(null,e,i,a),i.then(e,e))}function F0(e,i,a){var l=e.pingCache;l!==null&&l.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,qt===e&&(Ot&a)===a&&(Zt===4||Zt===3&&(Ot&62914560)===Ot&&300>pe()-mu?(Pt&2)===0&&Xs(e,0):pu|=a,Gs===Ot&&(Gs=0)),On(e)}function og(e,i){i===0&&(i=nd()),e=Cs(e,i),e!==null&&(pa(e,i),On(e))}function I0(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),og(e,a)}function j0(e,i){var a=0;switch(e.tag){case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),og(e,a)}function G0(e,i){return fe(e,i)}var zo=null,$s=null,wu=!1,Uo=!1,Tu=!1,Ji=0;function On(e){e!==$s&&e.next===null&&($s===null?zo=$s=e:$s=$s.next=e),Uo=!0,wu||(wu=!0,V0())}function Wa(e,i){if(!Tu&&Uo){Tu=!0;do for(var a=!1,l=zo;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var m=0;else{var v=l.suspendedLanes,_=l.pingedLanes;m=(1<<31-be(42|e)+1)-1,m&=d&~(v&~_),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,hg(l,m))}else m=Ot,m=Gr(l,l===qt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||fa(l,m)||(a=!0,hg(l,m));l=l.next}while(a);Tu=!1}}function q0(){lg()}function lg(){Uo=wu=!1;var e=0;Ji!==0&&(J0()&&(e=Ji),Ji=0);for(var i=pe(),a=null,l=zo;l!==null;){var d=l.next,m=cg(l,i);m===0?(l.next=null,a===null?zo=d:a.next=d,d===null&&($s=a)):(a=l,(e!==0||(m&3)!==0)&&(Uo=!0)),l=d}Wa(e)}function cg(e,i){for(var a=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var v=31-be(m),_=1<<v,x=d[v];x===-1?((_&a)===0||(_&l)!==0)&&(d[v]=mb(_,i)):x<=i&&(e.expiredLanes|=_),m&=~_}if(i=qt,a=Ot,a=Gr(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===i&&(Bt===2||Bt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&kt(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||fa(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(l!==null&&kt(l),Fl(a)){case 2:case 8:a=Hr;break;case 32:a=In;break;case 268435456:a=Fr;break;default:a=In}return l=ug.bind(null,e),a=fe(a,l),e.callbackPriority=i,e.callbackNode=a,i}return l!==null&&l!==null&&kt(l),e.callbackPriority=2,e.callbackNode=null,2}function ug(e,i){if(xe!==0&&xe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Bo()&&e.callbackNode!==a)return null;var l=Ot;return l=Gr(e,e===qt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Xp(e,l,i),cg(e,pe()),e.callbackNode!=null&&e.callbackNode===a?ug.bind(null,e):null)}function hg(e,i){if(Bo())return null;Xp(e,i,!0)}function V0(){ev(function(){(Pt&6)!==0?fe(li,q0):lg()})}function xu(){return Ji===0&&(Ji=ed()),Ji}function dg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:$r(""+e)}function fg(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function X0(e,i,a,l,d){if(i==="submit"&&a&&a.stateNode===d){var m=dg((d[Fe]||null).action),v=l.submitter;v&&(i=(i=v[Fe]||null)?dg(i.formAction):v.getAttribute("formAction"),i!==null&&(m=i,v=null));var _=new Zr("action","action",null,l,d);e.push({event:_,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ji!==0){var x=v?fg(d,v):new FormData(d);Xc(a,{pending:!0,data:x,method:d.method,action:m},null,x)}}else typeof m=="function"&&(_.preventDefault(),x=v?fg(d,v):new FormData(d),Xc(a,{pending:!0,data:x,method:d.method,action:m},m,x))},currentTarget:d}]})}}for(var Ru=0;Ru<hc.length;Ru++){var Cu=hc[Ru],Y0=Cu.toLowerCase(),$0=Cu[0].toUpperCase()+Cu.slice(1);Sn(Y0,"on"+$0)}Sn(Vd,"onAnimationEnd"),Sn(Xd,"onAnimationIteration"),Sn(Yd,"onAnimationStart"),Sn("dblclick","onDoubleClick"),Sn("focusin","onFocus"),Sn("focusout","onBlur"),Sn(h0,"onTransitionRun"),Sn(d0,"onTransitionStart"),Sn(f0,"onTransitionCancel"),Sn($d,"onTransitionEnd"),bs("onMouseEnter",["mouseout","mouseover"]),bs("onMouseLeave",["mouseout","mouseover"]),bs("onPointerEnter",["pointerout","pointerover"]),bs("onPointerLeave",["pointerout","pointerover"]),zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zi("onBeforeInput",["compositionend","keypress","textInput","paste"]),zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),K0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Za));function pg(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],d=l.event;l=l.listeners;t:{var m=void 0;if(i)for(var v=l.length-1;0<=v;v--){var _=l[v],x=_.instance,B=_.currentTarget;if(_=_.listener,x!==m&&d.isPropagationStopped())break t;m=_,d.currentTarget=B;try{m(d)}catch(q){To(q)}d.currentTarget=null,m=x}else for(v=0;v<l.length;v++){if(_=l[v],x=_.instance,B=_.currentTarget,_=_.listener,x!==m&&d.isPropagationStopped())break t;m=_,d.currentTarget=B;try{m(d)}catch(q){To(q)}d.currentTarget=null,m=x}}}}function Rt(e,i){var a=i[Il];a===void 0&&(a=i[Il]=new Set);var l=e+"__bubble";a.has(l)||(gg(i,e,2,!1),a.add(l))}function Mu(e,i,a){var l=0;i&&(l|=4),gg(a,e,l,i)}var Ho="_reactListening"+Math.random().toString(36).slice(2);function Du(e){if(!e[Ho]){e[Ho]=!0,od.forEach(function(a){a!=="selectionchange"&&(K0.has(a)||Mu(a,!1,e),Mu(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Ho]||(i[Ho]=!0,Mu("selectionchange",!1,i))}}function gg(e,i,a,l){switch(Hg(i)){case 2:var d=Ev;break;case 8:d=_v;break;default:d=qu}a=d.bind(null,i,a,e),d=void 0,!Zl||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(i,a,{capture:!0,passive:d}):e.addEventListener(i,a,!0):d!==void 0?e.addEventListener(i,a,{passive:d}):e.addEventListener(i,a,!1)}function Ou(e,i,a,l,d){var m=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var _=l.stateNode.containerInfo;if(_===d)break;if(v===4)for(v=l.return;v!==null;){var x=v.tag;if((x===3||x===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;_!==null;){if(v=gs(_),v===null)return;if(x=v.tag,x===5||x===6||x===26||x===27){l=m=v;continue t}_=_.parentNode}}l=l.return}Sd(function(){var B=m,q=Ql(a),$=[];t:{var F=Kd.get(e);if(F!==void 0){var I=Zr,gt=e;switch(e){case"keypress":if(Qr(a)===0)break t;case"keydown":case"keyup":I=Gb;break;case"focusin":gt="focus",I=nc;break;case"focusout":gt="blur",I=nc;break;case"beforeblur":case"afterblur":I=nc;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=wd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=Ob;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=Xb;break;case Vd:case Xd:case Yd:I=kb;break;case $d:I=$b;break;case"scroll":case"scrollend":I=Mb;break;case"wheel":I=Qb;break;case"copy":case"cut":case"paste":I=Bb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=xd;break;case"toggle":case"beforetoggle":I=Zb}var ht=(i&4)!==0,Ft=!ht&&(e==="scroll"||e==="scrollend"),k=ht?F!==null?F+"Capture":null:F;ht=[];for(var O=B,P;O!==null;){var Y=O;if(P=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||P===null||k===null||(Y=ya(O,k),Y!=null&&ht.push(Ja(O,Y,P))),Ft)break;O=O.return}0<ht.length&&(F=new I(F,gt,null,a,q),$.push({event:F,listeners:ht}))}}if((i&7)===0){t:{if(F=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",F&&a!==Kl&&(gt=a.relatedTarget||a.fromElement)&&(gs(gt)||gt[ps]))break t;if((I||F)&&(F=q.window===q?q:(F=q.ownerDocument)?F.defaultView||F.parentWindow:window,I?(gt=a.relatedTarget||a.toElement,I=B,gt=gt?gs(gt):null,gt!==null&&(Ft=o(gt),ht=gt.tag,gt!==Ft||ht!==5&&ht!==27&&ht!==6)&&(gt=null)):(I=null,gt=B),I!==gt)){if(ht=wd,Y="onMouseLeave",k="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(ht=xd,Y="onPointerLeave",k="onPointerEnter",O="pointer"),Ft=I==null?F:ma(I),P=gt==null?F:ma(gt),F=new ht(Y,O+"leave",I,a,q),F.target=Ft,F.relatedTarget=P,Y=null,gs(q)===B&&(ht=new ht(k,O+"enter",gt,a,q),ht.target=P,ht.relatedTarget=Ft,Y=ht),Ft=Y,I&&gt)e:{for(ht=I,k=gt,O=0,P=ht;P;P=Ks(P))O++;for(P=0,Y=k;Y;Y=Ks(Y))P++;for(;0<O-P;)ht=Ks(ht),O--;for(;0<P-O;)k=Ks(k),P--;for(;O--;){if(ht===k||k!==null&&ht===k.alternate)break e;ht=Ks(ht),k=Ks(k)}ht=null}else ht=null;I!==null&&mg($,F,I,ht,!1),gt!==null&&Ft!==null&&mg($,Ft,gt,ht,!0)}}t:{if(F=B?ma(B):window,I=F.nodeName&&F.nodeName.toLowerCase(),I==="select"||I==="input"&&F.type==="file")var it=kd;else if(Ld(F))if(Pd)it=l0;else{it=r0;var Tt=a0}else I=F.nodeName,!I||I.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?B&&$l(B.elementType)&&(it=kd):it=o0;if(it&&(it=it(e,B))){Nd($,it,a,q);break t}Tt&&Tt(e,F,B),e==="focusout"&&B&&F.type==="number"&&B.memoizedProps.value!=null&&Yl(F,"number",F.value)}switch(Tt=B?ma(B):window,e){case"focusin":(Ld(Tt)||Tt.contentEditable==="true")&&(Ts=Tt,lc=B,Ta=null);break;case"focusout":Ta=lc=Ts=null;break;case"mousedown":cc=!0;break;case"contextmenu":case"mouseup":case"dragend":cc=!1,Gd($,a,q);break;case"selectionchange":if(u0)break;case"keydown":case"keyup":Gd($,a,q)}var ot;if(sc)t:{switch(e){case"compositionstart":var dt="onCompositionStart";break t;case"compositionend":dt="onCompositionEnd";break t;case"compositionupdate":dt="onCompositionUpdate";break t}dt=void 0}else ws?Dd(e,a)&&(dt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(dt="onCompositionStart");dt&&(Rd&&a.locale!=="ko"&&(ws||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&ws&&(ot=Ed()):(ui=q,Jl="value"in ui?ui.value:ui.textContent,ws=!0)),Tt=Fo(B,dt),0<Tt.length&&(dt=new Td(dt,e,null,a,q),$.push({event:dt,listeners:Tt}),ot?dt.data=ot:(ot=Od(a),ot!==null&&(dt.data=ot)))),(ot=t0?e0(e,a):n0(e,a))&&(dt=Fo(B,"onBeforeInput"),0<dt.length&&(Tt=new Td("onBeforeInput","beforeinput",null,a,q),$.push({event:Tt,listeners:dt}),Tt.data=ot)),X0($,e,B,a,q)}pg($,i)})}function Ja(e,i,a){return{instance:e,listener:i,currentTarget:a}}function Fo(e,i){for(var a=i+"Capture",l=[];e!==null;){var d=e,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=ya(e,a),d!=null&&l.unshift(Ja(e,d,m)),d=ya(e,i),d!=null&&l.push(Ja(e,d,m))),e.tag===3)return l;e=e.return}return[]}function Ks(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function mg(e,i,a,l,d){for(var m=i._reactName,v=[];a!==null&&a!==l;){var _=a,x=_.alternate,B=_.stateNode;if(_=_.tag,x!==null&&x===l)break;_!==5&&_!==26&&_!==27||B===null||(x=B,d?(B=ya(a,m),B!=null&&v.unshift(Ja(a,B,x))):d||(B=ya(a,m),B!=null&&v.push(Ja(a,B,x)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var Q0=/\r\n?/g,W0=/\u0000|\uFFFD/g;function yg(e){return(typeof e=="string"?e:""+e).replace(Q0,`
`).replace(W0,"")}function bg(e,i){return i=yg(i),yg(e)===i}function Io(){}function Ht(e,i,a,l,d,m){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Ss(e,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Ss(e,""+l);break;case"className":Vr(e,"class",l);break;case"tabIndex":Vr(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Vr(e,a,l);break;case"style":vd(e,l,m);break;case"data":if(i!=="object"){Vr(e,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=$r(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(i!=="input"&&Ht(e,i,"name",d.name,d,null),Ht(e,i,"formEncType",d.formEncType,d,null),Ht(e,i,"formMethod",d.formMethod,d,null),Ht(e,i,"formTarget",d.formTarget,d,null)):(Ht(e,i,"encType",d.encType,d,null),Ht(e,i,"method",d.method,d,null),Ht(e,i,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=$r(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Io);break;case"onScroll":l!=null&&Rt("scroll",e);break;case"onScrollEnd":l!=null&&Rt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=$r(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Rt("beforetoggle",e),Rt("toggle",e),qr(e,"popover",l);break;case"xlinkActuate":jn(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":jn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":jn(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":jn(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":jn(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":jn(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":jn(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":jn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":jn(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":qr(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Rb.get(a)||a,qr(e,a,l))}}function Lu(e,i,a,l,d,m){switch(a){case"style":vd(e,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof l=="string"?Ss(e,l):(typeof l=="number"||typeof l=="bigint")&&Ss(e,""+l);break;case"onScroll":l!=null&&Rt("scroll",e);break;case"onScrollEnd":l!=null&&Rt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Io);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ld.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),i=a.slice(2,d?a.length-7:void 0),m=e[Fe]||null,m=m!=null?m[a]:null,typeof m=="function"&&e.removeEventListener(i,m,d),typeof l=="function")){typeof m!="function"&&m!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,l,d);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):qr(e,a,l)}}}function Re(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rt("error",e),Rt("load",e);var l=!1,d=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ht(e,i,m,v,a,null)}}d&&Ht(e,i,"srcSet",a.srcSet,a,null),l&&Ht(e,i,"src",a.src,a,null);return;case"input":Rt("invalid",e);var _=m=v=d=null,x=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var q=a[l];if(q!=null)switch(l){case"name":d=q;break;case"type":v=q;break;case"checked":x=q;break;case"defaultChecked":B=q;break;case"value":m=q;break;case"defaultValue":_=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:Ht(e,i,l,q,a,null)}}gd(e,m,_,x,B,v,d,!1),Xr(e);return;case"select":Rt("invalid",e),l=v=m=null;for(d in a)if(a.hasOwnProperty(d)&&(_=a[d],_!=null))switch(d){case"value":m=_;break;case"defaultValue":v=_;break;case"multiple":l=_;default:Ht(e,i,d,_,a,null)}i=m,a=v,e.multiple=!!l,i!=null?As(e,!!l,i,!1):a!=null&&As(e,!!l,a,!0);return;case"textarea":Rt("invalid",e),m=d=l=null;for(v in a)if(a.hasOwnProperty(v)&&(_=a[v],_!=null))switch(v){case"value":l=_;break;case"defaultValue":d=_;break;case"children":m=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:Ht(e,i,v,_,a,null)}yd(e,l,d,m),Xr(e);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(l=a[x],l!=null))switch(x){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ht(e,i,x,l,a,null)}return;case"dialog":Rt("beforetoggle",e),Rt("toggle",e),Rt("cancel",e),Rt("close",e);break;case"iframe":case"object":Rt("load",e);break;case"video":case"audio":for(l=0;l<Za.length;l++)Rt(Za[l],e);break;case"image":Rt("error",e),Rt("load",e);break;case"details":Rt("toggle",e);break;case"embed":case"source":case"link":Rt("error",e),Rt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ht(e,i,B,l,a,null)}return;default:if($l(i)){for(q in a)a.hasOwnProperty(q)&&(l=a[q],l!==void 0&&Lu(e,i,q,l,a,void 0));return}}for(_ in a)a.hasOwnProperty(_)&&(l=a[_],l!=null&&Ht(e,i,_,l,a,null))}function Z0(e,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,v=null,_=null,x=null,B=null,q=null;for(I in a){var $=a[I];if(a.hasOwnProperty(I)&&$!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":x=$;default:l.hasOwnProperty(I)||Ht(e,i,I,null,l,$)}}for(var F in l){var I=l[F];if($=a[F],l.hasOwnProperty(F)&&(I!=null||$!=null))switch(F){case"type":m=I;break;case"name":d=I;break;case"checked":B=I;break;case"defaultChecked":q=I;break;case"value":v=I;break;case"defaultValue":_=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(137,i));break;default:I!==$&&Ht(e,i,F,I,l,$)}}Xl(e,v,_,x,B,q,m,d);return;case"select":I=v=_=F=null;for(m in a)if(x=a[m],a.hasOwnProperty(m)&&x!=null)switch(m){case"value":break;case"multiple":I=x;default:l.hasOwnProperty(m)||Ht(e,i,m,null,l,x)}for(d in l)if(m=l[d],x=a[d],l.hasOwnProperty(d)&&(m!=null||x!=null))switch(d){case"value":F=m;break;case"defaultValue":_=m;break;case"multiple":v=m;default:m!==x&&Ht(e,i,d,m,l,x)}i=_,a=v,l=I,F!=null?As(e,!!a,F,!1):!!l!=!!a&&(i!=null?As(e,!!a,i,!0):As(e,!!a,a?[]:"",!1));return;case"textarea":I=F=null;for(_ in a)if(d=a[_],a.hasOwnProperty(_)&&d!=null&&!l.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Ht(e,i,_,null,l,d)}for(v in l)if(d=l[v],m=a[v],l.hasOwnProperty(v)&&(d!=null||m!=null))switch(v){case"value":F=d;break;case"defaultValue":I=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==m&&Ht(e,i,v,d,l,m)}md(e,F,I);return;case"option":for(var gt in a)if(F=a[gt],a.hasOwnProperty(gt)&&F!=null&&!l.hasOwnProperty(gt))switch(gt){case"selected":e.selected=!1;break;default:Ht(e,i,gt,null,l,F)}for(x in l)if(F=l[x],I=a[x],l.hasOwnProperty(x)&&F!==I&&(F!=null||I!=null))switch(x){case"selected":e.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:Ht(e,i,x,F,l,I)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ht in a)F=a[ht],a.hasOwnProperty(ht)&&F!=null&&!l.hasOwnProperty(ht)&&Ht(e,i,ht,null,l,F);for(B in l)if(F=l[B],I=a[B],l.hasOwnProperty(B)&&F!==I&&(F!=null||I!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:Ht(e,i,B,F,l,I)}return;default:if($l(i)){for(var Ft in a)F=a[Ft],a.hasOwnProperty(Ft)&&F!==void 0&&!l.hasOwnProperty(Ft)&&Lu(e,i,Ft,void 0,l,F);for(q in l)F=l[q],I=a[q],!l.hasOwnProperty(q)||F===I||F===void 0&&I===void 0||Lu(e,i,q,F,l,I);return}}for(var k in a)F=a[k],a.hasOwnProperty(k)&&F!=null&&!l.hasOwnProperty(k)&&Ht(e,i,k,null,l,F);for($ in l)F=l[$],I=a[$],!l.hasOwnProperty($)||F===I||F==null&&I==null||Ht(e,i,$,F,l,I)}var Nu=null,ku=null;function jo(e){return e.nodeType===9?e:e.ownerDocument}function vg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ag(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Pu(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Bu=null;function J0(){var e=window.event;return e&&e.type==="popstate"?e===Bu?!1:(Bu=e,!0):(Bu=null,!1)}var Sg=typeof setTimeout=="function"?setTimeout:void 0,tv=typeof clearTimeout=="function"?clearTimeout:void 0,Eg=typeof Promise=="function"?Promise:void 0,ev=typeof queueMicrotask=="function"?queueMicrotask:typeof Eg<"u"?function(e){return Eg.resolve(null).then(e).catch(nv)}:Sg;function nv(e){setTimeout(function(){throw e})}function xi(e){return e==="head"}function _g(e,i){var a=i,l=0,d=0;do{var m=a.nextSibling;if(e.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<l&&8>l){a=l;var v=e.ownerDocument;if(a&1&&tr(v.documentElement),a&2&&tr(v.body),a&4)for(a=v.head,tr(a),v=a.firstChild;v;){var _=v.nextSibling,x=v.nodeName;v[ga]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=_}}if(d===0){e.removeChild(m),lr(i);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:l=a.charCodeAt(0)-48;else l=0;a=m}while(a);lr(i)}function zu(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":zu(a),jl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function iv(e,i,a,l){for(;e.nodeType===1;){var d=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ga])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=_n(e.nextSibling),e===null)break}return null}function sv(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=_n(e.nextSibling),e===null))return null;return e}function Uu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function av(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function _n(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var Hu=null;function wg(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function Tg(e,i,a){switch(i=jo(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function tr(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);jl(e)}var yn=new Map,xg=new Set;function Go(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ni=H.d;H.d={f:rv,r:ov,D:lv,C:cv,L:uv,m:hv,X:fv,S:dv,M:pv};function rv(){var e=ni.f(),i=ko();return e||i}function ov(e){var i=ms(e);i!==null&&i.tag===5&&i.type==="form"?Xf(i):ni.r(e)}var Qs=typeof document>"u"?null:document;function Rg(e,i,a){var l=Qs;if(l&&typeof i=="string"&&i){var d=un(i);d='link[rel="'+e+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),xg.has(d)||(xg.add(d),e={rel:e,crossOrigin:a,href:i},l.querySelector(d)===null&&(i=l.createElement("link"),Re(i,"link",e),ve(i),l.head.appendChild(i)))}}function lv(e){ni.D(e),Rg("dns-prefetch",e,null)}function cv(e,i){ni.C(e,i),Rg("preconnect",e,i)}function uv(e,i,a){ni.L(e,i,a);var l=Qs;if(l&&e&&i){var d='link[rel="preload"][as="'+un(i)+'"]';i==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+un(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+un(a.imageSizes)+'"]')):d+='[href="'+un(e)+'"]';var m=d;switch(i){case"style":m=Ws(e);break;case"script":m=Zs(e)}yn.has(m)||(e=g({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),yn.set(m,e),l.querySelector(d)!==null||i==="style"&&l.querySelector(er(m))||i==="script"&&l.querySelector(nr(m))||(i=l.createElement("link"),Re(i,"link",e),ve(i),l.head.appendChild(i)))}}function hv(e,i){ni.m(e,i);var a=Qs;if(a&&e){var l=i&&typeof i.as=="string"?i.as:"script",d='link[rel="modulepreload"][as="'+un(l)+'"][href="'+un(e)+'"]',m=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Zs(e)}if(!yn.has(m)&&(e=g({rel:"modulepreload",href:e},i),yn.set(m,e),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(nr(m)))return}l=a.createElement("link"),Re(l,"link",e),ve(l),a.head.appendChild(l)}}}function dv(e,i,a){ni.S(e,i,a);var l=Qs;if(l&&e){var d=ys(l).hoistableStyles,m=Ws(e);i=i||"default";var v=d.get(m);if(!v){var _={loading:0,preload:null};if(v=l.querySelector(er(m)))_.loading=5;else{e=g({rel:"stylesheet",href:e,"data-precedence":i},a),(a=yn.get(m))&&Fu(e,a);var x=v=l.createElement("link");ve(x),Re(x,"link",e),x._p=new Promise(function(B,q){x.onload=B,x.onerror=q}),x.addEventListener("load",function(){_.loading|=1}),x.addEventListener("error",function(){_.loading|=2}),_.loading|=4,qo(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:_},d.set(m,v)}}}function fv(e,i){ni.X(e,i);var a=Qs;if(a&&e){var l=ys(a).hoistableScripts,d=Zs(e),m=l.get(d);m||(m=a.querySelector(nr(d)),m||(e=g({src:e,async:!0},i),(i=yn.get(d))&&Iu(e,i),m=a.createElement("script"),ve(m),Re(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function pv(e,i){ni.M(e,i);var a=Qs;if(a&&e){var l=ys(a).hoistableScripts,d=Zs(e),m=l.get(d);m||(m=a.querySelector(nr(d)),m||(e=g({src:e,async:!0,type:"module"},i),(i=yn.get(d))&&Iu(e,i),m=a.createElement("script"),ve(m),Re(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function Cg(e,i,a,l){var d=(d=at.current)?Go(d):null;if(!d)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ws(a.href),a=ys(d).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ws(a.href);var m=ys(d).hoistableStyles,v=m.get(e);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,v),(m=d.querySelector(er(e)))&&!m._p&&(v.instance=m,v.state.loading=5),yn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},yn.set(e,a),m||gv(d,e,a,v.state))),i&&l===null)throw Error(s(528,""));return v}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Zs(a),a=ys(d).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Ws(e){return'href="'+un(e)+'"'}function er(e){return'link[rel="stylesheet"]['+e+"]"}function Mg(e){return g({},e,{"data-precedence":e.precedence,precedence:null})}function gv(e,i,a,l){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=e.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Re(i,"link",a),ve(i),e.head.appendChild(i))}function Zs(e){return'[src="'+un(e)+'"]'}function nr(e){return"script[async]"+e}function Dg(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=e.querySelector('style[data-href~="'+un(a.href)+'"]');if(l)return i.instance=l,ve(l),l;var d=g({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),ve(l),Re(l,"style",d),qo(l,a.precedence,e),i.instance=l;case"stylesheet":d=Ws(a.href);var m=e.querySelector(er(d));if(m)return i.state.loading|=4,i.instance=m,ve(m),m;l=Mg(a),(d=yn.get(d))&&Fu(l,d),m=(e.ownerDocument||e).createElement("link"),ve(m);var v=m;return v._p=new Promise(function(_,x){v.onload=_,v.onerror=x}),Re(m,"link",l),i.state.loading|=4,qo(m,a.precedence,e),i.instance=m;case"script":return m=Zs(a.src),(d=e.querySelector(nr(m)))?(i.instance=d,ve(d),d):(l=a,(d=yn.get(m))&&(l=g({},a),Iu(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),ve(d),Re(d,"link",l),e.head.appendChild(d),i.instance=d);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,qo(l,a.precedence,e));return i.instance}function qo(e,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,m=d,v=0;v<l.length;v++){var _=l[v];if(_.dataset.precedence===i)m=_;else if(m!==d)break}m?m.parentNode.insertBefore(e,m.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Fu(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Iu(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Vo=null;function Og(e,i,a){if(Vo===null){var l=new Map,d=Vo=new Map;d.set(a,l)}else d=Vo,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),d=0;d<a.length;d++){var m=a[d];if(!(m[ga]||m[Me]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(i)||"";v=e+v;var _=l.get(v);_?_.push(m):l.set(v,[m])}}return l}function Lg(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function mv(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Ng(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var ir=null;function yv(){}function bv(e,i,a){if(ir===null)throw Error(s(475));var l=ir;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var d=Ws(a.href),m=e.querySelector(er(d));if(m){e=m._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=Xo.bind(l),e.then(l,l)),i.state.loading|=4,i.instance=m,ve(m);return}m=e.ownerDocument||e,a=Mg(a),(d=yn.get(d))&&Fu(a,d),m=m.createElement("link"),ve(m);var v=m;v._p=new Promise(function(_,x){v.onload=_,v.onerror=x}),Re(m,"link",a),i.instance=m}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Xo.bind(l),e.addEventListener("load",i),e.addEventListener("error",i))}}function vv(){if(ir===null)throw Error(s(475));var e=ir;return e.stylesheets&&e.count===0&&ju(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&ju(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Xo(){if(this.count--,this.count===0){if(this.stylesheets)ju(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Yo=null;function ju(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Yo=new Map,i.forEach(Av,e),Yo=null,Xo.call(e))}function Av(e,i){if(!(i.state.loading&4)){var a=Yo.get(e);if(a)var l=a.get(null);else{a=new Map,Yo.set(e,a);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var v=d[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}d=i.instance,v=d.getAttribute("data-precedence"),m=a.get(v)||l,m===l&&a.set(null,d),a.set(v,d),this.count++,l=Xo.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),m?m.parentNode.insertBefore(d,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),i.state.loading|=4}}var sr={$$typeof:R,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function Sv(e,i,a,l,d,m,v,_){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ul(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ul(0),this.hiddenUpdates=Ul(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function kg(e,i,a,l,d,m,v,_,x,B,q,$){return e=new Sv(e,i,a,v,_,x,B,$),i=1,m===!0&&(i|=24),m=Je(3,null,null,i),e.current=m,m.stateNode=e,i=_c(),i.refCount++,e.pooledCache=i,i.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:i},Rc(m),e}function Pg(e){return e?(e=Ms,e):Ms}function Bg(e,i,a,l,d,m){d=Pg(d),l.context===null?l.context=d:l.pendingContext=d,l=fi(i),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=pi(e,l,i),a!==null&&(an(a,e,i),ka(a,e,i))}function zg(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Gu(e,i){zg(e,i),(e=e.alternate)&&zg(e,i)}function Ug(e){if(e.tag===13){var i=Cs(e,67108864);i!==null&&an(i,e,67108864),Gu(e,67108864)}}var $o=!0;function Ev(e,i,a,l){var d=D.T;D.T=null;var m=H.p;try{H.p=2,qu(e,i,a,l)}finally{H.p=m,D.T=d}}function _v(e,i,a,l){var d=D.T;D.T=null;var m=H.p;try{H.p=8,qu(e,i,a,l)}finally{H.p=m,D.T=d}}function qu(e,i,a,l){if($o){var d=Vu(l);if(d===null)Ou(e,i,l,Ko,a),Fg(e,l);else if(Tv(d,e,i,a,l))l.stopPropagation();else if(Fg(e,l),i&4&&-1<wv.indexOf(e)){for(;d!==null;){var m=ms(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Bi(m.pendingLanes);if(v!==0){var _=m;for(_.pendingLanes|=2,_.entangledLanes|=2;v;){var x=1<<31-be(v);_.entanglements[1]|=x,v&=~x}On(m),(Pt&6)===0&&(Lo=pe()+500,Wa(0))}}break;case 13:_=Cs(m,2),_!==null&&an(_,m,2),ko(),Gu(m,2)}if(m=Vu(l),m===null&&Ou(e,i,l,Ko,a),m===d)break;d=m}d!==null&&l.stopPropagation()}else Ou(e,i,l,null,a)}}function Vu(e){return e=Ql(e),Xu(e)}var Ko=null;function Xu(e){if(Ko=null,e=gs(e),e!==null){var i=o(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=c(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Ko=e,null}function Hg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(oi()){case li:return 2;case Hr:return 8;case In:case Pl:return 32;case Fr:return 268435456;default:return 32}default:return 32}}var Yu=!1,Ri=null,Ci=null,Mi=null,ar=new Map,rr=new Map,Di=[],wv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fg(e,i){switch(e){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":Ci=null;break;case"mouseover":case"mouseout":Mi=null;break;case"pointerover":case"pointerout":ar.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":rr.delete(i.pointerId)}}function or(e,i,a,l,d,m){return e===null||e.nativeEvent!==m?(e={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[d]},i!==null&&(i=ms(i),i!==null&&Ug(i)),e):(e.eventSystemFlags|=l,i=e.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),e)}function Tv(e,i,a,l,d){switch(i){case"focusin":return Ri=or(Ri,e,i,a,l,d),!0;case"dragenter":return Ci=or(Ci,e,i,a,l,d),!0;case"mouseover":return Mi=or(Mi,e,i,a,l,d),!0;case"pointerover":var m=d.pointerId;return ar.set(m,or(ar.get(m)||null,e,i,a,l,d)),!0;case"gotpointercapture":return m=d.pointerId,rr.set(m,or(rr.get(m)||null,e,i,a,l,d)),!0}return!1}function Ig(e){var i=gs(e.target);if(i!==null){var a=o(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){e.blockedOn=i,bb(e.priority,function(){if(a.tag===13){var l=sn();l=Hl(l);var d=Cs(a,l);d!==null&&an(d,a,l),Gu(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qo(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=Vu(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Kl=l,a.target.dispatchEvent(l),Kl=null}else return i=ms(a),i!==null&&Ug(i),e.blockedOn=a,!1;i.shift()}return!0}function jg(e,i,a){Qo(e)&&a.delete(i)}function xv(){Yu=!1,Ri!==null&&Qo(Ri)&&(Ri=null),Ci!==null&&Qo(Ci)&&(Ci=null),Mi!==null&&Qo(Mi)&&(Mi=null),ar.forEach(jg),rr.forEach(jg)}function Wo(e,i){e.blockedOn===i&&(e.blockedOn=null,Yu||(Yu=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,xv)))}var Zo=null;function Gg(e){Zo!==e&&(Zo=e,u.unstable_scheduleCallback(u.unstable_NormalPriority,function(){Zo===e&&(Zo=null);for(var i=0;i<e.length;i+=3){var a=e[i],l=e[i+1],d=e[i+2];if(typeof l!="function"){if(Xu(l||a)===null)continue;break}var m=ms(a);m!==null&&(e.splice(i,3),i-=3,Xc(m,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function lr(e){function i(x){return Wo(x,e)}Ri!==null&&Wo(Ri,e),Ci!==null&&Wo(Ci,e),Mi!==null&&Wo(Mi,e),ar.forEach(i),rr.forEach(i);for(var a=0;a<Di.length;a++){var l=Di[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Di.length&&(a=Di[0],a.blockedOn===null);)Ig(a),a.blockedOn===null&&Di.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],m=a[l+1],v=d[Fe]||null;if(typeof m=="function")v||Gg(a);else if(v){var _=null;if(m&&m.hasAttribute("formAction")){if(d=m,v=m[Fe]||null)_=v.formAction;else if(Xu(d)!==null)continue}else _=v.action;typeof _=="function"?a[l+1]=_:(a.splice(l,3),l-=3),Gg(a)}}}function $u(e){this._internalRoot=e}Jo.prototype.render=$u.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=sn();Bg(a,l,e,i,null,null)},Jo.prototype.unmount=$u.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Bg(e.current,2,null,e,null,null),ko(),i[ps]=null}};function Jo(e){this._internalRoot=e}Jo.prototype.unstable_scheduleHydration=function(e){if(e){var i=ad();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Di.length&&i!==0&&i<Di[a].priority;a++);Di.splice(a,0,e),a===0&&Ig(e)}};var qg=t.version;if(qg!=="19.1.0")throw Error(s(527,qg,"19.1.0"));H.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=f(i),e=e!==null?p(e):null,e=e===null?null:e.stateNode,e};var Rv={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tl.isDisabled&&tl.supportsFiber)try{Pi=tl.inject(Rv),oe=tl}catch{}}return ur.createRoot=function(e,i){if(!r(e))throw Error(s(299));var a=!1,l="",d=rp,m=op,v=lp,_=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(_=i.unstable_transitionCallbacks)),i=kg(e,1,!1,null,null,a,l,d,m,v,_,null),e[ps]=i.current,Du(e),new $u(i)},ur.hydrateRoot=function(e,i,a){if(!r(e))throw Error(s(299));var l=!1,d="",m=rp,v=op,_=lp,x=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(x=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),i=kg(e,1,!0,i,a??null,l,d,m,v,_,x,B),i.context=Pg(null),a=i.current,l=sn(),l=Hl(l),d=fi(l),d.callback=null,pi(a,d,l),a=l,i.current.lanes=a,pa(i,a),On(i),e[ps]=i.current,Du(e),new Jo(i)},ur.version="19.1.0",ur}var nm;function Uv(){if(nm)return Zu.exports;nm=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(t){console.error(t)}}return u(),Zu.exports=zv(),Zu.exports}var Hv=Uv();const ze=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),ph=[.001,0,0,.001,0,0],nh=1.35,rn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Fn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Fv="pdfjs_internal_editor_",vt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Mt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},$m={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Le={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},vr={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ee={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Js={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Rr={ERRORS:0,WARNINGS:1,INFOS:5},Sr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},el={moveTo:0,lineTo:1,curveTo:2,closePath:3},Km={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let bl=Rr.WARNINGS;function Iv(u){Number.isInteger(u)&&(bl=u)}function jv(){return bl}function vl(u){bl>=Rr.INFOS&&console.log(`Info: ${u}`)}function At(u){bl>=Rr.WARNINGS&&console.log(`Warning: ${u}`)}function It(u){throw new Error(u)}function he(u,t){u||It(t)}function Gv(u){switch(u?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Oh(u,t=null,n=null){if(!u)return null;if(n&&typeof u=="string"&&(n.addDefaultProtocol&&u.startsWith("www.")&&u.match(/\./g)?.length>=2&&(u=`http://${u}`),n.tryConvertEncoding))try{u=$v(u)}catch{}const s=t?URL.parse(u,t):URL.parse(u);return Gv(s)?s:null}function Lh(u,t,n=!1){const s=URL.parse(u);return s?(s.hash=t,s.href):n&&Oh(u,"http://example.com")?u.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Ct(u,t,n,s=!1){return Object.defineProperty(u,t,{value:n,enumerable:!s,configurable:!0,writable:!1}),n}const ds=function(){function t(n,s){this.message=n,this.name=s}return t.prototype=new Error,t.constructor=t,t}();class im extends ds{constructor(t,n){super(t,"PasswordException"),this.code=n}}class ih extends ds{constructor(t,n){super(t,"UnknownErrorException"),this.details=n}}class fl extends ds{constructor(t){super(t,"InvalidPDFException")}}class Er extends ds{constructor(t,n,s){super(t,"ResponseException"),this.status=n,this.missing=s}}class qv extends ds{constructor(t){super(t,"FormatError")}}class ai extends ds{constructor(t){super(t,"AbortException")}}function Qm(u){(typeof u!="object"||u?.length===void 0)&&It("Invalid argument for bytesToString");const t=u.length,n=8192;if(t<n)return String.fromCharCode.apply(null,u);const s=[];for(let r=0;r<t;r+=n){const o=Math.min(r+n,t),c=u.subarray(r,o);s.push(String.fromCharCode.apply(null,c))}return s.join("")}function Cr(u){typeof u!="string"&&It("Invalid argument for stringToBytes");const t=u.length,n=new Uint8Array(t);for(let s=0;s<t;++s)n[s]=u.charCodeAt(s)&255;return n}function Vv(u){return String.fromCharCode(u>>24&255,u>>16&255,u>>8&255,u&255)}function Xv(){const u=new Uint8Array(4);return u[0]=1,new Uint32Array(u.buffer,0,1)[0]===1}function Yv(){try{return new Function(""),!0}catch{return!1}}class we{static get isLittleEndian(){return Ct(this,"isLittleEndian",Xv())}static get isEvalSupported(){return Ct(this,"isEvalSupported",Yv())}static get isOffscreenCanvasSupported(){return Ct(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ct(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:n}=navigator;return Ct(this,"platform",{isAndroid:n.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:n.includes("Firefox")})}static get isCSSRoundSupported(){return Ct(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const sh=Array.from(Array(256).keys(),u=>u.toString(16).padStart(2,"0"));class ct{static makeHexColor(t,n,s){return`#${sh[t]}${sh[n]}${sh[s]}`}static scaleMinMax(t,n){let s;t[0]?(t[0]<0&&(s=n[0],n[0]=n[2],n[2]=s),n[0]*=t[0],n[2]*=t[0],t[3]<0&&(s=n[1],n[1]=n[3],n[3]=s),n[1]*=t[3],n[3]*=t[3]):(s=n[0],n[0]=n[1],n[1]=s,s=n[2],n[2]=n[3],n[3]=s,t[1]<0&&(s=n[1],n[1]=n[3],n[3]=s),n[1]*=t[1],n[3]*=t[1],t[2]<0&&(s=n[0],n[0]=n[2],n[2]=s),n[0]*=t[2],n[2]*=t[2]),n[0]+=t[4],n[1]+=t[5],n[2]+=t[4],n[3]+=t[5]}static transform(t,n){return[t[0]*n[0]+t[2]*n[1],t[1]*n[0]+t[3]*n[1],t[0]*n[2]+t[2]*n[3],t[1]*n[2]+t[3]*n[3],t[0]*n[4]+t[2]*n[5]+t[4],t[1]*n[4]+t[3]*n[5]+t[5]]}static applyTransform(t,n,s=0){const r=t[s],o=t[s+1];t[s]=r*n[0]+o*n[2]+n[4],t[s+1]=r*n[1]+o*n[3]+n[5]}static applyTransformToBezier(t,n,s=0){const r=n[0],o=n[1],c=n[2],h=n[3],f=n[4],p=n[5];for(let g=0;g<6;g+=2){const y=t[s+g],b=t[s+g+1];t[s+g]=y*r+b*c+f,t[s+g+1]=y*o+b*h+p}}static applyInverseTransform(t,n){const s=t[0],r=t[1],o=n[0]*n[3]-n[1]*n[2];t[0]=(s*n[3]-r*n[2]+n[2]*n[5]-n[4]*n[3])/o,t[1]=(-s*n[1]+r*n[0]+n[4]*n[1]-n[5]*n[0])/o}static axialAlignedBoundingBox(t,n,s){const r=n[0],o=n[1],c=n[2],h=n[3],f=n[4],p=n[5],g=t[0],y=t[1],b=t[2],A=t[3];let S=r*g+f,E=S,w=r*b+f,T=w,L=h*y+p,R=L,N=h*A+p,C=N;if(o!==0||c!==0){const U=o*g,z=o*b,V=c*y,G=c*A;S+=V,T+=V,w+=G,E+=G,L+=U,C+=U,N+=z,R+=z}s[0]=Math.min(s[0],S,w,E,T),s[1]=Math.min(s[1],L,N,R,C),s[2]=Math.max(s[2],S,w,E,T),s[3]=Math.max(s[3],L,N,R,C)}static inverseTransform(t){const n=t[0]*t[3]-t[1]*t[2];return[t[3]/n,-t[1]/n,-t[2]/n,t[0]/n,(t[2]*t[5]-t[4]*t[3])/n,(t[4]*t[1]-t[5]*t[0])/n]}static singularValueDecompose2dScale(t,n){const s=t[0],r=t[1],o=t[2],c=t[3],h=s**2+r**2,f=s*o+r*c,p=o**2+c**2,g=(h+p)/2,y=Math.sqrt(g**2-(h*p-f**2));n[0]=Math.sqrt(g+y||1),n[1]=Math.sqrt(g-y||1)}static normalizeRect(t){const n=t.slice(0);return t[0]>t[2]&&(n[0]=t[2],n[2]=t[0]),t[1]>t[3]&&(n[1]=t[3],n[3]=t[1]),n}static intersect(t,n){const s=Math.max(Math.min(t[0],t[2]),Math.min(n[0],n[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(n[0],n[2]));if(s>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(n[1],n[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(n[1],n[3]));return o>c?null:[s,o,r,c]}static pointBoundingBox(t,n,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],n),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],n)}static rectBoundingBox(t,n,s,r,o){o[0]=Math.min(o[0],t,s),o[1]=Math.min(o[1],n,r),o[2]=Math.max(o[2],t,s),o[3]=Math.max(o[3],n,r)}static#t(t,n,s,r,o,c,h,f,p,g){if(p<=0||p>=1)return;const y=1-p,b=p*p,A=b*p,S=y*(y*(y*t+3*p*n)+3*b*s)+A*r,E=y*(y*(y*o+3*p*c)+3*b*h)+A*f;g[0]=Math.min(g[0],S),g[1]=Math.min(g[1],E),g[2]=Math.max(g[2],S),g[3]=Math.max(g[3],E)}static#e(t,n,s,r,o,c,h,f,p,g,y,b){if(Math.abs(p)<1e-12){Math.abs(g)>=1e-12&&this.#t(t,n,s,r,o,c,h,f,-y/g,b);return}const A=g**2-4*y*p;if(A<0)return;const S=Math.sqrt(A),E=2*p;this.#t(t,n,s,r,o,c,h,f,(-g+S)/E,b),this.#t(t,n,s,r,o,c,h,f,(-g-S)/E,b)}static bezierBoundingBox(t,n,s,r,o,c,h,f,p){p[0]=Math.min(p[0],t,h),p[1]=Math.min(p[1],n,f),p[2]=Math.max(p[2],t,h),p[3]=Math.max(p[3],n,f),this.#e(t,s,o,h,n,r,c,f,3*(-t+3*(s-o)+h),6*(t-2*s+o),3*(s-t),p),this.#e(t,s,o,h,n,r,c,f,3*(-n+3*(r-c)+f),6*(n-2*r+c),3*(r-n),p)}}function $v(u){return decodeURIComponent(escape(u))}let ah=null,sm=null;function Wm(u){return ah||(ah=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,sm=new Map([["","t"]])),u.replaceAll(ah,(t,n,s)=>n?n.normalize("NFKC"):sm.get(s))}function Nh(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const u=new Uint8Array(32);return crypto.getRandomValues(u),Qm(u)}const kh="pdfjs_internal_id_";function Kv(u,t,n){if(!Array.isArray(n)||n.length<2)return!1;const[s,r,...o]=n;if(!u(s)&&!Number.isInteger(s)||!t(r))return!1;const c=o.length;let h=!0;switch(r.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;h=!1;break;default:return!1}for(const f of o)if(!(typeof f=="number"||h&&f===null))return!1;return!0}function Ne(u,t,n){return Math.min(Math.max(u,t),n)}function Zm(u){return Uint8Array.prototype.toBase64?u.toBase64():btoa(Qm(u))}function Qv(u){return Uint8Array.fromBase64?Uint8Array.fromBase64(u):Cr(atob(u))}typeof Promise.try!="function"&&(Promise.try=function(u,...t){return new Promise(n=>{n(u(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(u){return u.reduce((t,n)=>t+n,0)});const ii="http://www.w3.org/2000/svg";class ls{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function ca(u,t="text"){if(mr(u,document.baseURI)){const n=await fetch(u);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,s)=>{const r=new XMLHttpRequest;r.open("GET",u,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":n(r.response);return}n(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class Mr{constructor({viewBox:t,userUnit:n,scale:s,rotation:r,offsetX:o=0,offsetY:c=0,dontFlip:h=!1}){this.viewBox=t,this.userUnit=n,this.scale=s,this.rotation=r,this.offsetX=o,this.offsetY=c,s*=n;const f=(t[2]+t[0])/2,p=(t[3]+t[1])/2;let g,y,b,A;switch(r%=360,r<0&&(r+=360),r){case 180:g=-1,y=0,b=0,A=1;break;case 90:g=0,y=1,b=1,A=0;break;case 270:g=0,y=-1,b=-1,A=0;break;case 0:g=1,y=0,b=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(b=-b,A=-A);let S,E,w,T;g===0?(S=Math.abs(p-t[1])*s+o,E=Math.abs(f-t[0])*s+c,w=(t[3]-t[1])*s,T=(t[2]-t[0])*s):(S=Math.abs(f-t[0])*s+o,E=Math.abs(p-t[1])*s+c,w=(t[2]-t[0])*s,T=(t[3]-t[1])*s),this.transform=[g*s,y*s,b*s,A*s,S-g*s*f-b*s*p,E-y*s*f-A*s*p],this.width=w,this.height=T}get rawDims(){const t=this.viewBox;return Ct(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:n=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new Mr({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:n,offsetX:s,offsetY:r,dontFlip:o})}convertToViewportPoint(t,n){const s=[t,n];return ct.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const n=[t[0],t[1]];ct.applyTransform(n,this.transform);const s=[t[2],t[3]];return ct.applyTransform(s,this.transform),[n[0],n[1],s[0],s[1]]}convertToPdfPoint(t,n){const s=[t,n];return ct.applyInverseTransform(s,this.transform),s}}class Al extends ds{constructor(t,n=0){super(t,"RenderingCancelledException"),this.extraDelay=n}}function Dr(u){const t=u.length;let n=0;for(;n<t&&u[n].trim()==="";)n++;return u.substring(n,n+5).toLowerCase()==="data:"}function Sl(u){return typeof u=="string"&&/\.pdf$/i.test(u)}function Jm(u){return[u]=u.split(/[#?]/,1),u.substring(u.lastIndexOf("/")+1)}function ty(u,t="document.pdf"){if(typeof u!="string")return t;if(Dr(u))return At('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=n.exec(u);let o=s.exec(r[1])||s.exec(r[2])||s.exec(r[3]);if(o&&(o=o[0],o.includes("%")))try{o=s.exec(decodeURIComponent(o))[0]}catch{}return o||t}class am{started=Object.create(null);times=[];time(t){t in this.started&&At(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||At(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let n=0;for(const{name:s}of this.times)n=Math.max(s.length,n);for(const{name:s,start:r,end:o}of this.times)t.push(`${s.padEnd(n)} ${o-r}ms
`);return t.join("")}}function mr(u,t){const n=t?URL.parse(u,t):URL.parse(u);return n?.protocol==="http:"||n?.protocol==="https:"}function An(u){u.preventDefault()}function ie(u){u.preventDefault(),u.stopPropagation()}function Wv(u){console.log("Deprecated API usage: "+u)}class Ph{static#t;static toDateObject(t){if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const n=this.#t.exec(t);if(!n)return null;const s=parseInt(n[1],10);let r=parseInt(n[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(n[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(n[4],10);c=c>=0&&c<=23?c:0;let h=parseInt(n[5],10);h=h>=0&&h<=59?h:0;let f=parseInt(n[6],10);f=f>=0&&f<=59?f:0;const p=n[7]||"Z";let g=parseInt(n[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(n[9],10)||0;return y=y>=0&&y<=59?y:0,p==="-"?(c+=g,h+=y):p==="+"&&(c-=g,h-=y),new Date(Date.UTC(s,r,o,c,h,f))}}function ey(u,{scale:t=1,rotation:n=0}){const{width:s,height:r}=u.attributes.style,o=[0,0,parseInt(s),parseInt(r)];return new Mr({viewBox:o,userUnit:1,scale:t,rotation:n})}function Bh(u){if(u.startsWith("#")){const t=parseInt(u.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return u.startsWith("rgb(")?u.slice(4,-1).split(",").map(t=>parseInt(t)):u.startsWith("rgba(")?u.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(At(`Not a valid color format: "${u}"`),[0,0,0])}function Zv(u){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const n of u.keys()){t.style.color=n;const s=window.getComputedStyle(t).color;u.set(n,Bh(s))}t.remove()}function Qt(u){const{a:t,b:n,c:s,d:r,e:o,f:c}=u.getTransform();return[t,n,s,r,o,c]}function kn(u){const{a:t,b:n,c:s,d:r,e:o,f:c}=u.getTransform().invertSelf();return[t,n,s,r,o,c]}function ki(u,t,n=!1,s=!0){if(t instanceof Mr){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:c}=u,h=we.isCSSRoundSupported,f=`var(--total-scale-factor) * ${r}px`,p=`var(--total-scale-factor) * ${o}px`,g=h?`round(down, ${f}, var(--scale-round-x))`:`calc(${f})`,y=h?`round(down, ${p}, var(--scale-round-y))`:`calc(${p})`;!n||t.rotation%180===0?(c.width=g,c.height=y):(c.width=y,c.height=g)}s&&u.setAttribute("data-main-rotation",t.rotation)}class Tn{constructor(){const{pixelRatio:t}=Tn;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,n,s,r,o=-1){let c=1/0,h=1/0,f=1/0;s=Tn.capPixels(s,o),s>0&&(c=Math.sqrt(s/(t*n))),r!==-1&&(h=r/t,f=r/n);const p=Math.min(c,h,f);return this.sx>p||this.sy>p?(this.sx=p,this.sy=p,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,n){if(n>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+n/100));return t>0?Math.min(t,s):s}return t}}const pl=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Ar{#t=null;#e=null;#n;#i=null;#a=null;#s=null;static#l=null;constructor(t){this.#n=t,Ar.#l||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const n=this.#n._uiManager._signal;t.addEventListener("contextmenu",An,{signal:n}),t.addEventListener("pointerdown",Ar.#o,{signal:n});const s=this.#i=document.createElement("div");s.className="buttons",t.append(s);const r=this.#n.toolbarPosition;if(r){const{style:o}=t,c=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return this.#u(),t}get div(){return this.#t}static#o(t){t.stopPropagation()}#h(t){this.#n._focusEventsAllowed=!1,ie(t)}#c(t){this.#n._focusEventsAllowed=!0,ie(t)}#d(t){const n=this.#n._uiManager._signal;t.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:n}),t.addEventListener("focusout",this.#c.bind(this),{capture:!0,signal:n}),t.addEventListener("contextmenu",An,{signal:n})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown()}#u(){const{editorType:t,_uiManager:n}=this.#n,s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",Ar.#l[t]),this.#d(s),s.addEventListener("click",r=>{n.delete()},{signal:n._signal}),this.#i.append(s)}get#f(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const n=await t.render();this.#d(n),this.#i.prepend(n,this.#f),this.#a=t}addColorPicker(t){this.#e=t;const n=t.renderButton();this.#d(n),this.#i.prepend(n,this.#f)}async addEditSignatureButton(t){const n=this.#s=await t.renderEditButton(this.#n);this.#d(n),this.#i.prepend(n,this.#f)}updateEditSignatureButton(t){this.#s&&(this.#s.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class Jv{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",An,{signal:this.#n._signal});const n=this.#t=document.createElement("div");return n.className="buttons",t.append(n),this.#s(),t}#a(t,n){let s=0,r=0;for(const o of t){const c=o.y+o.height;if(c<s)continue;const h=o.x+(n?o.width:0);if(c>s){r=h,s=c;continue}n?h>r&&(r=h):h<r&&(r=h)}return[n?1-r:r,s]}show(t,n,s){const[r,o]=this.#a(n,s),{style:c}=this.#e||=this.#i();t.append(this.#e),c.insetInlineEnd=`${100*r}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const n=document.createElement("span");t.append(n),n.className="visuallyHidden",n.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=this.#n._signal;t.addEventListener("contextmenu",An,{signal:s}),t.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:s}),this.#t.append(t)}}function ny(u,t,n){for(const s of n)t.addEventListener(s,u[s].bind(u))}class tA{#t=0;get id(){return`${Fv}${this.#t++}`}}class zh{#t=Nh();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Ct(this,"_isSVGFittingCanvas",o)}async#i(t,n){this.#n||=new Map;let s=this.#n.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof n=="string"?(s.url=n,r=await ca(n,"blob")):n instanceof File?r=s.file=n:n instanceof Blob&&(r=n),r.type==="image/svg+xml"){const o=zh._isSVGFittingCanvas,c=new FileReader,h=new Image,f=new Promise((p,g)=>{h.onload=()=>{s.bitmap=h,s.isSvg=!0,p()},c.onload=async()=>{const y=s.svgUrl=c.result;h.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},h.onerror=c.onerror=g});c.readAsDataURL(r),await f}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){At(r),s=null}return this.#n.set(t,s),s&&this.#n.set(s.id,s),s}async getFromFile(t){const{lastModified:n,name:s,size:r,type:o}=t;return this.#i(`${n}_${s}_${r}_${o}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,n){const s=await n;return this.#i(t,s)}async getFromId(t){this.#n||=new Map;const n=this.#n.get(t);if(!n)return null;if(n.bitmap)return n.refCounter+=1,n;if(n.file)return this.getFromFile(n.file);if(n.blobPromise){const{blobPromise:s}=n;return delete n.blobPromise,this.getFromBlob(n.id,s)}return this.getFromUrl(n.url)}getFromCanvas(t,n){this.#n||=new Map;let s=this.#n.get(t);if(s?.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(n.width,n.height);return r.getContext("2d").drawImage(n,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,s),this.#n.set(s.id,s),s}getSvgUrl(t){const n=this.#n.get(t);return n?.isSvg?n.svgUrl:null}deleteId(t){this.#n||=new Map;const n=this.#n.get(t);if(!n||(n.refCounter-=1,n.refCounter!==0))return;const{bitmap:s}=n;if(!n.url&&!n.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),n.blobPromise=r.convertToBlob()}s.close?.(),n.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class eA{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:n,post:s,mustExec:r,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:h=!1}){if(r&&t(),this.#e)return;const f={cmd:t,undo:n,post:s,type:o};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(f);return}if(c&&this.#t[this.#i].type===o){h&&(f.undo=this.#t[this.#i].undo),this.#t[this.#i]=f;return}const p=this.#i+1;p===this.#n?this.#t.splice(0,1):(this.#i=p,p<this.#t.length&&this.#t.splice(p)),this.#t.push(f)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:n}=this.#t[this.#i];t(),n?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:n}=this.#t[this.#i];t(),n?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let n=this.#i;n>=0;n--)if(this.#t[n].type!==t){this.#t.splice(n+1,this.#i-n),this.#i=n;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class Or{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=we.platform;for(const[s,r,o={}]of t)for(const c of s){const h=c.startsWith("mac+");n&&h?(this.callbacks.set(c.slice(4),{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1))):!n&&!h&&(this.callbacks.set(c,{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const n=this.buffer.join("+");return this.buffer.length=0,n}exec(t,n){if(!this.allKeys.has(n.key))return;const s=this.callbacks.get(this.#t(n));if(!s)return;const{callback:r,options:{bubbles:o=!1,args:c=[],checker:h=null}}=s;h&&!h(t,n)||(r.bind(t,...c,n)(),o||ie(n))}}class Uh{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Zv(t),Ct(this,"_colors",t)}convert(t){const n=Bh(t);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[s,r]of this._colors)if(r.every((o,c)=>o===n[c]))return Uh._colorsMapping.get(s);return n}getHexCode(t){const n=this._colors.get(t);return n?ct.makeHexColor(...n):t}}class ri{#t=new AbortController;#e=null;#n=new Map;#i=new Map;#a=null;#s=null;#l=null;#o=new eA;#h=null;#c=null;#d=0;#u=new Set;#f=null;#r=null;#p=new Set;_editorUndoBar=null;#m=!1;#g=!1;#y=!1;#b=null;#v=null;#S=null;#_=null;#T=!1;#R=null;#M=new tA;#E=!1;#C=!1;#x=null;#O=null;#L=null;#N=null;#F=null;#w=vt.NONE;#A=new Set;#z=null;#U=null;#G=null;#q=null;#V={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#I=[0,0];#k=null;#P=null;#j=null;#B=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=ri.prototype,n=c=>c.#P.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),s=(c,{target:h})=>{if(h instanceof HTMLInputElement){const{type:f}=h;return f!=="text"&&f!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Ct(this,"_keyboardManager",new Or([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:h})=>!(h instanceof HTMLButtonElement)&&c.#P.contains(h)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:h})=>!(h instanceof HTMLButtonElement)&&c.#P.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:n}]]))}constructor(t,n,s,r,o,c,h,f,p,g,y,b,A,S){const E=this._signal=this.#t.signal;this.#P=t,this.#j=n,this.#a=s,this.#U=r,this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:E}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),o._on("setpreference",this.onSetPreference.bind(this),{signal:E}),o._on("switchannotationeditorparams",w=>this.updateParams(w.type,w.value),{signal:E}),this.#it(),this.#ot(),this.#Q(),this.#s=c.annotationStorage,this.#b=c.filterFactory,this.#G=h,this.#_=f||null,this.#m=p,this.#g=g,this.#y=y,this.#F=b||null,this.viewParameters={realScale:ls.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=A||null,this._supportsPinchToZoom=S!==!1}destroy(){this.#B?.resolve(),this.#B=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#i.values())t.destroy();this.#i.clear(),this.#n.clear(),this.#p.clear(),this.#N?.clear(),this.#e=null,this.#A.clear(),this.#o.destroy(),this.#a?.destroy(),this.#U?.destroy(),this.#R?.hide(),this.#R=null,this.#L?.destroy(),this.#L=null,this.#v&&(clearTimeout(this.#v),this.#v=null),this.#k&&(clearTimeout(this.#k),this.#k=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#F}get useNewAltTextFlow(){return this.#g}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return Ct(this,"hcmFilter",this.#G?this.#b.addHCMFilter(this.#G.foreground,this.#G.background):"none")}get direction(){return Ct(this,"direction",getComputedStyle(this.#P).direction)}get highlightColors(){return Ct(this,"highlightColors",this.#_?new Map(this.#_.split(",").map(t=>t.split("=").map(n=>n.trim()))):null)}get highlightColorNames(){return Ct(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#c=t}setMainHighlightColorPicker(t){this.#L=t}editAltText(t,n=!1){this.#a?.editAltText(this,t,n)}getSignature(t){this.#U?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#U}switchToMode(t,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,n){this._eventBus.dispatch("setpreference",{source:this,name:t,value:n})}onSetPreference({name:t,value:n}){switch(t){case"enableNewAltTextWhenAddingImage":this.#y=n;break}}onPageChanging({pageNumber:t}){this.#d=t-1}focusMainContainer(){this.#P.focus()}findParent(t,n){for(const s of this.#i.values()){const{x:r,y:o,width:c,height:h}=s.div.getBoundingClientRect();if(t>=r&&t<=r+c&&n>=o&&n<=o+h)return s}return null}disableUserSelect(t=!1){this.#j.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*ls.PDF_TO_CSS_UNITS;for(const n of this.#p)n.onScaleChanging();this.#c?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Y({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#K(t){const{currentLayer:n}=this;if(n.hasTextLayer(t))return n;for(const s of this.#i.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t=""){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:c}=n,h=n.toString(),p=this.#Y(n).closest(".textLayer"),g=this.getSelectionBoxes(p);if(!g)return;n.empty();const y=this.#K(p),b=this.#w===vt.NONE,A=()=>{y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:g,anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:c,text:h}),b&&this.showAllEditors("highlight",!0,!0)};if(b){this.switchToMode(vt.HIGHLIGHT,A);return}A()}#et(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#Y(t).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(this.#R||=new Jv(this),this.#R.show(s,r,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}#nt(){const t=document.getSelection();if(!t||t.isCollapsed){this.#z&&(this.#R?.hide(),this.#z=null,this.#D({hasSelectedText:!1}));return}const{anchorNode:n}=t;if(n===this.#z)return;const r=this.#Y(t).closest(".textLayer");if(!r){this.#z&&(this.#R?.hide(),this.#z=null,this.#D({hasSelectedText:!1}));return}if(this.#R?.hide(),this.#z=n,this.#D({hasSelectedText:!0}),!(this.#w!==vt.HIGHLIGHT&&this.#w!==vt.NONE)&&(this.#w===vt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#T=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#w===vt.HIGHLIGHT?this.#K(r):null;o?.toggleDrawing();const c=new AbortController,h=this.combinedSignal(c),f=p=>{p.type==="pointerup"&&p.button!==0||(c.abort(),o?.toggleDrawing(!0),p.type==="pointerup"&&this.#$("main_toolbar"))};window.addEventListener("pointerup",f,{signal:h}),window.addEventListener("blur",f,{signal:h})}}#$(t=""){this.#w===vt.HIGHLIGHT?this.highlightSelection(t):this.#m&&this.#et()}#it(){document.addEventListener("selectionchange",this.#nt.bind(this),{signal:this._signal})}#st(){if(this.#S)return;this.#S=new AbortController;const t=this.combinedSignal(this.#S);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#at(){this.#S?.abort(),this.#S=null}blur(){if(this.isShiftKeyDown=!1,this.#T&&(this.#T=!1,this.#$("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const n of this.#A)if(n.div.contains(t)){this.#O=[n,t],n._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;const[t,n]=this.#O;this.#O=null,n.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}#Q(){if(this.#x)return;this.#x=new AbortController;const t=this.combinedSignal(this.#x);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#rt(){this.#x?.abort(),this.#x=null}#W(){if(this.#h)return;this.#h=new AbortController;const t=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#Z(){this.#h?.abort(),this.#h=null}#ot(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#Q(),this.#W()}removeEditListeners(){this.#rt(),this.#Z()}dragOver(t){for(const{type:n}of t.dataTransfer.items)for(const s of this.#r)if(s.isHandlingMimeForPasting(n)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const n of t.dataTransfer.items)for(const s of this.#r)if(s.isHandlingMimeForPasting(n.type)){s.paste(n,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const n=[];for(const s of this.#A){const r=s.serialize(!0);r&&n.push(r)}n.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:n}=t;for(const o of n.items)for(const c of this.#r)if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let s=n.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){At(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const f of s){const p=await r.deserialize(f);if(!p)return;o.push(p)}const c=()=>{for(const f of o)this.#J(f);this.#tt(o)},h=()=>{for(const f of o)f.remove()};this.addCommands({cmd:c,undo:h,mustExec:!0})}catch(o){At(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#w!==vt.NONE&&!this.isEditorHandlingKeyboard&&ri._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#T&&(this.#T=!1,this.#$("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#D(t){Object.entries(t).some(([s,r])=>this.#V[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#V,t)}),this.#w===vt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#H([[Mt.HIGHLIGHT_FREE,!0]]))}#H(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#st(),this.#W(),this.#D({isEditing:this.#w!==vt.NONE,isEmpty:this.#X(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#at(),this.#Z(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#r){this.#r=t;for(const n of this.#r)this.#H(n.defaultPropertiesToUpdate)}}getId(){return this.#M.id}get currentLayer(){return this.#i.get(this.#d)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#d}addLayer(t){this.#i.set(t.pageIndex,t),this.#E?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}async updateMode(t,n=null,s=!1){if(this.#w!==t&&!(this.#B&&(await this.#B.promise,!this.#B))){if(this.#B=Promise.withResolvers(),this.#c?.commitOrRemove(),this.#w=t,t===vt.NONE){this.setEditingState(!1),this.#ct(),this._editorUndoBar?.hide(),this.#B.resolve();return}t===vt.SIGNATURE&&await this.#U?.loadSignatures(),this.setEditingState(!0),await this.#lt(),this.unselectAll();for(const r of this.#i.values())r.updateMode(t);if(!n){s&&this.addNewEditorFromKeyboard(),this.#B.resolve();return}for(const r of this.#n.values())r.annotationElementId===n||r.id===n?(this.setSelected(r),r.enterInEditMode()):r.unselect();this.#B.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#w&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,n){if(this.#r){switch(t){case Mt.CREATE:this.currentLayer.addNewEditor(n);return;case Mt.HIGHLIGHT_DEFAULT_COLOR:this.#L?.updateColor(n);break;case Mt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#q||=new Map).set(t,n),this.showAllEditors("highlight",n);break}for(const s of this.#A)s.updateParams(t,n);for(const s of this.#r)s.updateDefaultParams(t,n)}}showAllEditors(t,n,s=!1){for(const o of this.#n.values())o.editorType===t&&o.show(n);(this.#q?.get(Mt.HIGHLIGHT_SHOW_ALL)??!0)!==n&&this.#H([[Mt.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(t=!1){if(this.#C!==t){this.#C=t;for(const n of this.#i.values())t?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",t)}}async#lt(){if(!this.#E){this.#E=!0;const t=[];for(const n of this.#i.values())t.push(n.enable());await Promise.all(t);for(const n of this.#n.values())n.enable()}}#ct(){if(this.unselectAll(),this.#E){this.#E=!1;for(const t of this.#i.values())t.disable();for(const t of this.#n.values())t.disable()}}getEditors(t){const n=[];for(const s of this.#n.values())s.pageIndex===t&&n.push(s);return n}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.focusMainContainer(),this.#v=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#N?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#u.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#u.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#u.has(t)}removeDeletedAnnotationElement(t){this.#u.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#J(t){const n=this.#i.get(t.pageIndex);n?n.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#H(t.propertiesToUpdate))}get#ut(){let t=null;for(t of this.#A);return t}updateUI(t){this.#ut===t&&this.#H(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#H(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#A.has(t)){this.#A.delete(t),t.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#A.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(t){this.#c?.commitOrRemove();for(const n of this.#A)n!==t&&n.unselect();this.#A.clear(),this.#A.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(t){return this.#A.has(t)}get firstSelectedEditor(){return this.#A.values().next().value}unselect(t){t.unselect(),this.#A.delete(t),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#A.size!==0}get isEnterHandled(){return this.#A.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#o.undo(),this.#D({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#X()}),this._editorUndoBar?.hide()}redo(){this.#o.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#X()})}addCommands(t){this.#o.add(t),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#X()})}cleanUndoStack(t){this.#o.cleanType(t)}#X(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const n=t?[t]:[...this.#A],s=()=>{this._editorUndoBar?.show(r,n.length===1?n[0].editorType:n.length);for(const o of n)o.remove()},r=()=>{for(const o of n)this.#J(o)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#tt(t){for(const n of this.#A)n.unselect();this.#A.clear();for(const n of t)n.isEmpty()||(this.#A.add(n),n.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#A)t.commit();this.#tt(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#w!==vt.NONE))&&!this.#c?.commitOrRemove()&&this.hasSelection){for(const t of this.#A)t.unselect();this.#A.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(t,n,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#I[0]+=t,this.#I[1]+=n;const[r,o]=this.#I,c=[...this.#A],h=1e3;this.#k&&clearTimeout(this.#k),this.#k=setTimeout(()=>{this.#k=null,this.#I[0]=this.#I[1]=0,this.addCommands({cmd:()=>{for(const f of c)this.#n.has(f.id)&&(f.translateInPage(r,o),f.translationDone())},undo:()=>{for(const f of c)this.#n.has(f.id)&&(f.translateInPage(-r,-o),f.translationDone())},mustExec:!1})},h);for(const f of c)f.translateInPage(t,n),f.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(const t of this.#A)this.#f.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);const t=this.#f;this.#f=null;let n=!1;for(const[{x:r,y:o,pageIndex:c},h]of t)h.newX=r,h.newY=o,h.newPageIndex=c,n||=r!==h.savedX||o!==h.savedY||c!==h.savedPageIndex;if(!n)return!1;const s=(r,o,c,h)=>{if(this.#n.has(r.id)){const f=this.#i.get(h);f?r._setParentAndPosition(f,o,c):(r.pageIndex=h,r.x=o,r.y=c)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:c,newPageIndex:h}]of t)s(r,o,c,h)},undo:()=>{for(const[r,{savedX:o,savedY:c,savedPageIndex:h}]of t)s(r,o,c,h)},mustExec:!0}),!0}dragSelectedEditors(t,n){if(this.#f)for(const s of this.#f.keys())s.drag(t,n)}rebuild(t){if(t.parent===null){const n=this.getLayer(t.pageIndex);n?(n.changeParent(t),n.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#A.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#w}get imageManager(){return Ct(this,"imageManager",new zh)}getSelectionBoxes(t){if(!t)return null;const n=document.getSelection();for(let p=0,g=n.rangeCount;p<g;p++)if(!t.contains(n.getRangeAt(p).commonAncestorContainer))return null;const{x:s,y:r,width:o,height:c}=t.getBoundingClientRect();let h;switch(t.getAttribute("data-main-rotation")){case"90":h=(p,g,y,b)=>({x:(g-r)/c,y:1-(p+y-s)/o,width:b/c,height:y/o});break;case"180":h=(p,g,y,b)=>({x:1-(p+y-s)/o,y:1-(g+b-r)/c,width:y/o,height:b/c});break;case"270":h=(p,g,y,b)=>({x:1-(g+b-r)/c,y:(p-s)/o,width:b/c,height:y/o});break;default:h=(p,g,y,b)=>({x:(p-s)/o,y:(g-r)/c,width:y/o,height:b/c});break}const f=[];for(let p=0,g=n.rangeCount;p<g;p++){const y=n.getRangeAt(p);if(!y.collapsed)for(const{x:b,y:A,width:S,height:E}of y.getClientRects())S===0||E===0||f.push(h(b,A,S,E))}return f.length===0?null:f}addChangedExistingAnnotation({annotationElementId:t,id:n}){(this.#l||=new Map).set(t,n)}removeChangedExistingAnnotation({annotationElementId:t}){this.#l?.delete(t)}renderAnnotationElement(t){const n=this.#l?.get(t.data.id);if(!n)return;const s=this.#s.getRawValue(n);s&&(this.#w===vt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,n,s){const r=this.#N?.get(t);r&&(r.setCanvas(n,s),this.#N.delete(t))}addMissingCanvas(t,n){(this.#N||=new Map).set(t,n)}}class Un{#t=null;#e=!1;#n=null;#i=null;#a=null;#s=null;#l=!1;#o=null;#h=null;#c=null;#d=null;#u=!1;static#f=null;static _l10n=null;constructor(t){this.#h=t,this.#u=t._uiManager.useNewAltTextFlow,Un.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Un._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const n=this.#i=document.createElement("span");t.append(n),this.#u?(t.classList.add("new"),t.setAttribute("data-l10n-id",Un.#f.missing),n.setAttribute("data-l10n-id",Un.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#h._uiManager._signal;t.addEventListener("contextmenu",An,{signal:s}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const r=o=>{o.preventDefault(),this.#h._uiManager.editAltText(this.#h),this.#u&&this.#h._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#r}})};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#l=!0,r(o))},{signal:s}),await this.#p(),t}get#r(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#u?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#u?this.#t!==null||!!this.#c:this.isEmpty()}get guessedText(){return this.#c}async setGuessedText(t){this.#t===null&&(this.#c=t,this.#d=await Un._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#u||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const n=this.#o=document.createElement("div");n.className="noAltTextBadge",this.#h.div.append(n)}this.#o.classList.toggle("hidden",!t)}serialize(t){let n=this.#t;return!t&&this.#c===n&&(n=this.#d),{altText:n,decorative:this.#e,guessedText:this.#c,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:n,guessedText:s,textWithDisclaimer:r,cancel:o=!1}){s&&(this.#c=s,this.#d=r),!(this.#t===t&&this.#e===n)&&(o||(this.#t=t,this.#e=n),this.#p())}toggle(t=!1){this.#n&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!t)}shown(){this.#h._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#r}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#a=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#n;if(!t)return;if(this.#u){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Un.#f[this.#r]),this.#i?.setAttribute("data-l10n-id",Un.#f[`${this.#r}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=this.#a;if(!n){this.#a=n=document.createElement("span"),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${this.#h.id}`;const r=100,o=this.#h._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#a.classList.add("show"),this.#h._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#a?.classList.remove("show")},{signal:o})}this.#e?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=this.#t),n.parentNode||t.append(n),this.#h.getElementForAltText()?.setAttribute("aria-describedby",n.id)}}class Lr{#t;#e=!1;#n=null;#i;#a;#s;#l;#o=null;#h;#c=null;#d;#u=null;constructor({container:t,isPinchingDisabled:n=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:c=null,signal:h}){this.#t=t,this.#n=s,this.#i=n,this.#a=r,this.#s=o,this.#l=c,this.#d=new AbortController,this.#h=AbortSignal.any([h,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#h})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Tn.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#o)return;const r=this.#o=new AbortController,o=AbortSignal.any([this.#h,r.signal]),c=this.#t,h={capture:!0,signal:o,passive:!1},f=p=>{p.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};c.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(ie(p),f(p))},h),c.addEventListener("pointerup",f,h),c.addEventListener("pointercancel",f,h);return}if(!this.#u){this.#u=new AbortController;const r=AbortSignal.any([this.#h,this.#u.signal]),o=this.#t,c={signal:r,capture:!1,passive:!1};o.addEventListener("touchmove",this.#r.bind(this),c);const h=this.#p.bind(this);o.addEventListener("touchend",h,c),o.addEventListener("touchcancel",h,c),c.capture=!0,o.addEventListener("pointerdown",ie,c),o.addEventListener("pointermove",ie,c),o.addEventListener("pointercancel",ie,c),o.addEventListener("pointerup",ie,c),this.#a?.()}if(ie(t),t.touches.length!==2||this.#n?.()){this.#c=null;return}let[n,s]=t.touches;n.identifier>s.identifier&&([n,s]=[s,n]),this.#c={touch0X:n.screenX,touch0Y:n.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#r(t){if(!this.#c||t.touches.length!==2)return;ie(t);let[n,s]=t.touches;n.identifier>s.identifier&&([n,s]=[s,n]);const{screenX:r,screenY:o}=n,{screenX:c,screenY:h}=s,f=this.#c,{touch0X:p,touch0Y:g,touch1X:y,touch1Y:b}=f,A=y-p,S=b-g,E=c-r,w=h-o,T=Math.hypot(E,w)||1,L=Math.hypot(A,S)||1;if(!this.#e&&Math.abs(L-T)<=Lr.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(f.touch0X=r,f.touch0Y=o,f.touch1X=c,f.touch1Y=h,!this.#e){this.#e=!0;return}const R=[(r+c)/2,(o+h)/2];this.#s?.(R,L,T)}#p(t){t.touches.length>=2||(this.#u&&(this.#u.abort(),this.#u=null,this.#l?.()),this.#c&&(ie(t),this.#c=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class ut{#t=null;#e=null;#n=null;#i=!1;#a=null;#s="";#l=!1;#o=null;#h=null;#c=null;#d=null;#u="";#f=!1;#r=null;#p=!1;#m=!1;#g=!1;#y=null;#b=0;#v=0;#S=null;#_=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#T=!1;#R=ut._zIndex++;static _borderLineWidth=-1;static _colorManager=new Uh;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=ut.prototype._resizeWithKeyboard,n=ri.TRANSLATE_SMALL,s=ri.TRANSLATE_BIG;return Ct(this,"_resizerKeyboardManager",new Or([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],ut.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:n,rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[o,c];const[h,f]=this.parentDimensions;this.x=t.x/h,this.y=t.y/f,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Ct(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const n=new nA({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});n.annotationElementId=t.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(t,n){if(ut._l10n??=t,ut._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ut._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ut._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,n){It("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#T}set _isDraggable(t){this.#T=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(t*2),this.y+=this.width*t/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(t*2),this.y-=this.width*t/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#R}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#j(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,n,s,r){const[o,c]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(t+s)/o,this.y=(n+r)/c,this.fixAndSetPosition()}_moveAfterPaste(t,n){const[s,r]=this.parentDimensions;this.setAt(t*s,n*r,this.width*s,this.height*r),this._onTranslated()}#M([t,n],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/t,this.y+=r/n,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,n){this.#M(this.parentDimensions,t,n)}translateInPage(t,n){this.#r||=[this.x,this.y,this.width,this.height],this.#M(this.pageDimensions,t,n),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,n){this.#r||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[r,o]}=this;if(this.x+=t/r,this.y+=n/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:h}=this;const[f,p]=this.getBaseTranslation();c+=f,h+=p;const{style:g}=s;g.left=`${(100*c).toFixed(2)}%`,g.top=`${(100*h).toFixed(2)}%`,this._onTranslating(c,h),s.scrollIntoView({block:"nearest"})}_onTranslating(t,n){}_onTranslated(t,n){}get _hasBeenMoved(){return!!this.#r&&(this.#r[0]!==this.x||this.#r[1]!==this.y)}get _hasBeenResized(){return!!this.#r&&(this.#r[2]!==this.width||this.#r[3]!==this.height)}getBaseTranslation(){const[t,n]=this.parentDimensions,{_borderLineWidth:s}=ut,r=s/t,o=s/n;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:n},pageDimensions:[s,r]}=this;let{x:o,y:c,width:h,height:f}=this;if(h*=s,f*=r,o*=s,c*=r,this._mustFixPosition)switch(t){case 0:o=Ne(o,0,s-h),c=Ne(c,0,r-f);break;case 90:o=Ne(o,0,s-f),c=Ne(c,h,r);break;case 180:o=Ne(o,h,s),c=Ne(c,f,r);break;case 270:o=Ne(o,f,s),c=Ne(c,0,r-h);break}this.x=o/=s,this.y=c/=r;const[p,g]=this.getBaseTranslation();o+=p,c+=g,n.left=`${(100*o).toFixed(2)}%`,n.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#E(t,n,s){switch(s){case 90:return[n,-t];case 180:return[-t,-n];case 270:return[-n,t];default:return[t,n]}}screenToPageTranslation(t,n){return ut.#E(t,n,this.parentRotation)}pageTranslationToScreen(t,n){return ut.#E(t,n,360-this.parentRotation)}#C(t){switch(t){case 90:{const[n,s]=this.pageDimensions;return[0,-n/s,s/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,s]=this.pageDimensions;return[0,n/s,-s/n,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[n,s]}=this;return[n*t,s*t]}setDims(t,n){const[s,r]=this.parentDimensions,{style:o}=this.div;o.width=`${(100*t/s).toFixed(2)}%`,this.#l||(o.height=`${(100*n/r).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:n,width:s}=t,r=s.endsWith("%"),o=!this.#l&&n.endsWith("%");if(r&&o)return;const[c,h]=this.parentDimensions;r||(t.width=`${(100*parseFloat(s)/c).toFixed(2)}%`),!this.#l&&!o&&(t.height=`${(100*parseFloat(n)/h).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#x(){if(this.#o)return;this.#o=document.createElement("div"),this.#o.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const s of t){const r=document.createElement("div");this.#o.append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",this.#O.bind(this,s),{signal:n}),r.addEventListener("contextmenu",An,{signal:n}),r.tabIndex=-1}this.div.prepend(this.#o)}#O(t,n){n.preventDefault();const{isMac:s}=we.platform;if(n.button!==0||n.ctrlKey&&s)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#h=[n.screenX,n.screenY];const o=new AbortController,c=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#F.bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",ie,{passive:!1,signal:c}),window.addEventListener("contextmenu",An,{signal:c}),this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const h=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const p=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=h,this.div.style.cursor=f,this.#N()};window.addEventListener("pointerup",p,{signal:c}),window.addEventListener("blur",p,{signal:c})}#L(t,n,s,r){this.width=s,this.height=r,this.x=t,this.y=n;const[o,c]=this.parentDimensions;this.setDims(o*s,c*r),this.fixAndSetPosition(),this._onResized()}_onResized(){}#N(){if(!this.#c)return;const{savedX:t,savedY:n,savedWidth:s,savedHeight:r}=this.#c;this.#c=null;const o=this.x,c=this.y,h=this.width,f=this.height;o===t&&c===n&&h===s&&f===r||this.addCommands({cmd:this.#L.bind(this,o,c,h,f),undo:this.#L.bind(this,t,n,s,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#F(t,n){const[s,r]=this.parentDimensions,o=this.x,c=this.y,h=this.width,f=this.height,p=ut.MIN_SIZE/s,g=ut.MIN_SIZE/r,y=this.#C(this.rotation),b=(D,H)=>[y[0]*D+y[2]*H,y[1]*D+y[3]*H],A=this.#C(360-this.rotation),S=(D,H)=>[A[0]*D+A[2]*H,A[1]*D+A[3]*H];let E,w,T=!1,L=!1;switch(t){case"topLeft":T=!0,E=(D,H)=>[0,0],w=(D,H)=>[D,H];break;case"topMiddle":E=(D,H)=>[D/2,0],w=(D,H)=>[D/2,H];break;case"topRight":T=!0,E=(D,H)=>[D,0],w=(D,H)=>[0,H];break;case"middleRight":L=!0,E=(D,H)=>[D,H/2],w=(D,H)=>[0,H/2];break;case"bottomRight":T=!0,E=(D,H)=>[D,H],w=(D,H)=>[0,0];break;case"bottomMiddle":E=(D,H)=>[D/2,H],w=(D,H)=>[D/2,0];break;case"bottomLeft":T=!0,E=(D,H)=>[0,H],w=(D,H)=>[D,0];break;case"middleLeft":L=!0,E=(D,H)=>[0,H/2],w=(D,H)=>[D,H/2];break}const R=E(h,f),N=w(h,f);let C=b(...N);const U=ut._round(o+C[0]),z=ut._round(c+C[1]);let V=1,G=1,K,Z;if(n.fromKeyboard)({deltaX:K,deltaY:Z}=n);else{const{screenX:D,screenY:H}=n,[J,yt]=this.#h;[K,Z]=this.screenToPageTranslation(D-J,H-yt),this.#h[0]=D,this.#h[1]=H}if([K,Z]=S(K/s,Z/r),T){const D=Math.hypot(h,f);V=G=Math.max(Math.min(Math.hypot(N[0]-R[0]-K,N[1]-R[1]-Z)/D,1/h,1/f),p/h,g/f)}else L?V=Ne(Math.abs(N[0]-R[0]-K),p,1)/h:G=Ne(Math.abs(N[1]-R[1]-Z),g,1)/f;const st=ut._round(h*V),mt=ut._round(f*G);C=b(...w(st,mt));const lt=U-C[0],rt=z-C[1];this.#r||=[this.x,this.y,this.width,this.height],this.width=st,this.height=mt,this.x=lt,this.y=rt,this.setDims(s*st,r*mt),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}async addEditToolbar(){return this._editToolbar||this.#m?this._editToolbar:(this._editToolbar=new Ar(this),this.div.append(this._editToolbar.render()),this.#n&&await this._editToolbar.addAltText(this.#n),this._editToolbar)}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(t){const n=this._editToolbar?.div;n?n.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#n||(Un.initialize(ut._l10n),this.#n=new Un(this),this.#t&&(this.#n.data=this.#t,this.#t=null),await this.addEditToolbar())}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#i?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#q();const[n,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/n).toFixed(2)}%`,t.style.maxHeight=`${(100*n/s).toFixed(2)}%`);const[r,o]=this.getInitialTranslation();return this.translate(r,o),ny(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#_||=new Lr({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#w.bind(this),onPinching:this.#A.bind(this),onPinchEnd:this.#z.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),t}#w(){this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#A(t,n,s){let o=.7*(s/n)+1-.7;if(o===1)return;const c=this.#C(this.rotation),h=(U,z)=>[c[0]*U+c[2]*z,c[1]*U+c[3]*z],[f,p]=this.parentDimensions,g=this.x,y=this.y,b=this.width,A=this.height,S=ut.MIN_SIZE/f,E=ut.MIN_SIZE/p;o=Math.max(Math.min(o,1/b,1/A),S/b,E/A);const w=ut._round(b*o),T=ut._round(A*o);if(w===b&&T===A)return;this.#r||=[g,y,b,A];const L=h(b/2,A/2),R=ut._round(g+L[0]),N=ut._round(y+L[1]),C=h(w/2,T/2);this.x=R-C[0],this.y=N-C[1],this.width=w,this.height=T,this.setDims(f*w,p*T),this.fixAndSetPosition(),this._onResizing()}#z(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#N()}pointerdown(t){const{isMac:n}=we.platform;if(t.button!==0||t.ctrlKey&&n){t.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#G(t);return}this.#U(t)}#U(t){const{isMac:n}=we.platform;t.ctrlKey&&!n||t.shiftKey||t.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)}#G(t){const{isSelected:n}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),c={capture:!0,passive:!1,signal:o},h=p=>{r.abort(),this.#a=null,this.#f=!1,this._uiManager.endDragSession()||this.#U(p),s&&this._onStopDragging()};n&&(this.#b=t.clientX,this.#v=t.clientY,this.#a=t.pointerId,this.#s=t.pointerType,window.addEventListener("pointermove",p=>{s||(s=!0,this._onStartDragging());const{clientX:g,clientY:y,pointerId:b}=p;if(b!==this.#a){ie(p);return}const[A,S]=this.screenToPageTranslation(g-this.#b,y-this.#v);this.#b=g,this.#v=y,this._uiManager.dragSelectedEditors(A,S)},c),window.addEventListener("touchmove",ie,c),window.addEventListener("pointerdown",p=>{p.pointerType===this.#s&&(this.#_||p.isPrimary)&&h(p),ie(p)},c));const f=p=>{if(!this.#a||this.#a===p.pointerId){h(p);return}ie(p)};window.addEventListener("pointerup",f,{signal:o}),window.addEventListener("blur",f,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,n,s){t.changeParent(this),this.x=n,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,n,s=this.rotation){const r=this.parentScale,[o,c]=this.pageDimensions,[h,f]=this.pageTranslation,p=t/r,g=n/r,y=this.x*o,b=this.y*c,A=this.width*o,S=this.height*c;switch(s){case 0:return[y+p+h,c-b-g-S+f,y+p+A+h,c-b-g+f];case 90:return[y+g+h,c-b+p+f,y+g+S+h,c-b+p+A+f];case 180:return[y-p-A+h,c-b+g+f,y-p+h,c-b+g+S+f];case 270:return[y-g-S+h,c-b-p-A+f,y-g+h,c-b-p+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,n){const[s,r,o,c]=t,h=o-s,f=c-r;switch(this.rotation){case 0:return[s,n-c,h,f];case 90:return[s,n-r,f,h];case 180:return[o,n-r,h,f];case 270:return[o,n-c,f,h];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#m=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#m=!1,!0):!1}isInEditMode(){return this.#m}shouldGetKeyboardEvents(){return this.#g}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:n,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:c}=window;return n<c&&r>0&&t<o&&s>0}#q(){if(this.#d||!this.div)return;this.#d=new AbortController;const t=this._uiManager.combinedSignal(this.#d);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#q()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,n=null){It("An editor must be serializable")}static async deserialize(t,n,s){const r=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:s});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[o,c]=r.pageDimensions,[h,f,p,g]=r.getRectInCurrentCoords(t.rect,c);return r.x=h/o,r.y=f/c,r.width=p/o,r.height=g/c,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#d?.abort(),this.#d=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#j(),this.removeEditToolbar(),this.#S){for(const t of this.#S.values())clearTimeout(t);this.#S=null}this.parent=null,this.#_?.destroy(),this.#_=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#x(),this.#o.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const n=this.#o.children;if(!this.#e){this.#e=Array.from(n);const c=this.#V.bind(this),h=this.#I.bind(this),f=this._uiManager._signal;for(const p of this.#e){const g=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",c,{signal:f}),p.addEventListener("blur",h,{signal:f}),p.addEventListener("focus",this.#k.bind(this,g),{signal:f}),p.setAttribute("data-l10n-id",ut._l10nResizer[g])}}const s=this.#e[0];let r=0;for(const c of n){if(c===s)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==r){if(o<r)for(let h=0;h<r-o;h++)this.#o.append(this.#o.firstChild);else if(o>r)for(let h=0;h<o-r;h++)this.#o.firstChild.before(this.#o.lastChild);let c=0;for(const h of n){const p=this.#e[c++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",ut._l10nResizer[p])}}this.#P(0),this.#g=!0,this.#o.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#V(t){ut._resizerKeyboardManager.exec(this,t)}#I(t){this.#g&&t.relatedTarget?.parentNode!==this.#o&&this.#j()}#k(t){this.#u=this.#g?t:""}#P(t){if(this.#e)for(const n of this.#e)n.tabIndex=t}_resizeWithKeyboard(t,n){this.#g&&this.#F(this.#u,{deltaX:t,deltaY:n,fromKeyboard:!0})}#j(){this.#g=!1,this.#P(-1),this.#N()}_stopResizingWithKeyboard(){this.#j(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#o?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0))}updateParams(t,n){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,n){this.#l=!0;const s=t/n,{style:r}=this.div;r.aspectRatio=s,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,n=!1){if(n){this.#S||=new Map;const{action:s}=t;let r=this.#S.get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#S.delete(s),this.#S.size===0&&(this.#S=null)},ut._telemetryTimeout),this.#S.set(s,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(t){let n=t.container.querySelector(".annotationContent");if(!n)n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),t.container.prepend(n);else if(n.nodeName==="CANVAS"){const s=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),s.before(n)}return n}resetAnnotationElement(t){const{firstChild:n}=t.container;n?.nodeName==="DIV"&&n.classList.contains("annotationContent")&&n.remove()}}class nA extends ut{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const rm=3285377520,bn=4294901760,Pn=65535;class iy{constructor(t){this.h1=t?t&4294967295:rm,this.h2=t?t&4294967295:rm}update(t){let n,s;if(typeof t=="string"){n=new Uint8Array(t.length*2),s=0;for(let E=0,w=t.length;E<w;E++){const T=t.charCodeAt(E);T<=255?n[s++]=T:(n[s++]=T>>>8,n[s++]=T&255)}}else if(ArrayBuffer.isView(t))n=t.slice(),s=n.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,o=s-r*4,c=new Uint32Array(n.buffer,0,r);let h=0,f=0,p=this.h1,g=this.h2;const y=3432918353,b=461845907,A=y&Pn,S=b&Pn;for(let E=0;E<r;E++)E&1?(h=c[E],h=h*y&bn|h*A&Pn,h=h<<15|h>>>17,h=h*b&bn|h*S&Pn,p^=h,p=p<<13|p>>>19,p=p*5+3864292196):(f=c[E],f=f*y&bn|f*A&Pn,f=f<<15|f>>>17,f=f*b&bn|f*S&Pn,g^=f,g=g<<13|g>>>19,g=g*5+3864292196);switch(h=0,o){case 3:h^=n[r*4+2]<<16;case 2:h^=n[r*4+1]<<8;case 1:h^=n[r*4],h=h*y&bn|h*A&Pn,h=h<<15|h>>>17,h=h*b&bn|h*S&Pn,r&1?p^=h:g^=h}this.h1=p,this.h2=g}hexdigest(){let t=this.h1,n=this.h2;return t^=n>>>1,t=t*3981806797&bn|t*36045&Pn,n=n*4283543511&bn|((n<<16|t>>>16)*2950163797&bn)>>>16,t^=n>>>1,t=t*444984403&bn|t*60499&Pn,n=n*3301882366&bn|((n<<16|t>>>16)*3120437893&bn)>>>16,t^=n>>>1,(t>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const gh=Object.freeze({map:null,hash:"",transfer:void 0});class Hh{#t=!1;#e=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,n){const s=this.#n.get(t);return s===void 0?n:Object.assign(n,s)}getRawValue(t){return this.#n.get(t)}remove(t){if(this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const n of this.#n.values())if(n instanceof ut)return;this.onAnnotationEditor(null)}}setValue(t,n){const s=this.#n.get(t);let r=!1;if(s!==void 0)for(const[o,c]of Object.entries(n))s[o]!==c&&(r=!0,s[o]=c);else r=!0,this.#n.set(t,n);r&&this.#i(),n instanceof ut&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(n.constructor._type)}has(t){return this.#n.has(t)}get size(){return this.#n.size}#i(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new sy(this)}get serializable(){if(this.#n.size===0)return gh;const t=new Map,n=new iy,s=[],r=Object.create(null);let o=!1;for(const[c,h]of this.#n){const f=h instanceof ut?h.serialize(!1,r):h;f&&(t.set(c,f),n.update(`${c}:${JSON.stringify(f)}`),o||=!!f.bitmap)}if(o)for(const c of t.values())c.bitmap&&s.push(c.bitmap);return t.size>0?{map:t,hash:n.hexdigest(),transfer:s}:gh}get editorStats(){let t=null;const n=new Map;for(const s of this.#n.values()){if(!(s instanceof ut))continue;const r=s.telemetryFinalData;if(!r)continue;const{type:o}=r;n.has(o)||n.set(o,Object.getPrototypeOf(s).constructor),t||=Object.create(null);const c=t[o]||=new Map;for(const[h,f]of Object.entries(r)){if(h==="type")continue;let p=c.get(h);p||(p=new Map,c.set(h,p));const g=p.get(f)??0;p.set(f,g+1)}}for(const[s,r]of n)t[s]=r.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const n of this.#n.values())!(n instanceof ut)||!n.annotationElementId||!n.serialize()||t.push(n.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class sy extends Hh{#t;constructor(t){super();const{map:n,hash:s,transfer:r}=t.serializable,o=structuredClone(n,r?{transfer:r}:null);this.#t={map:o,hash:s,transfer:r}}get print(){It("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Ct(this,"modifiedIds",{ids:new Set,hash:""})}}class iA{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:n=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(t,n.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:n,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(he(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:o,style:c}=t,h=new FontFace(r,o,c);this.addNativeFontFace(h);try{await h.load(),this.#t.add(r),s?.(t)}catch{At(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}It("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw At(`Failed to load font '${s.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const n=t.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Ct(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Ct(this,"isSyncFontLoadingSupported",ze||we.platform.isFirefox)}_queueLoadingCallback(t){function n(){for(he(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:n,callback:t};return s.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ct(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,n){function s(N,C){return N.charCodeAt(C)<<24|N.charCodeAt(C+1)<<16|N.charCodeAt(C+2)<<8|N.charCodeAt(C+3)&255}function r(N,C,U,z){const V=N.substring(0,C),G=N.substring(C+U);return V+z+G}let o,c;const h=this._document.createElement("canvas");h.width=1,h.height=1;const f=h.getContext("2d");let p=0;function g(N,C){if(++p>30){At("Load test font never loaded."),C();return}if(f.font="30px "+N,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){C();return}setTimeout(g.bind(null,N,C))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=r(b,976,y.length,y);const S=16,E=1482184792;let w=s(b,S);for(o=0,c=y.length-3;o<c;o+=4)w=w-E+s(y,o)|0;o<y.length&&(w=w-E+s(y+"XXX",o)|0),b=r(b,S,4,Vv(w));const T=`url(data:font/opentype;base64,${btoa(b)});`,L=`@font-face {font-family:"${y}";src:${T}}`;this.insertRule(L);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const N of[t.loadedName,y]){const C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=N,R.append(C)}this._document.body.append(R),g(y,()=>{R.remove(),n.complete()})}}class sA{constructor(t,n=null){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this._inspectFont=n}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Zm(this.data)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),n}getPathGenerator(t,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];const s=this.loadedName+"_path_"+n;let r;try{r=t.get(s)}catch(c){At(`getPathGenerator - ignoring character: "${c}".`)}const o=new Path2D(r||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[n]=o}}function aA(u){if(u instanceof URL)return u.href;if(typeof u=="string"){if(ze)return u;const t=URL.parse(u,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function rA(u){if(ze&&typeof Buffer<"u"&&u instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(u instanceof Uint8Array&&u.byteLength===u.buffer.byteLength)return u;if(typeof u=="string")return Cr(u);if(u instanceof ArrayBuffer||ArrayBuffer.isView(u)||typeof u=="object"&&!isNaN(u?.length))return new Uint8Array(u);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function nl(u){if(typeof u!="string")return null;if(u.endsWith("/"))return u;throw new Error(`Invalid factory url: "${u}" must include trailing slash.`)}const mh=u=>typeof u=="object"&&Number.isInteger(u?.num)&&u.num>=0&&Number.isInteger(u?.gen)&&u.gen>=0,oA=u=>typeof u=="object"&&typeof u?.name=="string",ay=Kv.bind(null,mh,oA);class lA{#t=new Map;#e=Promise.resolve();postMessage(t,n){const s={data:structuredClone(t,n?{transfer:n}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,s)})}addEventListener(t,n,s=null){let r=null;if(s?.signal instanceof AbortSignal){const{signal:o}=s;if(o.aborted){At("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,n);r=()=>o.removeEventListener("abort",c),o.addEventListener("abort",c)}this.#t.set(n,r)}removeEventListener(t,n){this.#t.get(n)?.(),this.#t.delete(n)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const il={DATA:1,ERROR:2},ue={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function om(){}function Xe(u){if(u instanceof ai||u instanceof fl||u instanceof im||u instanceof Er||u instanceof ih)return u;switch(u instanceof Error||typeof u=="object"&&u!==null||It('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),u.name){case"AbortException":return new ai(u.message);case"InvalidPDFException":return new fl(u.message);case"PasswordException":return new im(u.message,u.code);case"ResponseException":return new Er(u.message,u.status,u.missing);case"UnknownErrorException":return new ih(u.message,u.details)}return new ih(u.message,u.toString())}class yr{#t=new AbortController;constructor(t,n,s){this.sourceName=t,this.targetName=n,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const s=t.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===il.DATA)r.resolve(t.data);else if(t.callback===il.ERROR)r.reject(Xe(t.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[t.action];if(!n)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,r=t.sourceName,o=this.comObj;Promise.try(n,t.data).then(function(c){o.postMessage({sourceName:s,targetName:r,callback:il.DATA,callbackId:t.callbackId,data:c})},function(c){o.postMessage({sourceName:s,targetName:r,callback:il.ERROR,callbackId:t.callbackId,reason:Xe(c)})});return}if(t.streamId){this.#n(t);return}n(t.data)}on(t,n){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=n}send(t,n,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:n},s)}sendWithPromise(t,n,s){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:n},s)}catch(c){o.reject(c)}return o.promise}sendWithStream(t,n,s,r){const o=this.streamId++,c=this.sourceName,h=this.targetName,f=this.comObj;return new ReadableStream({start:p=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:p,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:c,targetName:h,action:t,streamId:o,data:n,desiredSize:p.desiredSize},r),g.promise},pull:p=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,f.postMessage({sourceName:c,targetName:h,stream:ue.PULL,streamId:o,desiredSize:p.desiredSize}),g.promise},cancel:p=>{he(p instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,f.postMessage({sourceName:c,targetName:h,stream:ue.CANCEL,streamId:o,reason:Xe(p)}),g.promise}},s)}#n(t){const n=t.streamId,s=this.sourceName,r=t.sourceName,o=this.comObj,c=this,h=this.actionHandler[t.action],f={enqueue(p,g=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=g,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:r,stream:ue.ENQUEUE,streamId:n,chunk:p},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:ue.CLOSE,streamId:n}),delete c.streamSinks[n])},error(p){he(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:ue.ERROR,streamId:n,reason:Xe(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[n]=f,Promise.try(h,t.data,f).then(function(){o.postMessage({sourceName:s,targetName:r,stream:ue.START_COMPLETE,streamId:n,success:!0})},function(p){o.postMessage({sourceName:s,targetName:r,stream:ue.START_COMPLETE,streamId:n,reason:Xe(p)})})}#i(t){const n=t.streamId,s=this.sourceName,r=t.sourceName,o=this.comObj,c=this.streamControllers[n],h=this.streamSinks[n];switch(t.stream){case ue.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(Xe(t.reason));break;case ue.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(Xe(t.reason));break;case ue.PULL:if(!h){o.postMessage({sourceName:s,targetName:r,stream:ue.PULL_COMPLETE,streamId:n,success:!0});break}h.desiredSize<=0&&t.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=t.desiredSize,Promise.try(h.onPull||om).then(function(){o.postMessage({sourceName:s,targetName:r,stream:ue.PULL_COMPLETE,streamId:n,success:!0})},function(p){o.postMessage({sourceName:s,targetName:r,stream:ue.PULL_COMPLETE,streamId:n,reason:Xe(p)})});break;case ue.ENQUEUE:if(he(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case ue.CLOSE:if(he(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#a(c,n);break;case ue.ERROR:he(c,"error should have stream controller"),c.controller.error(Xe(t.reason)),this.#a(c,n);break;case ue.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(Xe(t.reason)),this.#a(c,n);break;case ue.CANCEL:if(!h)break;const f=Xe(t.reason);Promise.try(h.onCancel||om,f).then(function(){o.postMessage({sourceName:s,targetName:r,stream:ue.CANCEL_COMPLETE,streamId:n,success:!0})},function(p){o.postMessage({sourceName:s,targetName:r,stream:ue.CANCEL_COMPLETE,streamId:n,reason:Xe(p)})}),h.sinkCapability.reject(f),h.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}}async#a(t,n){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[n]}destroy(){this.#t?.abort(),this.#t=null}}class ry{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,n){if(t<=0||n<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,n);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,n,s){if(!t.canvas)throw new Error("Canvas is not specified");if(n<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=n,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,n){It("Abstract method `_createCanvas` called.")}}class cA extends ry{constructor({ownerDocument:t=globalThis.document,enableHWA:n=!1}){super({enableHWA:n}),this._document=t}_createCanvas(t,n){const s=this._document.createElement("canvas");return s.width=t,s.height=n,s}}class oy{constructor({baseUrl:t=null,isCompressed:n=!0}){this.baseUrl=t,this.isCompressed=n}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}async _fetch(t){It("Abstract method `_fetch` called.")}}class lm extends oy{async _fetch(t){const n=await ca(t,this.isCompressed?"arraybuffer":"text");return n instanceof ArrayBuffer?new Uint8Array(n):Cr(n)}}class ly{addFilter(t){return"none"}addHCMFilter(t,n){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,n,s,r,o){return"none"}destroy(t=!1){}}class uA extends ly{#t;#e;#n;#i;#a;#s;#l=0;constructor({docId:t,ownerDocument:n=globalThis.document}){super(),this.#i=t,this.#a=n}get#o(){return this.#e||=new Map}get#h(){return this.#s||=new Map}get#c(){if(!this.#n){const t=this.#a.createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=this.#a.createElementNS(ii,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#n=this.#a.createElementNS(ii,"defs"),t.append(s),s.append(this.#n),this.#a.body.append(t)}return this.#n}#d(t){if(t.length===1){const f=t[0],p=new Array(256);for(let y=0;y<256;y++)p[y]=f[y]/255;const g=p.join(",");return[g,g,g]}const[n,s,r]=t,o=new Array(256),c=new Array(256),h=new Array(256);for(let f=0;f<256;f++)o[f]=n[f]/255,c[f]=s[f]/255,h[f]=r[f]/255;return[o.join(","),c.join(","),h.join(",")]}#u(t){if(this.#t===void 0){this.#t="";const n=this.#a.URL;n!==this.#a.baseURI&&(Dr(n)?At('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Lh(n,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let n=this.#o.get(t);if(n)return n;const[s,r,o]=this.#d(t),c=t.length===1?s:`${s}${r}${o}`;if(n=this.#o.get(c),n)return this.#o.set(t,n),n;const h=`g_${this.#i}_transfer_map_${this.#l++}`,f=this.#u(h);this.#o.set(t,f),this.#o.set(c,f);const p=this.#p(h);return this.#g(s,r,o,p),f}addHCMFilter(t,n){const s=`${t}-${n}`,r="base";let o=this.#h.get(r);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#h.set(r,o)),!t||!n))return o.url;const c=this.#b(t);t=ct.makeHexColor(...c);const h=this.#b(n);if(n=ct.makeHexColor(...h),this.#c.style.color="",t==="#000000"&&n==="#ffffff"||t===n)return o.url;const f=new Array(256);for(let A=0;A<=255;A++){const S=A/255;f[A]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const p=f.join(","),g=`g_${this.#i}_hcm_filter`,y=o.filter=this.#p(g);this.#g(p,p,p,y),this.#r(y);const b=(A,S)=>{const E=c[A]/255,w=h[A]/255,T=new Array(S+1);for(let L=0;L<=S;L++)T[L]=E+L/S*(w-E);return T.join(",")};return this.#g(b(0,5),b(1,5),b(2,5),y),o.url=this.#u(g),o.url}addAlphaFilter(t){let n=this.#o.get(t);if(n)return n;const[s]=this.#d([t]),r=`alpha_${s}`;if(n=this.#o.get(r),n)return this.#o.set(t,n),n;const o=`g_${this.#i}_alpha_map_${this.#l++}`,c=this.#u(o);this.#o.set(t,c),this.#o.set(r,c);const h=this.#p(o);return this.#y(s,h),c}addLuminosityFilter(t){let n=this.#o.get(t||"luminosity");if(n)return n;let s,r;if(t?([s]=this.#d([t]),r=`luminosity_${s}`):r="luminosity",n=this.#o.get(r),n)return this.#o.set(t,n),n;const o=`g_${this.#i}_luminosity_map_${this.#l++}`,c=this.#u(o);this.#o.set(t,c),this.#o.set(r,c);const h=this.#p(o);return this.#f(h),t&&this.#y(s,h),c}addHighlightHCMFilter(t,n,s,r,o){const c=`${n}-${s}-${r}-${o}`;let h=this.#h.get(t);if(h?.key===c||(h?(h.filter?.remove(),h.key=c,h.url="none",h.filter=null):(h={key:c,url:"none",filter:null},this.#h.set(t,h)),!n||!s))return h.url;const[f,p]=[n,s].map(this.#b.bind(this));let g=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[b,A]=[r,o].map(this.#b.bind(this));y<g&&([g,y,b,A]=[y,g,A,b]),this.#c.style.color="";const S=(T,L,R)=>{const N=new Array(256),C=(y-g)/R,U=T/255,z=(L-T)/(255*R);let V=0;for(let G=0;G<=R;G++){const K=Math.round(g+G*C),Z=U+G*z;for(let st=V;st<=K;st++)N[st]=Z;V=K+1}for(let G=V;G<256;G++)N[G]=N[V-1];return N.join(",")},E=`g_${this.#i}_hcm_${t}_filter`,w=h.filter=this.#p(E);return this.#r(w),this.#g(S(b[0],A[0],5),S(b[1],A[1],5),S(b[2],A[2],5),w),h.url=this.#u(E),h.url}destroy(t=!1){t&&this.#s?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#l=0)}#f(t){const n=this.#a.createElementNS(ii,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)}#r(t){const n=this.#a.createElementNS(ii,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)}#p(t){const n=this.#a.createElementNS(ii,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),this.#c.append(n),n}#m(t,n,s){const r=this.#a.createElementNS(ii,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)}#g(t,n,s,r){const o=this.#a.createElementNS(ii,"feComponentTransfer");r.append(o),this.#m(o,"feFuncR",t),this.#m(o,"feFuncG",n),this.#m(o,"feFuncB",s)}#y(t,n){const s=this.#a.createElementNS(ii,"feComponentTransfer");n.append(s),this.#m(s,"feFuncA",t)}#b(t){return this.#c.style.color=t,Bh(getComputedStyle(this.#c).getPropertyValue("color"))}}class cy{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${t}`;return this._fetch(n).catch(s=>{throw new Error(`Unable to load font data at: ${n}`)})}async _fetch(t){It("Abstract method `_fetch` called.")}}class cm extends cy{async _fetch(t){const n=await ca(t,"arraybuffer");return new Uint8Array(n)}}class uy{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const n=`${this.baseUrl}${t}`;return this._fetch(n).catch(s=>{throw new Error(`Unable to load wasm data at: ${n}`)})}async _fetch(t){It("Abstract method `_fetch` called.")}}class um extends uy{async _fetch(t){const n=await ca(t,"arraybuffer");return new Uint8Array(n)}}ze&&At("Please use the `legacy` build in Node.js environments.");async function Fh(u){const n=await process.getBuiltinModule("fs").promises.readFile(u);return new Uint8Array(n)}class hA extends ly{}class dA extends ry{_createCanvas(t,n){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,n)}}class fA extends oy{async _fetch(t){return Fh(t)}}class pA extends cy{async _fetch(t){return Fh(t)}}class gA extends uy{async _fetch(t){return Fh(t)}}const Ce={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function yh(u,t){if(!t)return;const n=t[2]-t[0],s=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],n,s),u.clip(r)}class Ih{isModifyingCurrentTransform(){return!1}getPattern(){It("Abstract method `getPattern` called.")}}class mA extends Ih{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let n;this._type==="axial"?n=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(n=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)n.addColorStop(s[0],s[1]);return n}getPattern(t,n,s,r){let o;if(r===Ce.STROKE||r===Ce.FILL){const c=n.current.getClippedPathBoundingBox(r,Qt(t))||[0,0,0,0],h=Math.ceil(c[2]-c[0])||1,f=Math.ceil(c[3]-c[1])||1,p=n.cachedCanvases.getCanvas("pattern",h,f),g=p.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-c[0],-c[1]),s=ct.transform(s,[1,0,0,1,c[0],c[1]]),g.transform(...n.baseTransform),this.matrix&&g.transform(...this.matrix),yh(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=t.createPattern(p.canvas,"no-repeat");const y=new DOMMatrix(s);o.setTransform(y)}else yh(t,this._bbox),o=this._createGradient(t);return o}}function rh(u,t,n,s,r,o,c,h){const f=t.coords,p=t.colors,g=u.data,y=u.width*4;let b;f[n+1]>f[s+1]&&(b=n,n=s,s=b,b=o,o=c,c=b),f[s+1]>f[r+1]&&(b=s,s=r,r=b,b=c,c=h,h=b),f[n+1]>f[s+1]&&(b=n,n=s,s=b,b=o,o=c,c=b);const A=(f[n]+t.offsetX)*t.scaleX,S=(f[n+1]+t.offsetY)*t.scaleY,E=(f[s]+t.offsetX)*t.scaleX,w=(f[s+1]+t.offsetY)*t.scaleY,T=(f[r]+t.offsetX)*t.scaleX,L=(f[r+1]+t.offsetY)*t.scaleY;if(S>=L)return;const R=p[o],N=p[o+1],C=p[o+2],U=p[c],z=p[c+1],V=p[c+2],G=p[h],K=p[h+1],Z=p[h+2],st=Math.round(S),mt=Math.round(L);let lt,rt,D,H,J,yt,M,X;for(let W=st;W<=mt;W++){if(W<w){const Et=W<S?0:(S-W)/(S-w);lt=A-(A-E)*Et,rt=R-(R-U)*Et,D=N-(N-z)*Et,H=C-(C-V)*Et}else{let Et;W>L?Et=1:w===L?Et=0:Et=(w-W)/(w-L),lt=E-(E-T)*Et,rt=U-(U-G)*Et,D=z-(z-K)*Et,H=V-(V-Z)*Et}let Q;W<S?Q=0:W>L?Q=1:Q=(S-W)/(S-L),J=A-(A-T)*Q,yt=R-(R-G)*Q,M=N-(N-K)*Q,X=C-(C-Z)*Q;const nt=Math.round(Math.min(lt,J)),pt=Math.round(Math.max(lt,J));let at=y*W+nt*4;for(let Et=nt;Et<=pt;Et++)Q=(lt-Et)/(lt-J),Q<0?Q=0:Q>1&&(Q=1),g[at++]=rt-(rt-yt)*Q|0,g[at++]=D-(D-M)*Q|0,g[at++]=H-(H-X)*Q|0,g[at++]=255}}function yA(u,t,n){const s=t.coords,r=t.colors;let o,c;switch(t.type){case"lattice":const h=t.verticesPerRow,f=Math.floor(s.length/h)-1,p=h-1;for(o=0;o<f;o++){let g=o*h;for(let y=0;y<p;y++,g++)rh(u,n,s[g],s[g+1],s[g+h],r[g],r[g+1],r[g+h]),rh(u,n,s[g+h+1],s[g+1],s[g+h],r[g+h+1],r[g+1],r[g+h])}break;case"triangles":for(o=0,c=s.length;o<c;o+=3)rh(u,n,s[o],s[o+1],s[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class bA extends Ih{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,n,s){const h=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-h,g=Math.ceil(this._bounds[3])-f,y=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),A=p/y,S=g/b,E={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-f,scaleX:1/A,scaleY:1/S},w=y+2*2,T=b+2*2,L=s.getCanvas("mesh",w,T),R=L.context,N=R.createImageData(y,b);if(n){const U=N.data;for(let z=0,V=U.length;z<V;z+=4)U[z]=n[0],U[z+1]=n[1],U[z+2]=n[2],U[z+3]=255}for(const U of this._figures)yA(N,U,E);return R.putImageData(N,2,2),{canvas:L.canvas,offsetX:h-2*A,offsetY:f-2*S,scaleX:A,scaleY:S}}isModifyingCurrentTransform(){return!0}getPattern(t,n,s,r){yh(t,this._bbox);const o=new Float32Array(2);if(r===Ce.SHADING)ct.singularValueDecompose2dScale(Qt(t),o);else if(this.matrix){ct.singularValueDecompose2dScale(this.matrix,o);const[h,f]=o;ct.singularValueDecompose2dScale(n.baseTransform,o),o[0]*=h,o[1]*=f}else ct.singularValueDecompose2dScale(n.baseTransform,o);const c=this._createMeshCanvas(o,r===Ce.SHADING?null:this._background,n.cachedCanvases);return r!==Ce.SHADING&&(t.setTransform(...n.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class vA extends Ih{getPattern(){return"hotpink"}}function AA(u){switch(u[0]){case"RadialAxial":return new mA(u);case"Mesh":return new bA(u);case"Dummy":return new vA}throw new Error(`Unknown IR type: ${u[0]}`)}const hm={COLORED:1,UNCOLORED:2};class jh{static MAX_PATTERN_SIZE=3e3;constructor(t,n,s,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t){const{bbox:n,operatorList:s,paintType:r,tilingType:o,color:c,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),vl("TilingType: "+o);const g=n[0],y=n[1],b=n[2],A=n[3],S=b-g,E=A-y,w=new Float32Array(2);ct.singularValueDecompose2dScale(this.matrix,w);const[T,L]=w;ct.singularValueDecompose2dScale(this.baseTransform,w);const R=T*w[0],N=L*w[1];let C=S,U=E,z=!1,V=!1;const G=Math.ceil(f*R),K=Math.ceil(p*N),Z=Math.ceil(S*R),st=Math.ceil(E*N);G>=Z?C=f:z=!0,K>=st?U=p:V=!0;const mt=this.getSizeAndScale(C,this.ctx.canvas.width,R),lt=this.getSizeAndScale(U,this.ctx.canvas.height,N),rt=t.cachedCanvases.getCanvas("pattern",mt.size,lt.size),D=rt.context,H=h.createCanvasGraphics(D);if(H.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(H,r,c),D.translate(-mt.scale*g,-lt.scale*y),H.transform(mt.scale,0,0,lt.scale,0,0),D.save(),this.clipBbox(H,g,y,b,A),H.baseTransform=Qt(H.ctx),H.executeOperatorList(s),H.endDrawing(),D.restore(),z||V){const J=rt.canvas;z&&(C=f),V&&(U=p);const yt=this.getSizeAndScale(C,this.ctx.canvas.width,R),M=this.getSizeAndScale(U,this.ctx.canvas.height,N),X=yt.size,W=M.size,Q=t.cachedCanvases.getCanvas("pattern-workaround",X,W),nt=Q.context,pt=z?Math.floor(S/f):0,at=V?Math.floor(E/p):0;for(let Et=0;Et<=pt;Et++)for(let Dt=0;Dt<=at;Dt++)nt.drawImage(J,X*Et,W*Dt,X,W,0,0,X,W);return{canvas:Q.canvas,scaleX:yt.scale,scaleY:M.scale,offsetX:g,offsetY:y}}return{canvas:rt.canvas,scaleX:mt.scale,scaleY:lt.scale,offsetX:g,offsetY:y}}getSizeAndScale(t,n,s){const r=Math.max(jh.MAX_PATTERN_SIZE,n);let o=Math.ceil(t*s);return o>=r?o=r:s=o/t,{scale:s,size:o}}clipBbox(t,n,s,r,o){const c=r-n,h=o-s;t.ctx.rect(n,s,c,h),ct.axialAlignedBoundingBox([n,s,r,o],Qt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,n,s){const r=t.ctx,o=t.current;switch(n){case hm.COLORED:const{fillStyle:c,strokeStyle:h}=this.ctx;r.fillStyle=o.fillColor=c,r.strokeStyle=o.strokeColor=h;break;case hm.UNCOLORED:r.fillStyle=r.strokeStyle=s,o.fillColor=o.strokeColor=s;break;default:throw new qv(`Unsupported paint type: ${n}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,n,s,r){let o=s;r!==Ce.SHADING&&(o=ct.transform(o,n.baseTransform),this.matrix&&(o=ct.transform(o,this.matrix)));const c=this.createPatternCanvas(n);let h=new DOMMatrix(o);h=h.translate(c.offsetX,c.offsetY),h=h.scale(1/c.scaleX,1/c.scaleY);const f=t.createPattern(c.canvas,"repeat");return f.setTransform(h),f}}function SA({src:u,srcPos:t=0,dest:n,width:s,height:r,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const h=we.isLittleEndian?4278190080:255,[f,p]=c?[o,h]:[h,o],g=s>>3,y=s&7,b=u.length;n=new Uint32Array(n.buffer);let A=0;for(let S=0;S<r;S++){for(const w=t+g;t<w;t++){const T=t<b?u[t]:255;n[A++]=T&128?p:f,n[A++]=T&64?p:f,n[A++]=T&32?p:f,n[A++]=T&16?p:f,n[A++]=T&8?p:f,n[A++]=T&4?p:f,n[A++]=T&2?p:f,n[A++]=T&1?p:f}if(y===0)continue;const E=t<b?u[t++]:255;for(let w=0;w<y;w++)n[A++]=E&1<<7-w?p:f}return{srcPos:t,destPos:A}}const dm=16,fm=100,EA=15,pm=10,Ye=16,oh=new DOMMatrix,ln=new Float32Array(2),ea=new Float32Array([1/0,1/0,-1/0,-1/0]);function _A(u,t){if(u._removeMirroring)throw new Error("Context is already forwarding operations.");u.__originalSave=u.save,u.__originalRestore=u.restore,u.__originalRotate=u.rotate,u.__originalScale=u.scale,u.__originalTranslate=u.translate,u.__originalTransform=u.transform,u.__originalSetTransform=u.setTransform,u.__originalResetTransform=u.resetTransform,u.__originalClip=u.clip,u.__originalMoveTo=u.moveTo,u.__originalLineTo=u.lineTo,u.__originalBezierCurveTo=u.bezierCurveTo,u.__originalRect=u.rect,u.__originalClosePath=u.closePath,u.__originalBeginPath=u.beginPath,u._removeMirroring=()=>{u.save=u.__originalSave,u.restore=u.__originalRestore,u.rotate=u.__originalRotate,u.scale=u.__originalScale,u.translate=u.__originalTranslate,u.transform=u.__originalTransform,u.setTransform=u.__originalSetTransform,u.resetTransform=u.__originalResetTransform,u.clip=u.__originalClip,u.moveTo=u.__originalMoveTo,u.lineTo=u.__originalLineTo,u.bezierCurveTo=u.__originalBezierCurveTo,u.rect=u.__originalRect,u.closePath=u.__originalClosePath,u.beginPath=u.__originalBeginPath,delete u._removeMirroring},u.save=function(){t.save(),this.__originalSave()},u.restore=function(){t.restore(),this.__originalRestore()},u.translate=function(n,s){t.translate(n,s),this.__originalTranslate(n,s)},u.scale=function(n,s){t.scale(n,s),this.__originalScale(n,s)},u.transform=function(n,s,r,o,c,h){t.transform(n,s,r,o,c,h),this.__originalTransform(n,s,r,o,c,h)},u.setTransform=function(n,s,r,o,c,h){t.setTransform(n,s,r,o,c,h),this.__originalSetTransform(n,s,r,o,c,h)},u.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},u.rotate=function(n){t.rotate(n),this.__originalRotate(n)},u.clip=function(n){t.clip(n),this.__originalClip(n)},u.moveTo=function(n,s){t.moveTo(n,s),this.__originalMoveTo(n,s)},u.lineTo=function(n,s){t.lineTo(n,s),this.__originalLineTo(n,s)},u.bezierCurveTo=function(n,s,r,o,c,h){t.bezierCurveTo(n,s,r,o,c,h),this.__originalBezierCurveTo(n,s,r,o,c,h)},u.rect=function(n,s,r,o){t.rect(n,s,r,o),this.__originalRect(n,s,r,o)},u.closePath=function(){t.closePath(),this.__originalClosePath()},u.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class wA{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,n,s){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,n,s)):(r=this.canvasFactory.create(n,s),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const n=this.cache[t];this.canvasFactory.destroy(n),delete this.cache[t]}}}function sl(u,t,n,s,r,o,c,h,f,p){const[g,y,b,A,S,E]=Qt(u);if(y===0&&b===0){const L=c*g+S,R=Math.round(L),N=h*A+E,C=Math.round(N),U=(c+f)*g+S,z=Math.abs(Math.round(U)-R)||1,V=(h+p)*A+E,G=Math.abs(Math.round(V)-C)||1;return u.setTransform(Math.sign(g),0,0,Math.sign(A),R,C),u.drawImage(t,n,s,r,o,0,0,z,G),u.setTransform(g,y,b,A,S,E),[z,G]}if(g===0&&A===0){const L=h*b+S,R=Math.round(L),N=c*y+E,C=Math.round(N),U=(h+p)*b+S,z=Math.abs(Math.round(U)-R)||1,V=(c+f)*y+E,G=Math.abs(Math.round(V)-C)||1;return u.setTransform(0,Math.sign(y),Math.sign(b),0,R,C),u.drawImage(t,n,s,r,o,0,0,G,z),u.setTransform(g,y,b,A,S,E),[G,z]}u.drawImage(t,n,s,r,o,c,h,f,p);const w=Math.hypot(g,y),T=Math.hypot(b,A);return[w*f,T*p]}class gm{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=ph;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Le.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,n){this.clipBox=new Float32Array([0,0,t,n]),this.minMax=ea.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Ce.FILL,n=null){const s=this.minMax.slice();if(t===Ce.STROKE){n||It("Stroke bounding box must include transform."),ct.singularValueDecompose2dScale(n,ln);const r=ln[0]*this.lineWidth/2,o=ln[1]*this.lineWidth/2;s[0]-=r,s[1]-=o,s[2]+=r,s[3]+=o}return s}updateClipFromPath(){const t=ct.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ea,0)}getClippedPathBoundingBox(t=Ce.FILL,n=null){return ct.intersect(this.clipBox,this.getPathBoundingBox(t,n))}}function mm(u,t){if(t instanceof ImageData){u.putImageData(t,0,0);return}const n=t.height,s=t.width,r=n%Ye,o=(n-r)/Ye,c=r===0?o:o+1,h=u.createImageData(s,Ye);let f=0,p;const g=t.data,y=h.data;let b,A,S,E;if(t.kind===vr.GRAYSCALE_1BPP){const w=g.byteLength,T=new Uint32Array(y.buffer,0,y.byteLength>>2),L=T.length,R=s+7>>3,N=4294967295,C=we.isLittleEndian?4278190080:255;for(b=0;b<c;b++){for(S=b<o?Ye:r,p=0,A=0;A<S;A++){const U=w-f;let z=0;const V=U>R?s:U*8-7,G=V&-8;let K=0,Z=0;for(;z<G;z+=8)Z=g[f++],T[p++]=Z&128?N:C,T[p++]=Z&64?N:C,T[p++]=Z&32?N:C,T[p++]=Z&16?N:C,T[p++]=Z&8?N:C,T[p++]=Z&4?N:C,T[p++]=Z&2?N:C,T[p++]=Z&1?N:C;for(;z<V;z++)K===0&&(Z=g[f++],K=128),T[p++]=Z&K?N:C,K>>=1}for(;p<L;)T[p++]=0;u.putImageData(h,0,b*Ye)}}else if(t.kind===vr.RGBA_32BPP){for(A=0,E=s*Ye*4,b=0;b<o;b++)y.set(g.subarray(f,f+E)),f+=E,u.putImageData(h,0,A),A+=Ye;b<c&&(E=s*r*4,y.set(g.subarray(f,f+E)),u.putImageData(h,0,A))}else if(t.kind===vr.RGB_24BPP)for(S=Ye,E=s*S,b=0;b<c;b++){for(b>=o&&(S=r,E=s*S),p=0,A=E;A--;)y[p++]=g[f++],y[p++]=g[f++],y[p++]=g[f++],y[p++]=255;u.putImageData(h,0,b*Ye)}else throw new Error(`bad image kind: ${t.kind}`)}function ym(u,t){if(t.bitmap){u.drawImage(t.bitmap,0,0);return}const n=t.height,s=t.width,r=n%Ye,o=(n-r)/Ye,c=r===0?o:o+1,h=u.createImageData(s,Ye);let f=0;const p=t.data,g=h.data;for(let y=0;y<c;y++){const b=y<o?Ye:r;({srcPos:f}=SA({src:p,srcPos:f,dest:g,width:s,height:b,nonBlackColor:0})),u.putImageData(h,0,y*Ye)}}function hr(u,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of n)u[s]!==void 0&&(t[s]=u[s]);u.setLineDash!==void 0&&(t.setLineDash(u.getLineDash()),t.lineDashOffset=u.lineDashOffset)}function al(u){u.strokeStyle=u.fillStyle="#000000",u.fillRule="nonzero",u.globalAlpha=1,u.lineWidth=1,u.lineCap="butt",u.lineJoin="miter",u.miterLimit=10,u.globalCompositeOperation="source-over",u.font="10px sans-serif",u.setLineDash!==void 0&&(u.setLineDash([]),u.lineDashOffset=0);const{filter:t}=u;t!=="none"&&t!==""&&(u.filter="none")}function bm(u,t){if(t)return!0;ct.singularValueDecompose2dScale(u,ln);const n=Math.fround(Tn.pixelRatio*ls.PDF_TO_CSS_UNITS);return ln[0]<=n&&ln[1]<=n}const TA=["butt","round","square"],xA=["miter","round","bevel"],RA={},vm={};class ia{constructor(t,n,s,r,o,{optionalContentConfig:c,markedContentStack:h=null},f,p){this.ctx=t,this.current=new gm(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=s,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=c,this.cachedCanvases=new wA(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=f,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,n=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):n}beginDrawing({transform:t,viewport:n,transparency:s=!1,background:r=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=h,s){const f=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),this.ctx.transform(...Qt(this.compositeCtx))}this.ctx.save(),al(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=Qt(this.ctx)}executeOperatorList(t,n,s,r){const o=t.argsArray,c=t.fnArray;let h=n||0;const f=o.length;if(f===h)return h;const p=f-h>pm&&typeof s=="function",g=p?Date.now()+EA:0;let y=0;const b=this.commonObjs,A=this.objs;let S;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,s),h;if(S=c[h],S!==Sr.dependency)this[S].apply(this,o[h]);else for(const E of o[h]){const w=E.startsWith("g_")?b:A;if(!w.has(E))return w.get(E,s),h}if(h++,h===f)return h;if(p&&++y>pm){if(Date.now()>g)return s(),h;y=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const n of t.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const n=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}}_scaleImage(t,n){const s=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(n[0],n[1]),1),c=Math.max(Math.hypot(n[2],n[3]),1),h=s,f=r,p="prescale1",g,y;for(;o>2&&h>1||c>2&&f>1;){let b=h,A=f;o>2&&h>1&&(b=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),o/=h/b),c>2&&f>1&&(A=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f)/2,c/=f/A),g=this.cachedCanvases.getCanvas(p,b,A),y=g.context,y.clearRect(0,0,b,A),y.drawImage(t,0,0,h,f,0,0,b,A),t=g.canvas,h=b,f=A,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:f}}_createMaskCanvas(t){const n=this.ctx,{width:s,height:r}=t,o=this.current.fillColor,c=this.current.patternFill,h=Qt(n);let f,p,g,y;if((t.bitmap||t.data)&&t.count>1){const G=t.bitmap||t.data.buffer;p=JSON.stringify(c?h:[h.slice(0,4),o]),f=this._cachedBitmapsMap.get(G),f||(f=new Map,this._cachedBitmapsMap.set(G,f));const K=f.get(p);if(K&&!c){const Z=Math.round(Math.min(h[0],h[2])+h[4]),st=Math.round(Math.min(h[1],h[3])+h[5]);return{canvas:K,offsetX:Z,offsetY:st}}g=K}g||(y=this.cachedCanvases.getCanvas("maskCanvas",s,r),ym(y.context,t));let b=ct.transform(h,[1/s,0,0,-1/r,0,0]);b=ct.transform(b,[1,0,0,1,0,-r]);const A=ea.slice();ct.axialAlignedBoundingBox([0,0,s,r],b,A);const[S,E,w,T]=A,L=Math.round(w-S)||1,R=Math.round(T-E)||1,N=this.cachedCanvases.getCanvas("fillCanvas",L,R),C=N.context,U=S,z=E;C.translate(-U,-z),C.transform(...b),g||(g=this._scaleImage(y.canvas,kn(C)),g=g.img,f&&c&&f.set(p,g)),C.imageSmoothingEnabled=bm(Qt(C),t.interpolate),sl(C,g,0,0,g.width,g.height,0,0,s,r),C.globalCompositeOperation="source-in";const V=ct.transform(kn(C),[1,0,0,1,-U,-z]);return C.fillStyle=c?o.getPattern(n,this,V,Ce.FILL):o,C.fillRect(0,0,s,r),f&&!c&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,N.canvas)),{canvas:N.canvas,offsetX:Math.round(U),offsetY:Math.round(z)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=TA[t]}setLineJoin(t){this.ctx.lineJoin=xA[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,n){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=n)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[n,s]of t)switch(n){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,t,n);this.suspendedCtx=this.ctx;const o=this.ctx=r.context;o.setTransform(this.suspendedCtx.getTransform()),hr(this.suspendedCtx,o),_A(o,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),hr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,n,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,n,s,r){const o=r[0],c=r[1],h=r[2]-o,f=r[3]-c;h===0||f===0||(this.genericComposeSMask(n.context,s,h,f,n.subtype,n.backdrop,n.transferMap,o,c,n.offsetX,n.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,n,s,r,o,c,h,f,p,g,y){let b=t.canvas,A=f-g,S=p-y;if(c)if(A<0||S<0||A+s>b.width||S+r>b.height){const w=this.cachedCanvases.getCanvas("maskExtension",s,r),T=w.context;T.drawImage(b,-A,-S),T.globalCompositeOperation="destination-atop",T.fillStyle=c,T.fillRect(0,0,s,r),T.globalCompositeOperation="source-over",b=w.canvas,A=S=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(A,S,s,r),t.clip(w),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(A,S,s,r),t.restore()}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),o==="Alpha"&&h?n.filter=this.filterFactory.addAlphaFilter(h):o==="Luminosity"&&(n.filter=this.filterFactory.addLuminosityFilter(h));const E=new Path2D;E.rect(f,p,s,r),n.clip(E),n.globalCompositeOperation="destination-in",n.drawImage(b,A,S,s,r,f,p,s,r),n.restore()}save(){this.inSMaskMode&&hr(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&hr(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,n,s,r,o,c){this.ctx.transform(t,n,s,r,o,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,n,s){let[r]=n;if(!s){r||=n[0]=new Path2D,this[t](r);return}if(!(r instanceof Path2D)){const o=n[0]=new Path2D;for(let c=0,h=r.length;c<h;)switch(r[c++]){case el.moveTo:o.moveTo(r[c++],r[c++]);break;case el.lineTo:o.lineTo(r[c++],r[c++]);break;case el.curveTo:o.bezierCurveTo(r[c++],r[c++],r[c++],r[c++],r[c++],r[c++]);break;case el.closePath:o.closePath();break;default:At(`Unrecognized drawing path operator: ${r[c-1]}`);break}r=o}ct.axialAlignedBoundingBox(s,Qt(this.ctx),this.current.minMax),this[t](r)}closePath(){this.ctx.closePath()}stroke(t,n=!0){const s=this.ctx,r=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&r?.getPattern){const o=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=r.getPattern(s,this,kn(s),Ce.STROKE),o){const c=new Path2D;c.addPath(t,s.getTransform().invertSelf().multiplySelf(o)),t=c}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);n&&this.consumePath(t,this.current.getClippedPathBoundingBox(Ce.STROKE,Qt(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,n=!0){const s=this.ctx,r=this.current.fillColor,o=this.current.patternFill;let c=!1;if(o){const f=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=r.getPattern(s,this,kn(s),Ce.FILL),f){const p=new Path2D;p.addPath(t,s.getTransform().invertSelf().multiplySelf(f)),t=p}c=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),c&&s.restore(),n&&this.consumePath(t,h)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=RA}eoClip(){this.pendingClip=vm}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,n=this.ctx;if(t===void 0)return;const s=new Path2D,r=n.getTransform().invertSelf();for(const{transform:o,x:c,y:h,fontSize:f,path:p}of t)s.addPath(p,new DOMMatrix(o).preMultiplySelf(r).translate(c,h).scale(f,-f));n.clip(s),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,n){const s=this.commonObjs.get(t),r=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=s.fontMatrix||ph,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&At("Invalid font matrix for font "+t),n<0?(n=-n,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const o=s.loadedName||"sans-serif",c=s.systemFontInfo?.css||`"${o}", ${s.fallbackName}`;let h="normal";s.black?h="900":s.bold&&(h="bold");const f=s.italic?"italic":"normal";let p=n;n<dm?p=dm:n>fm&&(p=fm),this.current.fontSizeScale=n/p,this.ctx.font=`${f} ${h} ${p}px ${c}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,n){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,n){this.setLeading(-n),this.moveText(t,n)}setTextMatrix(t){const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#n(t,n,s){const r=new Path2D;return r.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(n)),r}paintChar(t,n,s,r,o){const c=this.ctx,h=this.current,f=h.font,p=h.textRenderingMode,g=h.fontSize/h.fontSizeScale,y=p&Le.FILL_STROKE_MASK,b=!!(p&Le.ADD_TO_PATH_FLAG),A=h.patternFill&&!f.missingFile,S=h.patternStroke&&!f.missingFile;let E;if((f.disableFontFace||b||A||S)&&(E=f.getPathGenerator(this.commonObjs,t)),f.disableFontFace||A||S){c.save(),c.translate(n,s),c.scale(g,-g);let w;if((y===Le.FILL||y===Le.FILL_STROKE)&&(r?(w=c.getTransform(),c.setTransform(...r),c.fill(this.#n(E,w,r))):c.fill(E)),y===Le.STROKE||y===Le.FILL_STROKE)if(o){w||=c.getTransform(),c.setTransform(...o);const{a:T,b:L,c:R,d:N}=w,C=ct.inverseTransform(o),U=ct.transform([T,L,R,N,0,0],C);ct.singularValueDecompose2dScale(U,ln),c.lineWidth*=Math.max(ln[0],ln[1])/g,c.stroke(this.#n(E,w,o))}else c.lineWidth/=g,c.stroke(E);c.restore()}else(y===Le.FILL||y===Le.FILL_STROKE)&&c.fillText(t,n,s),(y===Le.STROKE||y===Le.FILL_STROKE)&&c.strokeText(t,n,s);b&&(this.pendingTextPaths||=[]).push({transform:Qt(c),x:n,y:s,fontSize:g,path:E})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const n=t.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<n.length;r+=4)if(n[r]>0&&n[r]<255){s=!0;break}return Ct(this,"isFontSubpixelAAEnabled",s)}showText(t){const n=this.current,s=n.font;if(s.isType3Font)return this.showType3Text(t);const r=n.fontSize;if(r===0)return;const o=this.ctx,c=n.fontSizeScale,h=n.charSpacing,f=n.wordSpacing,p=n.fontDirection,g=n.textHScale*p,y=t.length,b=s.vertical,A=b?1:-1,S=s.defaultVMetrics,E=r*n.fontMatrix[0],w=n.textRenderingMode===Le.FILL&&!s.disableFontFace&&!n.patternFill;o.save(),n.textMatrix&&o.transform(...n.textMatrix),o.translate(n.x,n.y+n.textRise),p>0?o.scale(g,-1):o.scale(g,1);let T,L;if(n.patternFill){o.save();const z=n.fillColor.getPattern(o,this,kn(o),Ce.FILL);T=Qt(o),o.restore(),o.fillStyle=z}if(n.patternStroke){o.save();const z=n.strokeColor.getPattern(o,this,kn(o),Ce.STROKE);L=Qt(o),o.restore(),o.strokeStyle=z}let R=n.lineWidth;const N=n.textMatrixScale;if(N===0||R===0){const z=n.textRenderingMode&Le.FILL_STROKE_MASK;(z===Le.STROKE||z===Le.FILL_STROKE)&&(R=this.getSinglePixelWidth())}else R/=N;if(c!==1&&(o.scale(c,c),R/=c),o.lineWidth=R,s.isInvalidPDFjsFont){const z=[];let V=0;for(const G of t)z.push(G.unicode),V+=G.width;o.fillText(z.join(""),0,0),n.x+=V*E*g,o.restore(),this.compose();return}let C=0,U;for(U=0;U<y;++U){const z=t[U];if(typeof z=="number"){C+=A*z*r/1e3;continue}let V=!1;const G=(z.isSpace?f:0)+h,K=z.fontChar,Z=z.accent;let st,mt,lt=z.width;if(b){const D=z.vmetric||S,H=-(z.vmetric?D[1]:lt*.5)*E,J=D[2]*E;lt=D?-D[0]:lt,st=H/c,mt=(C+J)/c}else st=C/c,mt=0;if(s.remeasure&&lt>0){const D=o.measureText(K).width*1e3/r*c;if(lt<D&&this.isFontSubpixelAAEnabled){const H=lt/D;V=!0,o.save(),o.scale(H,1),st/=H}else lt!==D&&(st+=(lt-D)/2e3*r/c)}if(this.contentVisible&&(z.isInFont||s.missingFile)){if(w&&!Z)o.fillText(K,st,mt);else if(this.paintChar(K,st,mt,T,L),Z){const D=st+r*Z.offset.x/c,H=mt-r*Z.offset.y/c;this.paintChar(Z.fontChar,D,H,T,L)}}const rt=b?lt*E-G*p:lt*E+G*p;C+=rt,V&&o.restore()}b?n.y-=C:n.x+=C*g,o.restore(),this.compose()}showType3Text(t){const n=this.ctx,s=this.current,r=s.font,o=s.fontSize,c=s.fontDirection,h=r.vertical?1:-1,f=s.charSpacing,p=s.wordSpacing,g=s.textHScale*c,y=s.fontMatrix||ph,b=t.length,A=s.textRenderingMode===Le.INVISIBLE;let S,E,w,T;if(!(A||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),s.textMatrix&&n.transform(...s.textMatrix),n.translate(s.x,s.y+s.textRise),n.scale(g,c),S=0;S<b;++S){if(E=t[S],typeof E=="number"){T=h*E*o/1e3,this.ctx.translate(T,0),s.x+=T*g;continue}const L=(E.isSpace?p:0)+f,R=r.charProcOperatorList[E.operatorListId];R?this.contentVisible&&(this.save(),n.scale(o,o),n.transform(...y),this.executeOperatorList(R),this.restore()):At(`Type3 character "${E.operatorListId}" is not available.`);const N=[E.width,0];ct.applyTransform(N,y),w=N[0]*o+L,n.translate(w,0),s.x+=w*g}n.restore()}}setCharWidth(t,n){}setCharWidthAndBounds(t,n,s,r,o,c){const h=new Path2D;h.rect(s,r,o-s,c-r),this.ctx.clip(h),this.endPath()}getColorN_Pattern(t){let n;if(t[0]==="TilingPattern"){const s=this.baseTransform||Qt(this.ctx),r={createCanvasGraphics:o=>new ia(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};n=new jh(t,this.ctx,r,s)}else n=this._getPattern(t[1],t[2]);return n}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,n=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=AA(this.getObject(t)),this.cachedPatterns.set(t,s)),n&&(s.matrix=n),s}shadingFill(t){if(!this.contentVisible)return;const n=this.ctx;this.save();const s=this._getPattern(t);n.fillStyle=s.getPattern(n,this,kn(n),Ce.SHADING);const r=kn(n);if(r){const{width:o,height:c}=n.canvas,h=ea.slice();ct.axialAlignedBoundingBox([0,0,o,c],r,h);const[f,p,g,y]=h;this.ctx.fillRect(f,p,g-f,y-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){It("Should not call beginInlineImage")}beginImageData(){It("Should not call beginImageData")}paintFormXObjectBegin(t,n){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Qt(this.ctx),n)){ct.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[s,r,o,c]=n,h=new Path2D;h.rect(s,r,o-s,c-r),this.ctx.clip(h),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||vl("TODO: Support non-isolated groups."),t.knockout&&At("Knockout groups not supported.");const s=Qt(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=ea.slice();ct.axialAlignedBoundingBox(t.bbox,Qt(n),r);const o=[0,0,n.canvas.width,n.canvas.height];r=ct.intersect(r,o)||[0,0,0,0];const c=Math.floor(r[0]),h=Math.floor(r[1]),f=Math.max(Math.ceil(r[2])-c,1),p=Math.max(Math.ceil(r[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,p]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(g,f,p),b=y.context;b.translate(-c,-h),b.transform(...s);let A=new Path2D;const[S,E,w,T]=t.bbox;if(A.rect(S,E,w-S,T-E),t.matrix){const L=new Path2D;L.addPath(A,new DOMMatrix(t.matrix)),A=L}b.clip(A),t.smask?this.smaskStack.push({canvas:y.canvas,context:b,offsetX:c,offsetY:h,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(n.setTransform(1,0,0,1,0,0),n.translate(c,h),n.save()),hr(n,b),this.ctx=b,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=Qt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const o=ea.slice();ct.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],r,o),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,n,s,r,o){if(this.#t(),al(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const c=n[2]-n[0],h=n[3]-n[1];if(o&&this.annotationCanvasMap){s=s.slice(),s[4]-=n[0],s[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=c,n[3]=h,ct.singularValueDecompose2dScale(Qt(this.ctx),ln);const{viewportScale:f}=this,p=Math.ceil(c*this.outputScaleX*f),g=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,g);const{canvas:y,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(t,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(ln[0],0,0,-ln[1],0,h*ln[1]),al(this.ctx)}else{al(this.ctx),this.endPath();const f=new Path2D;f.rect(n[0],n[1],c,h),this.ctx.clip(f)}}this.current=new gm(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const n=t.count;t=this.getObject(t.data,t),t.count=n;const s=this.ctx,r=this._createMaskCanvas(t),o=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,r.offsetX,r.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,n,s=0,r=0,o,c){if(!this.contentVisible)return;t=this.getObject(t.data,t);const h=this.ctx;h.save();const f=Qt(h);h.transform(n,s,r,o,0,0);const p=this._createMaskCanvas(t);h.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]);for(let g=0,y=c.length;g<y;g+=2){const b=ct.transform(f,[n,s,r,o,c[g],c[g+1]]);h.drawImage(p.canvas,b[4],b[5])}h.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const n=this.ctx,s=this.current.fillColor,r=this.current.patternFill;for(const o of t){const{data:c,width:h,height:f,transform:p}=o,g=this.cachedCanvases.getCanvas("maskCanvas",h,f),y=g.context;y.save();const b=this.getObject(c,o);ym(y,b),y.globalCompositeOperation="source-in",y.fillStyle=r?s.getPattern(y,this,kn(n),Ce.FILL):s,y.fillRect(0,0,h,f),y.restore(),n.save(),n.transform(...p),n.scale(1,-1),sl(n,g.canvas,0,0,h,f,0,-1,1,1),n.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const n=this.getObject(t);if(!n){At("Dependent image isn't ready yet");return}this.paintInlineImageXObject(n)}paintImageXObjectRepeat(t,n,s,r){if(!this.contentVisible)return;const o=this.getObject(t);if(!o){At("Dependent image isn't ready yet");return}const c=o.width,h=o.height,f=[];for(let p=0,g=r.length;p<g;p+=2)f.push({transform:[n,0,0,s,r[p],r[p+1]],x:0,y:0,w:c,h});this.paintInlineImageXObjectGroup(o,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:n,width:s,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",s,r),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(n,0,0),c.filter="none",o.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const n=t.width,s=t.height,r=this.ctx;this.save();const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none"),r.scale(1/n,-1/s);let c;if(t.bitmap)c=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)c=t;else{const p=this.cachedCanvases.getCanvas("inlineImage",n,s).context;mm(p,t),c=this.applyTransferMapsToCanvas(p)}const h=this._scaleImage(c,kn(r));r.imageSmoothingEnabled=bm(Qt(r),t.interpolate),sl(r,h.img,0,0,h.paintWidth,h.paintHeight,0,-s,n,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,n){if(!this.contentVisible)return;const s=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const o=t.width,c=t.height,f=this.cachedCanvases.getCanvas("inlineImage",o,c).context;mm(f,t),r=this.applyTransferMapsToCanvas(f)}for(const o of n)s.save(),s.transform(...o.transform),s.scale(1,-1),sl(s,r,o.x,o.y,o.w,o.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,n){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,n){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,n){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const r=this.ctx;this.pendingClip&&(s||(this.pendingClip===vm?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Qt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const n=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:n,b:s,c:r,d:o}=this.ctx.getTransform();let c,h;if(s===0&&r===0){const f=Math.abs(n),p=Math.abs(o);if(f===p)if(t===0)c=h=1/f;else{const g=f*t;c=h=g<1?1/g:1}else if(t===0)c=1/f,h=1/p;else{const g=f*t,y=p*t;c=g<1?1/g:1,h=y<1?1/y:1}}else{const f=Math.abs(n*o-s*r),p=Math.hypot(n,s),g=Math.hypot(r,o);if(t===0)c=g/f,h=p/f;else{const y=t*f;c=g>y?g/y:1,h=p>y?p/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t,n){const{ctx:s,current:{lineWidth:r}}=this,[o,c]=this.getScaleForStroking();if(o===c){s.lineWidth=(r||1)*o,s.stroke(t);return}const h=s.getLineDash();n&&s.save(),s.scale(o,c),oh.a=1/o,oh.d=1/c;const f=new Path2D;if(f.addPath(t,oh),h.length>0){const p=Math.max(o,c);s.setLineDash(h.map(g=>g/p)),s.lineDashOffset/=p}s.lineWidth=r||1,s.stroke(f),n&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const u in Sr)ia.prototype[u]!==void 0&&(ia.prototype[Sr[u]]=ia.prototype[u]);class Ni{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class CA{#t;#e;constructor({parsedData:t,rawData:n}){this.#t=t,this.#e=n}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const ta=Symbol("INTERNAL");class MA{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:n,intent:s,usage:r,rbGroups:o}){this.#t=!!(t&rn.DISPLAY),this.#e=!!(t&rn.PRINT),this.name=n,this.intent=s,this.usage=r,this.rbGroups=o}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:n}=this.usage;return this.#t?n?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,n,s=!1){t!==ta&&It("Internal method `_setVisible` called."),this.#n=s,this.#i=n}}class DA{#t=null;#e=new Map;#n=null;#i=null;constructor(t,n=rn.DISPLAY){if(this.renderingIntent=n,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const s of t.groups)this.#e.set(s.id,new MA(n,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(ta,!1);for(const s of t.on)this.#e.get(s)._setVisible(ta,!0);for(const s of t.off)this.#e.get(s)._setVisible(ta,!1);this.#n=this.getHash()}}#a(t){const n=t.length;if(n<2)return!0;const s=t[0];for(let r=1;r<n;r++){const o=t[r];let c;if(Array.isArray(o))c=this.#a(o);else if(this.#e.has(o))c=this.#e.get(o).visible;else return At(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return vl("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(At(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const n of t.ids){if(!this.#e.has(n))return At(`Optional content group not found: ${n}`),!0;if(this.#e.get(n).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const n of t.ids){if(!this.#e.has(n))return At(`Optional content group not found: ${n}`),!0;if(!this.#e.get(n).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const n of t.ids){if(!this.#e.has(n))return At(`Optional content group not found: ${n}`),!0;if(!this.#e.get(n).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const n of t.ids){if(!this.#e.has(n))return At(`Optional content group not found: ${n}`),!0;if(this.#e.get(n).visible)return!1}return!0}return At(`Unknown optional content policy ${t.policy}.`),!0}return At(`Unknown group type ${t.type}.`),!0}setVisibility(t,n=!0,s=!0){const r=this.#e.get(t);if(!r){At(`Optional content group not found: ${t}`);return}if(s&&n&&r.rbGroups.length)for(const o of r.rbGroups)for(const c of o)c!==t&&this.#e.get(c)?._setVisible(ta,!1,!0);r._setVisible(ta,!!n,!0),this.#t=null}setOCGState({state:t,preserveRB:n}){let s;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const o=this.#e.get(r);if(o)switch(s){case"ON":this.setVisibility(r,!0,n);break;case"OFF":this.setVisibility(r,!1,n);break;case"Toggle":this.setVisibility(r,!o.visible,n);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new iy;for(const[n,s]of this.#e)t.update(`${n}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class OA{constructor(t,{disableRange:n=!1,disableStream:s=!1}){he(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:c,contentDispositionFilename:h}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=h,o?.length>0){const f=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!n,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((f,p)=>{this._onReceiveData({begin:f,chunk:p})}),t.addProgressListener((f,p)=>{this._onProgress({loaded:f,total:p})}),t.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:n}){const s=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(s),!0)});he(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const n=this._rangeReaders.indexOf(t);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){he(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new LA(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const s=new NA(this,t,n);return this._pdfDataRangeTransport.requestDataRange(t,n),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class LA{constructor(t,n,s=!1,r=null){this._stream=t,this._done=s||!1,this._filename=Sl(r)?r:null,this._queuedChunks=n||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class NA{constructor(t,n,s){this._stream=t,this._begin=n,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function kA(u){let t=!0,n=s("filename\\*","i").exec(u);if(n){n=n[1];let g=h(n);return g=unescape(g),g=f(g),g=p(g),o(g)}if(n=c(u),n){const g=p(n);return o(g)}if(n=s("filename","i").exec(u),n){n=n[1];let g=h(n);return g=p(g),o(g)}function s(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(g,{fatal:!0}),A=Cr(y);y=b.decode(A),t=!1}catch{}}return y}function o(g){return t&&/[\x80-\xff]/.test(g)&&(g=r("utf-8",g),t&&(g=r("iso-8859-1",g))),g}function c(g){const y=[];let b;const A=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=A.exec(g))!==null;){let[,E,w,T]=b;if(E=parseInt(E,10),E in y){if(E===0)break;continue}y[E]=[w,T]}const S=[];for(let E=0;E<y.length&&E in y;++E){let[w,T]=y[E];T=h(T),w&&(T=unescape(T),E===0&&(T=f(T))),S.push(T)}return S.join("")}function h(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let b=0;b<y.length;++b){const A=y[b].indexOf('"');A!==-1&&(y[b]=y[b].slice(0,A),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function f(g){const y=g.indexOf("'");if(y===-1)return g;const b=g.slice(0,y),S=g.slice(y+1).replace(/^[^']*'/,"");return r(b,S)}function p(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,A,S){if(A==="q"||A==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(E,w){return String.fromCharCode(parseInt(w,16))}),r(b,S);try{S=atob(S)}catch{}return r(b,S)})}return""}function hy(u,t){const n=new Headers;if(!u||!t||typeof t!="object")return n;for(const s in t){const r=t[s];r!==void 0&&n.append(s,r)}return n}function El(u){return URL.parse(u)?.origin??null}function dy({responseHeaders:u,isHttp:t,rangeChunkSize:n,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(u.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*n)||s||!t||u.get("Accept-Ranges")!=="bytes"||(u.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function fy(u){const t=u.get("Content-Disposition");if(t){let n=kA(t);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(Sl(n))return n}return null}function Nr(u,t){return new Er(`Unexpected server response (${u}) while retrieving PDF "${t}".`,u,u===404||u===0&&t.startsWith("file:"))}function py(u){return u===200||u===206}function gy(u,t,n){return{method:"GET",headers:u,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function my(u){return u instanceof Uint8Array?u.buffer:u instanceof ArrayBuffer?u:(At(`getArrayBuffer - unexpected data format: ${u}`),new Uint8Array(u).buffer)}class PA{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=hy(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return he(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new BA(this),this._fullRequestReader}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const s=new zA(this,t,n);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class BA{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const n=t.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange;const s=new Headers(t.headers),r=n.url;fetch(r,gy(s,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=El(o.url),!py(o.status))throw Nr(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const c=o.headers,{allowRangeRequests:h,suggestedLength:f}=dy({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=f||this._contentLength,this._filename=fy(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ai("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:my(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class zA{constructor(t,n,s){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${n}-${s-1}`);const c=r.url;fetch(c,gy(o,this._withCredentials,this._abortController)).then(h=>{const f=El(h.url);if(f!==t._responseOrigin)throw new Error(`Expected range response-origin "${f}" to match "${t._responseOrigin}".`);if(!py(h.status))throw Nr(h.status,c);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:my(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const lh=200,ch=206;function UA(u){const t=u.response;return typeof t!="string"?t:Cr(t).buffer}class HA{_responseOrigin=null;constructor({url:t,httpHeaders:n,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=hy(this.isHttp,n),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const n=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const[o,c]of this.headers)n.setRequestHeader(o,c);return this.isHttp&&"begin"in t&&"end"in t?(n.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=ch):r.expectedStatus=lh,n.responseType="arraybuffer",he(t.onError,"Expected `onError` callback to be provided."),n.onerror=()=>{t.onError(n.status)},n.onreadystatechange=this.onStateChange.bind(this,s),n.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,n.send(null),s}onProgress(t,n){const s=this.pendingRequests[t];s&&s.onProgress?.(n)}onStateChange(t,n){const s=this.pendingRequests[t];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){s.onError(r.status);return}const o=r.status||lh;if(!(o===lh&&s.expectedStatus===ch)&&o!==s.expectedStatus){s.onError(r.status);return}const h=UA(r);if(o===ch){const f=r.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);p?s.onDone({begin:parseInt(p[1],10),chunk:h}):(At('Missing or invalid "Content-Range" header.'),s.onError(0))}else h?s.onDone({begin:0,chunk:h}):s.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const n=this.pendingRequests[t].xhr;delete this.pendingRequests[t],n.abort()}}class FA{constructor(t){this._source=t,this._manager=new HA(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const n=this._rangeRequestReaders.indexOf(t);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return he(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new IA(this._manager,this._source),this._fullRequestReader}getRangeReader(t,n){const s=new jA(this._manager,t,n);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class IA{constructor(t,n){this._manager=t,this._url=n.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,n=this._manager.getRequestXhr(t);this._manager._responseOrigin=El(n.responseURL);const s=n.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[f,...p]=h.split(": ");return[f,p.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:c}=dy({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=fy(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Nr(t,this._url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class jA{constructor(t,n,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:n,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=El(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const n=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Nr(t,this._url);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const GA=/^[a-z][a-z0-9\-+.]+:/i;function qA(u){if(GA.test(u))return new URL(u);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(u))}class VA{constructor(t){this.source=t,this.url=qA(t.url),he(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return he(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new XA(this),this._fullRequestReader}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const s=new YA(this,t,n);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class XA{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=t.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Nr(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ai("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class YA{constructor(t,n,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:n,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const dr=Symbol("INITIAL_DATA");class yy{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:dr}}get(t,n=null){if(n){const r=this.#e(t);return r.promise.then(()=>n(r.data)),null}const s=this.#t[t];if(!s||s.data===dr)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const n=this.#t[t];return!!n&&n.data!==dr}delete(t){const n=this.#t[t];return!n||n.data===dr?!1:(delete this.#t[t],!0)}resolve(t,n=null){const s=this.#e(t);s.data=n,s.resolve()}clear(){for(const t in this.#t){const{data:n}=this.#t[t];n?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:n}=this.#t[t];n!==dr&&(yield[t,n])}}}const $A=1e5,Am=30;let _r=class vn{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#a=null;#s=null;#l=0;#o=0;#h=null;#c=null;#d=0;#u=0;#f=Object.create(null);#r=[];#p=null;#m=[];#g=new WeakMap;#y=null;static#b=new Map;static#v=new Map;static#S=new WeakMap;static#_=null;static#T=new Set;constructor({textContentSource:t,container:n,viewport:s}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(f){f.enqueue(t),f.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#c=n,this.#u=s.scale*Tn.pixelRatio,this.#d=s.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:o,pageX:c,pageY:h}=s.rawDims;this.#y=[1,0,0,-1,-c,h+o],this.#o=r,this.#l=o,vn.#O(),ki(n,s),this.#t.promise.finally(()=>{vn.#T.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:n}=we.platform;return Ct(this,"fontFamilyMap",new Map([["sans-serif",`${t&&n?"Calibri, ":""}sans-serif`],["monospace",`${t&&n?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#h.read().then(({value:n,done:s})=>{if(s){this.#t.resolve();return}this.#a??=n.lang,Object.assign(this.#f,n.styles),this.#R(n.items),t()},this.#t.reject)};return this.#h=this.#p.getReader(),vn.#T.add(this),t(),this.#t.promise}update({viewport:t,onBefore:n=null}){const s=t.scale*Tn.pixelRatio,r=t.rotation;if(r!==this.#d&&(n?.(),this.#d=r,ki(this.#c,{rotation:r})),s!==this.#u){n?.(),this.#u=s;const o={div:null,properties:null,ctx:vn.#C(this.#a)};for(const c of this.#m)o.properties=this.#g.get(c),o.div=c,this.#E(o)}}cancel(){const t=new ai("TextLayer task cancelled.");this.#h?.cancel(t).catch(()=>{}),this.#h=null,this.#t.reject(t)}get textDivs(){return this.#m}get textContentItemsStr(){return this.#r}#R(t){if(this.#n)return;this.#s.ctx??=vn.#C(this.#a);const n=this.#m,s=this.#r;for(const r of t){if(n.length>$A){At("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id!==null&&this.#e.setAttribute("id",`${r.id}`),o.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(r.str),this.#M(r)}}#M(t){const n=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#m.push(n);const r=ct.transform(this.#y,t.transform);let o=Math.atan2(r[1],r[0]);const c=this.#f[t.fontName];c.vertical&&(o+=Math.PI/2);let h=this.#i&&c.fontSubstitution||c.fontFamily;h=vn.fontFamilyMap.get(h)||h;const f=Math.hypot(r[2],r[3]),p=f*vn.#L(h,c,this.#a);let g,y;o===0?(g=r[4],y=r[5]-p):(g=r[4]+p*Math.sin(o),y=r[5]-p*Math.cos(o));const b="calc(var(--total-scale-factor) *",A=n.style;this.#e===this.#c?(A.left=`${(100*g/this.#o).toFixed(2)}%`,A.top=`${(100*y/this.#l).toFixed(2)}%`):(A.left=`${b}${g.toFixed(2)}px)`,A.top=`${b}${y.toFixed(2)}px)`),A.fontSize=`${b}${(vn.#_*f).toFixed(2)}px)`,A.fontFamily=h,s.fontSize=f,n.setAttribute("role","presentation"),n.textContent=t.str,n.dir=t.dir,this.#i&&(n.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),o!==0&&(s.angle=o*(180/Math.PI));let S=!1;if(t.str.length>1)S=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const E=Math.abs(t.transform[0]),w=Math.abs(t.transform[3]);E!==w&&Math.max(E,w)/Math.min(E,w)>1.5&&(S=!0)}if(S&&(s.canvasWidth=c.vertical?t.height:t.width),this.#g.set(n,s),this.#s.div=n,this.#s.properties=s,this.#E(this.#s),s.hasText&&this.#e.append(n),s.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),this.#e.append(E)}}#E(t){const{div:n,properties:s,ctx:r}=t,{style:o}=n;let c="";if(vn.#_>1&&(c=`scale(${1/vn.#_})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:h}=o,{canvasWidth:f,fontSize:p}=s;vn.#x(r,p*this.#u,h);const{width:g}=r.measureText(n.textContent);g>0&&(c=`scaleX(${f*this.#u/g}) ${c}`)}s.angle!==0&&(c=`rotate(${s.angle}deg) ${c}`),c.length>0&&(o.transform=c)}static cleanup(){if(!(this.#T.size>0)){this.#b.clear();for(const{canvas:t}of this.#v.values())t.remove();this.#v.clear()}}static#C(t=null){let n=this.#v.get(t||="");if(!n){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),n=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(t,n),this.#S.set(n,{size:0,family:""})}return n}static#x(t,n,s){const r=this.#S.get(t);n===r.size&&s===r.family||(t.font=`${n}px ${s}`,r.size=n,r.family=s)}static#O(){if(this.#_!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#_=t.getBoundingClientRect().height,t.remove()}static#L(t,n,s){const r=this.#b.get(t);if(r)return r;const o=this.#C(s);o.canvas.width=o.canvas.height=Am,this.#x(o,Am,t);const c=o.measureText(""),h=c.fontBoundingBoxAscent,f=Math.abs(c.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let p=.8;return h?p=h/(h+f):(we.platform.isFirefox&&At("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),n.ascent?p=n.ascent:n.descent&&(p=1+n.descent)),this.#b.set(t,p),p}};class wr{static textContent(t){const n=[],s={items:n,styles:Object.create(null)};function r(o){if(!o)return;let c=null;const h=o.name;if(h==="#text")c=o.value;else if(wr.shouldBuildText(h))o?.attributes?.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&n.push({str:c}),!!o.children)for(const f of o.children)r(f)}return r(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const KA=100;function Gh(u={}){typeof u=="string"||u instanceof URL?u={url:u}:(u instanceof ArrayBuffer||ArrayBuffer.isView(u))&&(u={data:u});const t=new qh,{docId:n}=t,s=u.url?aA(u.url):null,r=u.data?rA(u.data):null,o=u.httpHeaders||null,c=u.withCredentials===!0,h=u.password??null,f=u.range instanceof Vh?u.range:null,p=Number.isInteger(u.rangeChunkSize)&&u.rangeChunkSize>0?u.rangeChunkSize:2**16;let g=u.worker instanceof oa?u.worker:null;const y=u.verbosity,b=typeof u.docBaseUrl=="string"&&!Dr(u.docBaseUrl)?u.docBaseUrl:null,A=nl(u.cMapUrl),S=u.cMapPacked!==!1,E=u.CMapReaderFactory||(ze?fA:lm),w=nl(u.iccUrl),T=nl(u.standardFontDataUrl),L=u.StandardFontDataFactory||(ze?pA:cm),R=nl(u.wasmUrl),N=u.WasmFactory||(ze?gA:um),C=u.stopAtErrors!==!0,U=Number.isInteger(u.maxImageSize)&&u.maxImageSize>-1?u.maxImageSize:-1,z=u.isEvalSupported!==!1,V=typeof u.isOffscreenCanvasSupported=="boolean"?u.isOffscreenCanvasSupported:!ze,G=typeof u.isImageDecoderSupported=="boolean"?u.isImageDecoderSupported:!ze&&(we.platform.isFirefox||!globalThis.chrome),K=Number.isInteger(u.canvasMaxAreaInBytes)?u.canvasMaxAreaInBytes:-1,Z=typeof u.disableFontFace=="boolean"?u.disableFontFace:ze,st=u.fontExtraProperties===!0,mt=u.enableXfa===!0,lt=u.ownerDocument||globalThis.document,rt=u.disableRange===!0,D=u.disableStream===!0,H=u.disableAutoFetch===!0,J=u.pdfBug===!0,yt=u.CanvasFactory||(ze?dA:cA),M=u.FilterFactory||(ze?hA:uA),X=u.enableHWA===!0,W=u.useWasm!==!1,Q=f?f.length:u.length??NaN,nt=typeof u.useSystemFonts=="boolean"?u.useSystemFonts:!ze&&!Z,pt=typeof u.useWorkerFetch=="boolean"?u.useWorkerFetch:!!(E===lm&&L===cm&&N===um&&A&&T&&R&&mr(A,document.baseURI)&&mr(T,document.baseURI)&&mr(R,document.baseURI)),at=null;Iv(y);const Et={canvasFactory:new yt({ownerDocument:lt,enableHWA:X}),filterFactory:new M({docId:n,ownerDocument:lt}),cMapReaderFactory:pt?null:new E({baseUrl:A,isCompressed:S}),standardFontDataFactory:pt?null:new L({baseUrl:T}),wasmFactory:pt?null:new N({baseUrl:R})};g||(g=oa.create({verbosity:y,port:Ni.workerPort}),t._worker=g);const Dt={docId:n,apiVersion:"5.3.31",data:r,password:h,disableAutoFetch:H,rangeChunkSize:p,length:Q,docBaseUrl:b,enableXfa:mt,evaluatorOptions:{maxImageSize:U,disableFontFace:Z,ignoreErrors:C,isEvalSupported:z,isOffscreenCanvasSupported:V,isImageDecoderSupported:G,canvasMaxAreaInBytes:K,fontExtraProperties:st,useSystemFonts:nt,useWasm:W,useWorkerFetch:pt,cMapUrl:A,iccUrl:w,standardFontDataUrl:T,wasmUrl:R}},de={ownerDocument:lt,pdfBug:J,styleElement:at,loadingParams:{disableAutoFetch:H,enableXfa:mt}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const zt=g.messageHandler.sendWithPromise("GetDocRequest",Dt,r?[r.buffer]:null);let He;if(f)He=new OA(f,{disableRange:rt,disableStream:D});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Qe=mr(s)?PA:ze?VA:FA;He=new Qe({url:s,length:Q,httpHeaders:o,withCredentials:c,rangeChunkSize:p,disableRange:rt,disableStream:D})}return zt.then(Qe=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const fe=new yr(n,Qe,g.port),kt=new ZA(fe,t,He,de,Et);t._transport=kt,fe.send("Ready",null)})}).catch(t._capability.reject),t}class qh{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${qh.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let Vh=class{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#a=[];constructor(t,n,s=!1,r=null){this.length=t,this.initialData=n,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(t){this.#a.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,n){for(const s of this.#a)s(t,n)}onDataProgress(t,n){this.#t.promise.then(()=>{for(const s of this.#i)s(t,n)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const n of this.#n)n(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,n){It("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class QA{constructor(t,n){this._pdfInfo=t,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ct(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class WA{#t=!1;constructor(t,n,s,r=!1){this._pageIndex=t,this._pageInfo=n,this._transport=s,this._stats=r?new am:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new yy,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:n=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:o=!1}={}){return new Mr({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:n,offsetX:s,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ct(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:n,intent:s="display",annotationMode:r=Fn.ENABLE,transform:o=null,background:c=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:g=null,isEditing:y=!1}){this._stats?.time("Overall");const b=this._transport.getRenderingIntent(s,r,g,y),{renderingIntent:A,cacheKey:S}=b;this.#t=!1,h||=this._transport.getOptionalContentConfig(A);let E=this._intentStates.get(S);E||(E=Object.create(null),this._intentStates.set(S,E)),E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null);const w=!!(A&rn.PRINT);E.displayReadyCapability||(E.displayReadyCapability=Promise.withResolvers(),E.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(b));const T=N=>{E.renderTasks.delete(L),w&&(this.#t=!0),this.#e(),N?(L.capability.reject(N),this._abortOperatorList({intentState:E,reason:N instanceof Error?N:new Error(N)})):L.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},L=new na({callback:T,params:{canvasContext:t,viewport:n,transform:o,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:E.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:p});(E.renderTasks||=new Set).add(L);const R=L.task;return Promise.all([E.displayReadyCapability.promise,h]).then(([N,C])=>{if(this.destroyed){T();return}if(this._stats?.time("Rendering"),!(C.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");L.initializeGraphics({transparency:N,optionalContentConfig:C}),L.operatorListChanged()}).catch(T),R}getOperatorList({intent:t="display",annotationMode:n=Fn.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){function o(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(f))}const c=this._transport.getRenderingIntent(t,n,s,r,!0);let h=this._intentStates.get(c.cacheKey);h||(h=Object.create(null),this._intentStates.set(c.cacheKey,h));let f;return h.opListReadCapability||(f=Object.create(null),f.operatorListChanged=o,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||=new Set).add(f),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:n===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>wr.textContent(s));const n=this.streamTextContent(t);return new Promise(function(s,r){function o(){c.read().then(function({value:f,done:p}){if(p){s(h);return}h.lang??=f.lang,Object.assign(h.styles,f.styles),h.items.push(...f.items),o()},r)}const c=n.getReader(),h={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const s of n.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const n=this.#e();return t&&n&&(this._stats&&=new am),n}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,n){const s=this._intentStates.get(n);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,n){for(let s=0,r=t.length;s<r;s++)n.operatorList.fnArray.push(t.fnArray[s]),n.operatorList.argsArray.push(t.argsArray[s]);n.operatorList.lastChunk=t.lastChunk,n.operatorList.separateAnnots=t.separateAnnots;for(const s of n.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:n,annotationStorageSerializable:s,modifiedIds:r}){const{map:o,transfer:c}=s,f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:o,modifiedIds:r},c).getReader(),p=this._intentStates.get(n);p.streamReader=f;const g=()=>{f.read().then(({value:y,done:b})=>{if(b){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,p),g())},y=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const b of p.renderTasks)b.operatorListChanged();this.#e()}if(p.displayReadyCapability)p.displayReadyCapability.reject(y);else if(p.opListReadCapability)p.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:t,reason:n,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(n instanceof Al){let r=KA;n.extraDelay>0&&n.extraDelay<1e3&&(r+=n.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},r);return}}if(t.streamReader.cancel(new ai(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var Li,wn,si,ss,yl,as,rs,Ue,ll,by,vy,br,ra,cl;const Yt=class Yt{constructor({name:t=null,port:n=null,verbosity:s=jv()}={}){Ln(this,Ue);Ln(this,Li,Promise.withResolvers());Ln(this,wn,null);Ln(this,si,null);Ln(this,ss,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,n){if(Xt(Yt,rs).has(n))throw new Error("Cannot use more than one PDFWorker per port.");Xt(Yt,rs).set(n,this),Nn(this,Ue,by).call(this,n)}else Nn(this,Ue,vy).call(this)}get promise(){return Xt(this,Li).promise}get port(){return Xt(this,si)}get messageHandler(){return Xt(this,wn)}destroy(){this.destroyed=!0,Xt(this,ss)?.terminate(),Ve(this,ss,null),Xt(Yt,rs).delete(Xt(this,si)),Ve(this,si,null),Xt(this,wn)?.destroy(),Ve(this,wn,null)}static create(t){const n=Xt(this,rs).get(t?.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new Yt(t)}static get workerSrc(){if(Ni.workerSrc)return Ni.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ct(this,"_setupFakeWorkerGlobal",(async()=>Xt(this,ra,cl)?Xt(this,ra,cl):(await import(this.workerSrc)).WorkerMessageHandler)())}};Li=new WeakMap,wn=new WeakMap,si=new WeakMap,ss=new WeakMap,yl=new WeakMap,as=new WeakMap,rs=new WeakMap,Ue=new WeakSet,ll=function(){Xt(this,Li).resolve(),Xt(this,wn).send("configure",{verbosity:this.verbosity})},by=function(t){Ve(this,si,t),Ve(this,wn,new yr("main","worker",t)),Xt(this,wn).on("ready",()=>{}),Nn(this,Ue,ll).call(this)},vy=function(){if(Xt(Yt,as)||Xt(Yt,ra,cl)){Nn(this,Ue,br).call(this);return}let{workerSrc:t}=Yt;try{Yt._isSameOrigin(window.location,t)||(t=Yt._createCDNWrapper(new URL(t,window.location).href));const n=new Worker(t,{type:"module"}),s=new yr("main","worker",n),r=()=>{o.abort(),s.destroy(),n.terminate(),this.destroyed?Xt(this,Li).reject(new Error("Worker was destroyed")):Nn(this,Ue,br).call(this)},o=new AbortController;n.addEventListener("error",()=>{Xt(this,ss)||r()},{signal:o.signal}),s.on("test",h=>{if(o.abort(),this.destroyed||!h){r();return}Ve(this,wn,s),Ve(this,si,n),Ve(this,ss,n),Nn(this,Ue,ll).call(this)}),s.on("ready",h=>{if(o.abort(),this.destroyed){r();return}try{c()}catch{Nn(this,Ue,br).call(this)}});const c=()=>{const h=new Uint8Array;s.send("test",h,[h.buffer])};c();return}catch{vl("The worker has been disabled.")}Nn(this,Ue,br).call(this)},br=function(){Xt(Yt,as)||(At("Setting up fake worker."),Ve(Yt,as,!0)),Yt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Xt(this,Li).reject(new Error("Worker was destroyed"));return}const n=new lA;Ve(this,si,n);const s=`fake${Xg(Yt,yl)._++}`,r=new yr(s+"_worker",s,n);t.setup(r,n),Ve(this,wn,new yr(s,s+"_worker",n)),Nn(this,Ue,ll).call(this)}).catch(t=>{Xt(this,Li).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},ra=new WeakSet,cl=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Ln(Yt,ra),Ln(Yt,yl,0),Ln(Yt,as,!1),Ln(Yt,rs,new WeakMap),ze&&(Ve(Yt,as,!0),Ni.workerSrc||="./pdf.worker.mjs"),Yt._isSameOrigin=(t,n)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const r=new URL(n,s);return s.origin===r.origin},Yt._createCDNWrapper=t=>{const n=`await import("${t}");`;return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},Yt.fromPort=t=>{if(Wv("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Yt.create(t)};let oa=Yt;class ZA{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#a=null;constructor(t,n,s,r,o){this.messageHandler=t,this.loadingTask=n,this.commonObjs=new yy,this.fontLoader=new iA({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#s(t,n=null){const s=this.#t.get(t);if(s)return s;const r=this.messageHandler.sendWithPromise(t,n);return this.#t.set(t,r),r}get annotationStorage(){return Ct(this,"annotationStorage",new Hh)}getRenderingIntent(t,n=Fn.ENABLE,s=null,r=!1,o=!1){let c=rn.DISPLAY,h=gh;switch(t){case"any":c=rn.ANY;break;case"display":break;case"print":c=rn.PRINT;break;default:At(`getRenderingIntent - invalid intent: ${t}`)}const f=c&rn.PRINT&&s instanceof sy?s:this.annotationStorage;switch(n){case Fn.DISABLE:c+=rn.ANNOTATIONS_DISABLE;break;case Fn.ENABLE:break;case Fn.ENABLE_FORMS:c+=rn.ANNOTATIONS_FORMS;break;case Fn.ENABLE_STORAGE:c+=rn.ANNOTATIONS_STORAGE,h=f.serializable;break;default:At(`getRenderingIntent - invalid annotationMode: ${n}`)}r&&(c+=rn.IS_EDITING),o&&(c+=rn.OPLIST);const{ids:p,hash:g}=f.modifiedIds,y=[c,h.hash,g];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:h,modifiedIds:p}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),_r.cleanup(),this._networkStream?.cancelAllRequests(new ai("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:n}=this;t.on("GetReader",(s,r)=>{he(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){r.close();return}he(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:c}=this._fullReader;return(!r||!o)&&(this._lastProgress&&n.onProgress?.(this._lastProgress),this._fullReader.onProgress=h=>{n.onProgress?.({loaded:h.loaded,total:h.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:c}}),t.on("GetRangeReader",(s,r)=>{he(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(s.begin,s.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:c,done:h}){if(h){r.close();return}he(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{r.error(c)})},r.onCancel=c=>{o.cancel(c),r.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,n._capability.resolve(new QA(s,this))}),t.on("DocException",s=>{n._capability.reject(Xe(s))}),t.on("PasswordRequest",s=>{this.#a=Promise.withResolvers();try{if(!n.onPassword)throw Xe(s);const r=o=>{o instanceof Error?this.#a.reject(o):this.#a.resolve({password:o})};n.onPassword(r,s.code)}catch(r){this.#a.reject(r)}return this.#a.promise}),t.on("DataLoaded",s=>{n.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,r,o])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in o){const p=o.error;At(`Error during font loading: ${p}`),this.commonObjs.resolve(s,p);break}const c=this._params.pdfBug&&globalThis.FontInspector?.enabled?(p,g)=>globalThis.FontInspector.fontAdded(p,g):null,h=new sA(o,c);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!h.fontExtraProperties&&h.data&&(h.data=null),this.commonObjs.resolve(s,h)});break;case"CopyLocalImage":const{imageRef:f}=o;he(f,"The imageRef must be defined.");for(const p of this.#e.values())for(const[,g]of p.objs)if(g?.ref===f)return g.dataLen?(this.commonObjs.resolve(s,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([s,r,o,c])=>{if(this.destroyed)return;const h=this.#e.get(r);if(!h.objs.has(s)){if(h._intentStates.size===0){c?.bitmap?.close();return}switch(o){case"Image":case"Pattern":h.objs.resolve(s,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",s=>{this.destroyed||n.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&At("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=t-1,s=this.#n.get(n);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#i.set(o.refStr,t);const c=new WA(n,o,this,this._params.pdfBug);return this.#e.set(n,c),c});return this.#n.set(n,r),r}getPageIndex(t){return mh(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:n})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(n=>new DA(n,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",n=this.#t.get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new CA(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of this.#e.values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),_r.cleanup()}}cachedPageNumber(t){if(!mh(t))return null;const n=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(n)??null}}class JA{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:n}=this.#t;return t.form||t.canvas&&n?.size>0}}class na{#t=null;static#e=new WeakSet;constructor({callback:t,params:n,objs:s,commonObjs:r,annotationCanvasMap:o,operatorList:c,pageIndex:h,canvasFactory:f,filterFactory:p,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:b=null}){this.callback=t,this.params=n,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=h,this.canvasFactory=f,this.filterFactory=p,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new JA(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(na.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");na.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:r,transform:o,background:c}=this.params;this.gfx=new ia(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:r,transparency:t,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),na.#e.delete(this._canvas),t||=new Al(`Rendering cancelled, page ${this._pageIndex+1}`,n),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),na.#e.delete(this._canvas),this.callback())))}}const Ay="5.3.31",Sy="47ad820d9";function Sm(u){return Math.floor(Math.max(0,Math.min(1,u))*255).toString(16).padStart(2,"0")}function fr(u){return Math.max(0,Math.min(255,255*u))}class Em{static CMYK_G([t,n,s,r]){return["G",1-Math.min(1,.3*t+.59*s+.11*n+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=fr(t),[t,t,t]}static G_HTML([t]){const n=Sm(t);return`#${n}${n}${n}`}static RGB_G([t,n,s]){return["G",.3*t+.59*n+.11*s]}static RGB_rgb(t){return t.map(fr)}static RGB_HTML(t){return`#${t.map(Sm).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,n,s,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,s+r),1-Math.min(1,n+r)]}static CMYK_rgb([t,n,s,r]){return[fr(1-Math.min(1,t+r)),fr(1-Math.min(1,s+r)),fr(1-Math.min(1,n+r))]}static CMYK_HTML(t){const n=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([t,n,s]){const r=1-t,o=1-n,c=1-s,h=Math.min(r,o,c);return["CMYK",r,o,c,h]}}class tS{create(t,n,s=!1){if(t<=0||n<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${n}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${n}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){It("Abstract method `_createSVG` called.")}}class Tr extends tS{_createSVG(t){return document.createElementNS(ii,t)}}class Xh{static setupStorage(t,n,s,r,o){const c=r.getValue(n,{value:null});switch(s.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),o==="print")break;t.addEventListener("input",h=>{r.setValue(n,{value:h.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(c.value===s.attributes.xfaOn?t.setAttribute("checked",!0):c.value===s.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",h=>{r.setValue(n,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),o==="print")break;t.addEventListener("input",h=>{r.setValue(n,{value:h.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const h of s.children)h.attributes.value===c.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}t.addEventListener("input",h=>{const f=h.target.options,p=f.selectedIndex===-1?"":f[f.selectedIndex].value;r.setValue(n,{value:p})});break}}static setAttributes({html:t,element:n,storage:s=null,intent:r,linkService:o}){const{attributes:c}=n,h=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${r}`);for(const[f,p]of Object.entries(c))if(p!=null)switch(f){case"class":p.length&&t.setAttribute(f,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!h||f!=="href"&&f!=="newWindow")&&t.setAttribute(f,p)}h&&o.addLinkAttributes(t,c.href,c.newWindow),s&&c.dataId&&this.setupStorage(t,c.dataId,n,s)}static render(t){const n=t.annotationStorage,s=t.linkService,r=t.xfaHtml,o=t.intent||"display",c=document.createElement(r.name);r.attributes&&this.setAttributes({html:c,element:r,intent:o,linkService:s});const h=o!=="richText",f=t.div;if(f.append(c),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;f.style.transform=y}h&&f.setAttribute("class","xfaLayer xfaFont");const p=[];if(r.children.length===0){if(r.value){const y=document.createTextNode(r.value);c.append(y),h&&wr.shouldBuildText(r.name)&&p.push(y)}return{textDivs:p}}const g=[[r,-1,c]];for(;g.length>0;){const[y,b,A]=g.at(-1);if(b+1===y.children.length){g.pop();continue}const S=y.children[++g.at(-1)[1]];if(S===null)continue;const{name:E}=S;if(E==="#text"){const T=document.createTextNode(S.value);p.push(T),A.append(T);continue}const w=S?.attributes?.xmlns?document.createElementNS(S.attributes.xmlns,E):document.createElement(E);if(A.append(w),S.attributes&&this.setAttributes({html:w,element:S,storage:n,intent:o,linkService:s}),S.children?.length>0)g.push([S,-1,w]);else if(S.value){const T=document.createTextNode(S.value);h&&wr.shouldBuildText(E)&&p.push(T),w.append(T)}}for(const y of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const n=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=n,t.div.hidden=!1}}const kr=1e3,eS=9,cs=new WeakSet;class _m{static create(t){switch(t.data.annotationType){case ee.LINK:return new Ey(t);case ee.TEXT:return new nS(t);case ee.WIDGET:switch(t.data.fieldType){case"Tx":return new iS(t);case"Btn":return t.data.radioButton?new _y(t):t.data.checkBox?new aS(t):new rS(t);case"Ch":return new oS(t);case"Sig":return new sS(t)}return new fs(t);case ee.POPUP:return new bh(t);case ee.FREETEXT:return new wy(t);case ee.LINE:return new cS(t);case ee.SQUARE:return new uS(t);case ee.CIRCLE:return new hS(t);case ee.POLYLINE:return new Ty(t);case ee.CARET:return new fS(t);case ee.INK:return new Yh(t);case ee.POLYGON:return new dS(t);case ee.HIGHLIGHT:return new xy(t);case ee.UNDERLINE:return new pS(t);case ee.SQUIGGLY:return new gS(t);case ee.STRIKEOUT:return new mS(t);case ee.STAMP:return new Ry(t);case ee.FILEATTACHMENT:return new yS(t);default:return new se(t)}}}class se{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:n=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=n,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,n&&(this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:n,richText:s}){return!!(t?.str||n?.str||s?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return se._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};const{rect:n}=t;n&&this.#i(n),this.#n?.popup.updateEdited(t)}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:n},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:h,pageY:f}}}}=this;s?.splice(0,4,...t),n.left=`${100*(t[0]-h)/o}%`,n.top=`${100*(c-t[3]+f)/c}%`,r===0?(n.width=`${100*(t[2]-t[0])/o}%`,n.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(r)}_createContainer(t){const{data:n,parent:{page:s,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",n.id),this instanceof fs||(o.tabIndex=kr);const{style:c}=o;if(c.zIndex=this.parent.zIndex++,n.alternativeText&&(o.title=n.alternativeText),n.noRotate&&o.classList.add("norotate"),!n.rect||this instanceof bh){const{rotation:E}=n;return!n.hasOwnCanvas&&E!==0&&this.setRotation(E,o),o}const{width:h,height:f}=this;if(!t&&n.borderStyle.width>0){c.borderWidth=`${n.borderStyle.width}px`;const E=n.borderStyle.horizontalCornerRadius,w=n.borderStyle.verticalCornerRadius;if(E>0||w>0){const L=`calc(${E}px * var(--total-scale-factor)) / calc(${w}px * var(--total-scale-factor))`;c.borderRadius=L}else if(this instanceof _y){const L=`calc(${h}px * var(--total-scale-factor)) / calc(${f}px * var(--total-scale-factor))`;c.borderRadius=L}switch(n.borderStyle.style){case Js.SOLID:c.borderStyle="solid";break;case Js.DASHED:c.borderStyle="dashed";break;case Js.BEVELED:At("Unimplemented border style: beveled");break;case Js.INSET:At("Unimplemented border style: inset");break;case Js.UNDERLINE:c.borderBottomStyle="solid";break}const T=n.borderColor||null;T?(this.#e=!0,c.borderColor=ct.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):c.borderWidth=0}const p=ct.normalizeRect([n.rect[0],s.view[3]-n.rect[1]+s.view[1],n.rect[2],s.view[3]-n.rect[3]+s.view[1]]),{pageWidth:g,pageHeight:y,pageX:b,pageY:A}=r.rawDims;c.left=`${100*(p[0]-b)/g}%`,c.top=`${100*(p[1]-A)/y}%`;const{rotation:S}=n;return n.hasOwnCanvas||S===0?(c.width=`${100*h/g}%`,c.height=`${100*f/y}%`):this.setRotation(S,o),o}setRotation(t,n=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:o,height:c}=this;t%180!==0&&([o,c]=[c,o]),n.style.width=`${100*o/s}%`,n.style.height=`${100*c/r}%`,n.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(n,s,r)=>{const o=r.detail[n],c=o[0],h=o.slice(1);r.target.style[s]=Em[`${c}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[s]:Em[`${c}_rgb`](h)})};return Ct(this,"_commonActions",{display:n=>{const{display:s}=n.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:s}=n.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{t("bgColor","backgroundColor",n)},fillColor:n=>{t("fillColor","backgroundColor",n)},fgColor:n=>{t("fgColor","color",n)},textColor:n=>{t("textColor","color",n)},borderColor:n=>{t("borderColor","borderColor",n)},strokeColor:n=>{t("strokeColor","borderColor",n)},rotation:n=>{const s=n.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,n){const s=this._commonActions;for(const r of Object.keys(n.detail))(t[r]||s[r])?.(n)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const s=this._commonActions;for(const[r,o]of Object.entries(n)){const c=s[r];if(c){const h={detail:{[r]:o},target:t};c(h),delete n[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[n,s,r,o]=this.data.rect.map(E=>Math.fround(E));if(t.length===8){const[E,w,T,L]=t.subarray(2,6);if(r===E&&o===w&&n===T&&s===L)return}const{style:c}=this.container;let h;if(this.#e){const{borderColor:E,borderWidth:w}=c;c.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${E}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const f=r-n,p=o-s,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const b=g.createElement("defs");y.append(b);const A=g.createElement("clipPath"),S=`clippath_${this.data.id}`;A.setAttribute("id",S),A.setAttribute("clipPathUnits","objectBoundingBox"),b.append(A);for(let E=2,w=t.length;E<w;E+=8){const T=t[E],L=t[E+1],R=t[E+2],N=t[E+3],C=g.createElement("rect"),U=(R-n)/f,z=(o-L)/p,V=(T-R)/f,G=(L-N)/p;C.setAttribute("x",U),C.setAttribute("y",z),C.setAttribute("width",V),C.setAttribute("height",G),A.append(C),h?.push(`<rect vector-effect="non-scaling-stroke" x="${U}" y="${z}" width="${V}" height="${G}"/>`)}this.#e&&(h.push("</g></svg>')"),c.backgroundImage=h.join("")),this.container.append(y),this.container.style.clipPath=`url(#${S})`}_createPopup(){const{data:t}=this,n=this.#n=new bh({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]});this.parent.div.append(n.render())}render(){It("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,n=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:c,exportValues:h}of r){if(o===-1||c===n)continue;const f=typeof h=="string"?h:null,p=document.querySelector(`[data-element-id="${c}"]`);if(p&&!cs.has(p)){At(`_getElementsByName - element not allowed: ${c}`);continue}s.push({id:c,exportValue:f,domElement:p})}return s}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,c=r.getAttribute("data-element-id");c!==n&&cs.has(r)&&s.push({id:c,exportValue:o,domElement:r})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const n of t)n.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:n})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class Ey extends se{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!n?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(n.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action),r=!0):t.attachment?(this.#e(s,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(this.#n(s,t.setOCGState),r=!0):t.dest?(this._bindLink(s,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&this.#t()}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),this.#t()}#e(t,n,s=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(n.content,n.filename,s),!1),this.#t()}#n(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),this.#t()}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const o=s.get(r);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1))}t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,n){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){At('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:r,refs:o,include:c}=n,h=[];if(r.length!==0||o.length!==0){const g=new Set(o);for(const y of r){const b=this._fieldObjects[y]||[];for(const{id:A}of b)g.add(A)}for(const y of Object.values(this._fieldObjects))for(const b of y)g.has(b.id)===c&&h.push(b)}else for(const g of Object.values(this._fieldObjects))h.push(...g);const f=this.annotationStorage,p=[];for(const g of h){const{id:y}=g;switch(p.push(y),g.type){case"text":{const A=g.defaultValue||"";f.setValue(y,{value:A});break}case"checkbox":case"radiobutton":{const A=g.defaultValue===g.exportValues;f.setValue(y,{value:A});break}case"combobox":case"listbox":{const A=g.defaultValue||"";f.setValue(y,{value:A});break}default:continue}const b=document.querySelector(`[data-element-id="${y}"]`);if(b){if(!cs.has(b)){At(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}}),!1}}}class nS extends se{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class fs extends se{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return we.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,n,s,r,o){s.includes("mouse")?t.addEventListener(s,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(s,c=>{if(s==="blur"){if(!n.focused||!c.relatedTarget)return;n.focused=!1}else if(s==="focus"){if(n.focused)return;n.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c)}})})}_setEventListeners(t,n,s,r){for(const[o,c]of s)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(n||={focused:!1}),this._setEventListener(t,n,o,c,r),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,n,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,n,"focus","Focus",null))}_setBackgroundColor(t){const n=this.data.backgroundColor||null;t.style.backgroundColor=n===null?"transparent":ct.makeHexColor(n[0],n[1],n[2])}_setTextStyle(t){const n=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||eS,o=t.style;let c;const h=2,f=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h),g=Math.round(p/(nh*r))||1,y=p/g;c=Math.min(r,f(y/nh))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h);c=Math.min(r,f(p/nh))}o.fontSize=`calc(${c}px * var(--total-scale-factor))`,o.color=ct.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=n[this.data.textAlignment])}_setRequired(t,n){n?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",n)}}class iS extends fs{constructor(t){const n=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:n})}setPropertyOnSiblings(t,n,s,r){const o=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[n]=s),o.setValue(c.id,{[r]:s})}render(){const t=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const r=t.getValue(n,{value:this.data.fieldValue});let o=r.value||"";const c=t.getValue(n,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let h=r.formattedValue||this.data.textContent?.join(`
`)||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const f={userValue:o,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=h??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",h??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),cs.add(s),s.setAttribute("data-element-id",n),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=kr,this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",g=>{t.setValue(n,{value:g.target.value}),this.setPropertyOnSiblings(s,"value",g.target.value,"value"),f.formattedValue=null}),s.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue??"";s.value=f.userValue=y,f.formattedValue=null});let p=g=>{const{formattedValue:y}=f;y!=null&&(g.target.value=y),g.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",y=>{if(f.focused)return;const{target:b}=y;f.userValue&&(b.value=f.userValue),f.lastCommittedValue=b.value,f.commitKey=1,this.data.actions?.Focus||(f.focused=!0)}),s.addEventListener("updatefromsandbox",y=>{this.showElementAndHideCanvas(y.target);const b={value(A){f.userValue=A.detail.value??"",t.setValue(n,{value:f.userValue.toString()}),A.target.value=f.userValue},formattedValue(A){const{formattedValue:S}=A.detail;f.formattedValue=S,S!=null&&A.target!==document.activeElement&&(A.target.value=S),t.setValue(n,{formattedValue:S})},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{const{charLimit:S}=A.detail,{target:E}=A;if(S===0){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",S);let w=f.userValue;!w||w.length<=S||(w=w.slice(0,S),E.value=f.userValue=w,t.setValue(n,{value:w}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:w,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(b,y)}),s.addEventListener("keydown",y=>{f.commitKey=1;let b=-1;if(y.key==="Escape"?b=0:y.key==="Enter"&&!this.data.multiLine?b=2:y.key==="Tab"&&(f.commitKey=3),b===-1)return;const{value:A}=y.target;f.lastCommittedValue!==A&&(f.lastCommittedValue=A,f.userValue=A,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:A,willCommit:!0,commitKey:b,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}))});const g=p;p=null,s.addEventListener("blur",y=>{if(!f.focused||!y.relatedTarget)return;this.data.actions?.Blur||(f.focused=!1);const{value:b}=y.target;f.userValue=b,f.lastCommittedValue!==b&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:b,willCommit:!0,commitKey:f.commitKey,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}),g(y)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",y=>{f.lastCommittedValue=null;const{data:b,target:A}=y,{value:S,selectionStart:E,selectionEnd:w}=A;let T=E,L=w;switch(y.inputType){case"deleteWordBackward":{const R=S.substring(0,E).match(/\w*[^\w]*$/);R&&(T-=R[0].length);break}case"deleteWordForward":{const R=S.substring(E).match(/^[^\w]*\w*/);R&&(L+=R[0].length);break}case"deleteContentBackward":E===w&&(T-=1);break;case"deleteContentForward":E===w&&(L+=1);break}y.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:S,change:b||"",willCommit:!1,selStart:T,selEnd:L}})}),this._setEventListeners(s,f,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],y=>y.target.value)}if(p&&s.addEventListener("blur",p),this.data.comb){const y=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${y}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class sS extends fs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class aS extends fs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,n=this.data,s=n.id;let r=t.getValue(s,{value:n.exportValue===n.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return cs.add(o),o.setAttribute("data-element-id",s),o.disabled=n.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=n.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",n.exportValue),o.tabIndex=kr,o.addEventListener("change",c=>{const{name:h,checked:f}=c.target;for(const p of this._getElementsByName(h,s)){const g=f&&p.exportValue===n.exportValue;p.domElement&&(p.domElement.checked=g),t.setValue(p.id,{value:g})}t.setValue(s,{value:f})}),o.addEventListener("resetform",c=>{const h=n.defaultFieldValue||"Off";c.target.checked=h===n.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const h={value(f){f.target.checked=f.detail.value!=="Off",t.setValue(s,{value:f.target.checked})}};this._dispatchEventFromSandbox(h,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class _y extends fs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,n=this.data,s=n.id;let r=t.getValue(s,{value:n.fieldValue===n.buttonValue}).value;if(typeof r=="string"&&(r=r!==n.buttonValue,t.setValue(s,{value:r})),r)for(const c of this._getElementsByName(n.fieldName,s))t.setValue(c.id,{value:!1});const o=document.createElement("input");if(cs.add(o),o.setAttribute("data-element-id",s),o.disabled=n.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=n.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=kr,o.addEventListener("change",c=>{const{name:h,checked:f}=c.target;for(const p of this._getElementsByName(h,s))t.setValue(p.id,{value:!1});t.setValue(s,{value:f})}),o.addEventListener("resetform",c=>{const h=n.defaultFieldValue;c.target.checked=h!=null&&h===n.buttonValue}),this.enableScripting&&this.hasJSActions){const c=n.buttonValue;o.addEventListener("updatefromsandbox",h=>{const f={value:p=>{const g=c===p.detail.value;for(const y of this._getElementsByName(p.target.name)){const b=g&&y.id===s;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(f,h)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class rS extends Ey{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const n=t.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class oS extends fs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,n=this.data.id,s=t.getValue(n,{value:this.data.fieldValue}),r=document.createElement("select");cs.add(r),r.setAttribute("data-element-id",n),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=kr;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const b of r.options)b.selected=b.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,s.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),o=!1),r.append(y)}let c=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),r.prepend(g),c=()=>{g.remove(),r.removeEventListener("input",c),c=null},r.addEventListener("input",c)}const h=g=>{const y=g?"value":"textContent",{options:b,multiple:A}=r;return A?Array.prototype.filter.call(b,S=>S.selected).map(S=>S[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let f=h(!1);const p=g=>{const y=g.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",g=>{const y={value(b){c?.();const A=b.detail.value,S=new Set(Array.isArray(A)?A:[A]);for(const E of r.options)E.selected=S.has(E.value);t.setValue(n,{value:h(!0)}),f=h(!1)},multipleSelection(b){r.multiple=!0},remove(b){const A=r.options,S=b.detail.remove;A[S].selected=!1,r.remove(S),A.length>0&&Array.prototype.findIndex.call(A,w=>w.selected)===-1&&(A[0].selected=!0),t.setValue(n,{value:h(!0),items:p(b)}),f=h(!1)},clear(b){for(;r.length!==0;)r.remove(0);t.setValue(n,{value:null,items:[]}),f=h(!1)},insert(b){const{index:A,displayValue:S,exportValue:E}=b.detail.insert,w=r.children[A],T=document.createElement("option");T.textContent=S,T.value=E,w?w.before(T):r.append(T),t.setValue(n,{value:h(!0),items:p(b)}),f=h(!1)},items(b){const{items:A}=b.detail;for(;r.length!==0;)r.remove(0);for(const S of A){const{displayValue:E,exportValue:w}=S,T=document.createElement("option");T.textContent=E,T.value=w,r.append(T)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(n,{value:h(!0),items:p(b)}),f=h(!1)},indices(b){const A=new Set(b.detail.indices);for(const S of b.target.options)S.selected=A.has(S.index);t.setValue(n,{value:h(!0)}),f=h(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,g)}),r.addEventListener("input",g=>{const y=h(!0),b=h(!1);t.setValue(n,{value:y}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:f,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):r.addEventListener("input",function(g){t.setValue(n,{value:h(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class bh extends se{constructor(t){const{data:n,elements:s}=t;super(t,{isRenderable:se._hasPopupData(n)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new lS({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",n.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(s=>`${kh}${s}`).join(",")),this.container}}class lS{#t=this.#R.bind(this);#e=this.#x.bind(this);#n=this.#C.bind(this);#i=this.#E.bind(this);#a=null;#s=null;#l=null;#o=null;#h=null;#c=null;#d=null;#u=!1;#f=null;#r=null;#p=null;#m=null;#g=null;#y=null;#b=!1;constructor({container:t,color:n,elements:s,titleObj:r,modificationDate:o,contentsObj:c,richText:h,parent:f,rect:p,parentRect:g,open:y}){this.#s=t,this.#g=r,this.#l=c,this.#m=h,this.#c=f,this.#a=n,this.#p=p,this.#d=g,this.#h=s,this.#o=Ph.toDateObject(o),this.trigger=s.flatMap(b=>b.getElementsToTriggerPopup());for(const b of this.trigger)b.addEventListener("click",this.#i),b.addEventListener("mouseenter",this.#n),b.addEventListener("mouseleave",this.#e),b.classList.add("popupTriggerArea");for(const b of s)b.container?.addEventListener("keydown",this.#t);this.#s.hidden=!0,y&&this.#E()}render(){if(this.#f)return;const t=this.#f=document.createElement("div");if(t.className="popup",this.#a){const o=t.style.outlineColor=ct.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`}const n=document.createElement("span");n.className="header";const s=document.createElement("h1");if(n.append(s),{dir:s.dir,str:s.textContent}=this.#g,t.append(n),this.#o){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#o.valueOf()})),n.append(o)}const r=this.#v;if(r)Xh.render({xfaHtml:r,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(this.#l);t.append(o)}this.#s.append(t)}get#v(){const t=this.#m,n=this.#l;return t?.str&&(!n?.str||n.str===t.str)&&this.#m.html||null}get#S(){return this.#v?.attributes?.style?.fontSize||0}get#_(){return this.#v?.attributes?.style?.color||null}#T(t){const n=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},r={style:{color:this.#_,fontSize:this.#S?`calc(${this.#S}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))n.push({name:"span",value:o,attributes:r});return s}_formatContents({str:t,dir:n}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=n;const r=t.split(/(?:\r\n?|\n)/);for(let o=0,c=r.length;o<c;++o){const h=r[o];s.append(document.createTextNode(h)),o<c-1&&s.append(document.createElement("br"))}return s}#R(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#u)&&this.#E()}updateEdited({rect:t,popupContent:n}){this.#y||={contentsObj:this.#l,richText:this.#m},t&&(this.#r=null),n&&(this.#m=this.#T(n),this.#l=null),this.#f?.remove(),this.#f=null}resetEdited(){this.#y&&({contentsObj:this.#l,richText:this.#m}=this.#y,this.#y=null,this.#f?.remove(),this.#f=null,this.#r=null)}#M(){if(this.#r!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:o}}}=this.#c;let c=!!this.#d,h=c?this.#d:this.#p;for(const S of this.#h)if(!h||ct.intersect(S.data.rect,h)!==null){h=S.data.rect,c=!0;break}const f=ct.normalizeRect([h[0],t[3]-h[1]+t[1],h[2],t[3]-h[3]+t[1]]),g=c?h[2]-h[0]+5:0,y=f[0]+g,b=f[1];this.#r=[100*(y-r)/n,100*(b-o)/s];const{style:A}=this.#s;A.left=`${this.#r[0]}%`,A.top=`${this.#r[1]}%`}#E(){this.#u=!this.#u,this.#u?(this.#C(),this.#s.addEventListener("click",this.#i),this.#s.addEventListener("keydown",this.#t)):(this.#x(),this.#s.removeEventListener("click",this.#i),this.#s.removeEventListener("keydown",this.#t))}#C(){this.#f||this.render(),this.isVisible?this.#u&&this.#s.classList.add("focused"):(this.#M(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#x(){this.#s.classList.remove("focused"),!(this.#u||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#b=this.isVisible,this.#b&&(this.#s.hidden=!0)}maybeShow(){this.#b&&(this.#f||this.#C(),this.#b=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class wy extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=vt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const n of this.textContent){const s=document.createElement("span");s.textContent=n,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class cS extends se{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class uS extends se{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",o/2),c.setAttribute("y",o/2),c.setAttribute("width",n-o),c.setAttribute("height",s-o),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class hS extends se{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",n/2),c.setAttribute("cy",s/2),c.setAttribute("rx",n/2-o/2),c.setAttribute("ry",s/2-o/2),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ty extends se{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:s,popupRef:r},width:o,height:c}=this;if(!n)return this.container;const h=this.svgFactory.create(o,c,!0);let f=[];for(let g=0,y=n.length;g<y;g+=2){const b=n[g]-t[0],A=t[3]-n[g+1];f.push(`${b},${A}`)}f=f.join(" ");const p=this.#t=this.svgFactory.createElement(this.svgElementName);return p.setAttribute("points",f),p.setAttribute("stroke-width",s.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),h.append(p),this.container.append(h),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class dS extends Ty{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class fS extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Yh extends se{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?vt.HIGHLIGHT:vt.INK}#n(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:s,borderStyle:r,popupRef:o}}=this,{transform:c,width:h,height:f}=this.#n(n,t),p=this.svgFactory.create(h,f,!0),g=this.#t=this.svgFactory.createElement("svg:g");p.append(g),g.setAttribute("stroke-width",r.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",c);for(let y=0,b=s.length;y<b;y++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",s[y].join(",")),g.append(A)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:s,rect:r}=t,o=this.#t;if(n>=0&&o.setAttribute("stroke-width",n||1),s)for(let c=0,h=this.#e.length;c<h;c++)this.#e[c].setAttribute("points",s[c].join(","));if(r){const{transform:c,width:h,height:f}=this.#n(this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${h} ${f}`),o.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class xy extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=vt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class pS extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class gS extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class mS extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Ry extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=vt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class yS extends se{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:n}=this.data;this.filename=n.filename,this.content=n.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:r}=we.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&this.#e()}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let $h=class Cy{#t=null;#e=null;#n=new Map;#i=null;constructor({div:t,accessibilityManager:n,annotationCanvasMap:s,annotationEditorUIManager:r,page:o,viewport:c,structTreeLayer:h}){this.div=t,this.#t=n,this.#e=s,this.#i=h||null,this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return this.#n.size>0}async#a(t,n){const s=t.firstChild||t,r=s.id=`${kh}${n}`,o=await this.#i?.getAriaAttributes(r);if(o)for(const[c,h]of o)s.setAttribute(c,h);this.div.append(t),this.#t?.moveElementInDOM(this.div,t,s,!1)}async render(t){const{annotations:n}=t,s=this.div;ki(s,this.viewport);const r=new Map,o={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Tr,annotationStorage:t.annotationStorage||new Hh,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const c of n){if(c.noHTML)continue;const h=c.annotationType===ee.POPUP;if(h){const g=r.get(c.id);if(!g)continue;o.elements=g}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;o.data=c;const f=_m.create(o);if(!f.isRenderable)continue;if(!h&&c.popupRef){const g=r.get(c.popupRef);g?g.push(f):r.set(c.popupRef,[f])}const p=f.render();c.hidden&&(p.style.visibility="hidden"),await this.#a(p,c.id),f._isEditable&&(this.#n.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}this.#s()}async addLinkAnnotations(t,n){const s={data:null,layer:this.div,linkService:n,svgFactory:new Tr,parent:this};for(const r of t){r.borderStyle||=Cy._defaultBorderStyle,s.data=r;const o=_m.create(s);if(!o.isRenderable)continue;const c=o.render();await this.#a(c,r.id)}}update({viewport:t}){const n=this.div;this.viewport=t,ki(n,{rotation:t.rotation}),this.#s(),n.hidden=!1}#s(){if(!this.#e)return;const t=this.div;for(const[n,s]of this.#e){const r=t.querySelector(`[data-annotation-id="${n}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s);const c=this.#n.get(n);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(n,r.id,s),c._hasNoCanvas=!1):c.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}static get _defaultBorderStyle(){return Ct(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Js.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const rl=/\r\n?|\n/g;class ye extends ut{#t;#e="";#n=`${this.id}-editor`;#i=null;#a;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=ye.prototype,n=o=>o.isEmpty(),s=ri.TRANSLATE_SMALL,r=ri.TRANSLATE_BIG;return Ct(this,"_keyboardManager",new Or([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}]]))}static _type="freetext";static _editorType=vt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||ye._defaultColor||ut._defaultLineColor,this.#a=t.fontSize||ye._defaultFontSize}static initialize(t,n){ut.initialize(t,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Mt.FREETEXT_SIZE:ye._defaultFontSize=n;break;case Mt.FREETEXT_COLOR:ye._defaultColor=n;break}}updateParams(t,n){switch(t){case Mt.FREETEXT_SIZE:this.#s(n);break;case Mt.FREETEXT_COLOR:this.#l(n);break}}static get defaultPropertiesToUpdate(){return[[Mt.FREETEXT_SIZE,ye._defaultFontSize],[Mt.FREETEXT_COLOR,ye._defaultColor||ut._defaultLineColor]]}get propertiesToUpdate(){return[[Mt.FREETEXT_SIZE,this.#a],[Mt.FREETEXT_COLOR,this.#t]]}#s(t){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#a)*this.parentScale),this.#a=r,this.#h()},s=this.#a;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(t){const n=r=>{this.#t=this.editorDiv.style.color=r},s=this.#t;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-ye._internalPadding*t,-(ye._internalPadding+this.#a)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#o(){const t=[];this.editorDiv.normalize();let n=null;for(const s of this.editorDiv.childNodes)n?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(ye.#c(s)),n=s);return t.join(`
`)}#h(){const[t,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,c=o.style.display,h=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=c,o.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/n):(this.width=s.height/t,this.height=s.width/n),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,n=this.#e=this.#o().trimEnd();if(t===n)return;const s=r=>{if(this.#e=r,!r){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(t)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ye._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,s.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[h,f]=this.getInitialTranslation();[h,f]=this.pageTranslationToScreen(h,f);const[p,g]=this.pageDimensions,[y,b]=this.pageTranslation;let A,S;switch(this.rotation){case 0:A=t+(c[0]-y)/p,S=n+this.height-(c[1]-b)/g;break;case 90:A=t+(c[0]-y)/p,S=n-(c[1]-b)/g,[h,f]=[f,-h];break;case 180:A=t-this.width+(c[0]-y)/p,S=n-(c[1]-b)/g,[h,f]=[-h,-f];break;case 270:A=t+(c[0]-y-this.height*g)/p,S=n+(c[1]-b-this.width*p)/g,[h,f]=[-f,h];break}this.setAt(A*r,S*o,h,f)}else this._moveAfterPaste(t,n);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(rl,"")}editorDivPaste(t){const n=t.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=ye.#f(n.getData("text")||"").replaceAll(rl,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const c=o.getRangeAt(0);if(!r.includes(`
`)){c.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:h,startOffset:f}=c,p=[],g=[];if(h.nodeType===Node.TEXT_NODE){const A=h.parentElement;if(g.push(h.nodeValue.slice(f).replaceAll(rl,"")),A!==this.editorDiv){let S=p;for(const E of this.editorDiv.childNodes){if(E===A){S=g;continue}S.push(ye.#c(E))}}p.push(h.nodeValue.slice(0,f).replaceAll(rl,""))}else if(h===this.editorDiv){let A=p,S=0;for(const E of this.editorDiv.childNodes)S++===f&&(A=g),A.push(ye.#c(E))}this.#e=`${p.join(`
`)}${r}${g.join(`
`)}`,this.#d();const y=new Range;let b=Math.sumPrecise(p.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const S=A.nodeValue.length;if(b<=S){y.setStart(A,b),y.setEnd(A,b);break}b-=S}o.removeAllRanges(),o.addRange(y)}#d(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}}#u(){return this.#e.replaceAll(""," ")}static#f(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(t,n,s){let r=null;if(t instanceof wy){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:f,rotation:p,id:g,popupRef:y},textContent:b,textPosition:A,parent:{page:{pageNumber:S}}}=t;if(!b||b.length===0)return null;r=t={annotationType:vt.FREETEXT,color:Array.from(h),fontSize:c,value:b.join(`
`),position:A,pageIndex:S-1,rect:f.slice(0),rotation:p,id:g,deleted:!1,popupRef:y}}const o=await super.deserialize(t,n,s);return o.#a=t.fontSize,o.#t=ct.makeHexColor(...t.color),o.#e=ye.#f(t.value),o.annotationElementId=t.id||null,o._initialData=r,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=ye._internalPadding*this.parentScale,s=this.getRect(n,n),r=ut._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),o={annotationType:vt.FREETEXT,color:r,fontSize:this.#a,value:this.#u(),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(o.isCopy=!0,o):this.annotationElementId&&!this.#r(o)?null:(o.id=this.annotationElementId,o)}#r(t){const{value:n,fontSize:s,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==n||t.fontSize!==s||t.color.some((c,h)=>c!==r[h])||t.pageIndex!==o}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:s}=n;s.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,s.color=this.#t,n.replaceChildren();for(const o of this.#e.split(`
`)){const c=document.createElement("div");c.append(o?document.createTextNode(o):document.createElement("br")),n.append(c)}const r=ye._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:this.#e}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class et{static PRECISION=1e-4;toSVGPath(){It("Abstract method `toSVGPath` must be implemented.")}get box(){It("Abstract getter `box` must be implemented.")}serialize(t,n){It("Abstract method `serialize` must be implemented.")}static _rescale(t,n,s,r,o,c){c||=new Float32Array(t.length);for(let h=0,f=t.length;h<f;h+=2)c[h]=n+t[h]*r,c[h+1]=s+t[h+1]*o;return c}static _rescaleAndSwap(t,n,s,r,o,c){c||=new Float32Array(t.length);for(let h=0,f=t.length;h<f;h+=2)c[h]=n+t[h+1]*r,c[h+1]=s+t[h]*o;return c}static _translate(t,n,s,r){r||=new Float32Array(t.length);for(let o=0,c=t.length;o<c;o+=2)r[o]=n+t[o],r[o+1]=s+t[o+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,n,s,r,o){switch(o){case 90:return[1-n/s,t/r];case 180:return[1-t/s,1-n/r];case 270:return[n/s,1-t/r];default:return[t/s,n/r]}}static _normalizePagePoint(t,n,s){switch(s){case 90:return[1-n,t];case 180:return[1-t,1-n];case 270:return[n,1-t];default:return[t,n]}}static createBezierPoints(t,n,s,r,o,c){return[(t+5*s)/6,(n+5*r)/6,(5*s+o)/6,(5*r+c)/6,(s+o)/2,(r+c)/2]}}class ns{#t;#e=[];#n;#i;#a=[];#s=new Float32Array(18);#l;#o;#h;#c;#d;#u;#f=[];static#r=8;static#p=2;static#m=ns.#r+ns.#p;constructor({x:t,y:n},s,r,o,c,h=0){this.#t=s,this.#u=o*r,this.#i=c,this.#s.set([NaN,NaN,NaN,NaN,t,n],6),this.#n=h,this.#c=ns.#r*r,this.#h=ns.#m*r,this.#d=r,this.#f.push(t,n)}isEmpty(){return isNaN(this.#s[8])}#g(){const t=this.#s.subarray(4,6),n=this.#s.subarray(16,18),[s,r,o,c]=this.#t;return[(this.#l+(t[0]-n[0])/2-s)/o,(this.#o+(t[1]-n[1])/2-r)/c,(this.#l+(n[0]-t[0])/2-s)/o,(this.#o+(n[1]-t[1])/2-r)/c]}add({x:t,y:n}){this.#l=t,this.#o=n;const[s,r,o,c]=this.#t;let[h,f,p,g]=this.#s.subarray(8,12);const y=t-p,b=n-g,A=Math.hypot(y,b);if(A<this.#h)return!1;const S=A-this.#c,E=S/A,w=E*y,T=E*b;let L=h,R=f;h=p,f=g,p+=w,g+=T,this.#f?.push(t,n);const N=-T/S,C=w/S,U=N*this.#u,z=C*this.#u;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([p+U,g+z],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([p-U,g-z],16),isNaN(this.#s[6])?(this.#a.length===0&&(this.#s.set([h+U,f+z],2),this.#a.push(NaN,NaN,NaN,NaN,(h+U-s)/o,(f+z-r)/c),this.#s.set([h-U,f-z],14),this.#e.push(NaN,NaN,NaN,NaN,(h-U-s)/o,(f-z-r)/c)),this.#s.set([L,R,h,f,p,g],6),!this.isEmpty()):(this.#s.set([L,R,h,f,p,g],6),Math.abs(Math.atan2(R-f,L-h)-Math.atan2(T,w))<Math.PI/2?([h,f,p,g]=this.#s.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((h+p)/2-s)/o,((f+g)/2-r)/c),[h,f,L,R]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((L+h)/2-s)/o,((R+f)/2-r)/c),!0):([L,R,h,f,p,g]=this.#s.subarray(0,6),this.#a.push(((L+5*h)/6-s)/o,((R+5*f)/6-r)/c,((5*h+p)/6-s)/o,((5*f+g)/6-r)/c,((h+p)/2-s)/o,((f+g)/2-r)/c),[p,g,h,f,L,R]=this.#s.subarray(12,18),this.#e.push(((L+5*h)/6-s)/o,((R+5*f)/6-r)/c,((5*h+p)/6-s)/o,((5*f+g)/6-r)/c,((h+p)/2-s)/o,((f+g)/2-r)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,n=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#y();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#v(s);for(let r=n.length-6;r>=6;r-=6)isNaN(n[r])?s.push(`L${n[r+4]} ${n[r+5]}`):s.push(`C${n[r]} ${n[r+1]} ${n[r+2]} ${n[r+3]} ${n[r+4]} ${n[r+5]}`);return this.#b(s),s.join(" ")}#y(){const[t,n,s,r]=this.#t,[o,c,h,f]=this.#g();return`M${(this.#s[2]-t)/s} ${(this.#s[3]-n)/r} L${(this.#s[4]-t)/s} ${(this.#s[5]-n)/r} L${o} ${c} L${h} ${f} L${(this.#s[16]-t)/s} ${(this.#s[17]-n)/r} L${(this.#s[14]-t)/s} ${(this.#s[15]-n)/r} Z`}#b(t){const n=this.#e;t.push(`L${n[4]} ${n[5]} Z`)}#v(t){const[n,s,r,o]=this.#t,c=this.#s.subarray(4,6),h=this.#s.subarray(16,18),[f,p,g,y]=this.#g();t.push(`L${(c[0]-n)/r} ${(c[1]-s)/o} L${f} ${p} L${g} ${y} L${(h[0]-n)/r} ${(h[1]-s)/o}`)}newFreeDrawOutline(t,n,s,r,o,c){return new My(t,n,s,r,o,c)}getOutlines(){const t=this.#a,n=this.#e,s=this.#s,[r,o,c,h]=this.#t,f=new Float32Array((this.#f?.length??0)+2);for(let y=0,b=f.length-2;y<b;y+=2)f[y]=(this.#f[y]-r)/c,f[y+1]=(this.#f[y+1]-o)/h;if(f[f.length-2]=(this.#l-r)/c,f[f.length-1]=(this.#o-o)/h,isNaN(s[6])&&!this.isEmpty())return this.#S(f);const p=new Float32Array(this.#a.length+24+this.#e.length);let g=t.length;for(let y=0;y<g;y+=2){if(isNaN(t[y])){p[y]=p[y+1]=NaN;continue}p[y]=t[y],p[y+1]=t[y+1]}g=this.#T(p,g);for(let y=n.length-6;y>=6;y-=6)for(let b=0;b<6;b+=2){if(isNaN(n[y+b])){p[g]=p[g+1]=NaN,g+=2;continue}p[g]=n[y+b],p[g+1]=n[y+b+1],g+=2}return this.#_(p,g),this.newFreeDrawOutline(p,f,this.#t,this.#d,this.#n,this.#i)}#S(t){const n=this.#s,[s,r,o,c]=this.#t,[h,f,p,g]=this.#g(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(n[2]-s)/o,(n[3]-r)/c,NaN,NaN,NaN,NaN,(n[4]-s)/o,(n[5]-r)/c,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(n[16]-s)/o,(n[17]-r)/c,NaN,NaN,NaN,NaN,(n[14]-s)/o,(n[15]-r)/c],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#n,this.#i)}#_(t,n){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],n),n+=6}#T(t,n){const s=this.#s.subarray(4,6),r=this.#s.subarray(16,18),[o,c,h,f]=this.#t,[p,g,y,b]=this.#g();return t.set([NaN,NaN,NaN,NaN,(s[0]-o)/h,(s[1]-c)/f,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(r[0]-o)/h,(r[1]-c)/f],n),n+=24}}class My extends et{#t;#e=new Float32Array(4);#n;#i;#a;#s;#l;constructor(t,n,s,r,o,c){super(),this.#l=t,this.#a=n,this.#t=s,this.#s=r,this.#n=o,this.#i=c,this.lastPoint=[NaN,NaN],this.#o(c);const[h,f,p,g]=this.#e;for(let y=0,b=t.length;y<b;y+=2)t[y]=(t[y]-h)/p,t[y+1]=(t[y+1]-f)/g;for(let y=0,b=n.length;y<b;y+=2)n[y]=(n[y]-h)/p,n[y+1]=(n[y+1]-f)/g}toSVGPath(){const t=[`M${this.#l[4]} ${this.#l[5]}`];for(let n=6,s=this.#l.length;n<s;n+=6){if(isNaN(this.#l[n])){t.push(`L${this.#l[n+4]} ${this.#l[n+5]}`);continue}t.push(`C${this.#l[n]} ${this.#l[n+1]} ${this.#l[n+2]} ${this.#l[n+3]} ${this.#l[n+4]} ${this.#l[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,s,r],o){const c=s-t,h=r-n;let f,p;switch(o){case 0:f=et._rescale(this.#l,t,r,c,-h),p=et._rescale(this.#a,t,r,c,-h);break;case 90:f=et._rescaleAndSwap(this.#l,t,n,c,h),p=et._rescaleAndSwap(this.#a,t,n,c,h);break;case 180:f=et._rescale(this.#l,s,n,-c,h),p=et._rescale(this.#a,s,n,-c,h);break;case 270:f=et._rescaleAndSwap(this.#l,s,r,-c,-h),p=et._rescaleAndSwap(this.#a,s,r,-c,-h);break}return{outline:Array.from(f),points:[Array.from(p)]}}#o(t){const n=this.#l;let s=n[4],r=n[5];const o=[s,r,s,r];let c=s,h=r;const f=t?Math.max:Math.min;for(let g=6,y=n.length;g<y;g+=6){const b=n[g+4],A=n[g+5];if(isNaN(n[g]))ct.pointBoundingBox(b,A,o),h<A?(c=b,h=A):h===A&&(c=f(c,b));else{const S=[1/0,1/0,-1/0,-1/0];ct.bezierBoundingBox(s,r,...n.slice(g,g+6),S),ct.rectBoundingBox(...S,o),h<S[3]?(c=S[2],h=S[3]):h===S[3]&&(c=f(c,S[2]))}s=b,r=A}const p=this.#e;p[0]=o[0]-this.#n,p[1]=o[1]-this.#n,p[2]=o[2]-o[0]+2*this.#n,p[3]=o[3]-o[1]+2*this.#n,this.lastPoint=[c,h]}get box(){return this.#e}newOutliner(t,n,s,r,o,c=0){return new ns(t,n,s,r,o,c)}getNewOutline(t,n){const[s,r,o,c]=this.#e,[h,f,p,g]=this.#t,y=o*p,b=c*g,A=s*p+h,S=r*g+f,E=this.newOutliner({x:this.#a[0]*y+A,y:this.#a[1]*b+S},this.#t,this.#s,t,this.#i,n??this.#n);for(let w=2;w<this.#a.length;w+=2)E.add({x:this.#a[w]*y+A,y:this.#a[w+1]*b+S});return E.getOutlines()}}class vh{#t;#e;#n=[];#i=[];constructor(t,n=0,s=0,r=!0){const o=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:A,y:S,width:E,height:w}of t){const T=Math.floor((A-n)/c)*c,L=Math.ceil((A+E+n)/c)*c,R=Math.floor((S-n)/c)*c,N=Math.ceil((S+w+n)/c)*c,C=[T,R,N,!0],U=[L,R,N,!1];this.#n.push(C,U),ct.rectBoundingBox(T,R,L,N,o)}const h=o[2]-o[0]+2*s,f=o[3]-o[1]+2*s,p=o[0]-s,g=o[1]-s,y=this.#n.at(r?-1:-2),b=[y[0],y[2]];for(const A of this.#n){const[S,E,w]=A;A[0]=(S-p)/h,A[1]=(E-g)/f,A[2]=(w-g)/f}this.#t=new Float32Array([p,g,h,f]),this.#e=b}getOutlines(){this.#n.sort((n,s)=>n[0]-s[0]||n[1]-s[1]||n[2]-s[2]);const t=[];for(const n of this.#n)n[3]?(t.push(...this.#h(n)),this.#l(n)):(this.#o(n),t.push(...this.#h(n)));return this.#a(t)}#a(t){const n=[],s=new Set;for(const c of t){const[h,f,p]=c;n.push([h,f,c],[h,p,c])}n.sort((c,h)=>c[1]-h[1]||c[0]-h[0]);for(let c=0,h=n.length;c<h;c+=2){const f=n[c][2],p=n[c+1][2];f.push(p),p.push(f),s.add(f),s.add(p)}const r=[];let o;for(;s.size>0;){const c=s.values().next().value;let[h,f,p,g,y]=c;s.delete(c);let b=h,A=f;for(o=[h,p],r.push(o);;){let S;if(s.has(g))S=g;else if(s.has(y))S=y;else break;s.delete(S),[h,f,p,g,y]=S,b!==h&&(o.push(b,A,h,A===f?f:p),b=h),A=A===f?p:f}o.push(b,A)}return new bS(r,this.#t,this.#e)}#s(t){const n=this.#i;let s=0,r=n.length-1;for(;s<=r;){const o=s+r>>1,c=n[o][0];if(c===t)return o;c<t?s=o+1:r=o-1}return r+1}#l([,t,n]){const s=this.#s(t);this.#i.splice(s,0,[t,n])}#o([,t,n]){const s=this.#s(t);for(let r=s;r<this.#i.length;r++){const[o,c]=this.#i[r];if(o!==t)break;if(o===t&&c===n){this.#i.splice(r,1);return}}for(let r=s-1;r>=0;r--){const[o,c]=this.#i[r];if(o!==t)break;if(o===t&&c===n){this.#i.splice(r,1);return}}}#h(t){const[n,s,r]=t,o=[[n,s,r]],c=this.#s(r);for(let h=0;h<c;h++){const[f,p]=this.#i[h];for(let g=0,y=o.length;g<y;g++){const[,b,A]=o[g];if(!(p<=b||A<=f)){if(b>=f){if(A>p)o[g][1]=p;else{if(y===1)return[];o.splice(g,1),g--,y--}continue}o[g][2]=f,A>p&&o.push([n,p,A])}}}return o}}class bS extends et{#t;#e;constructor(t,n,s){super(),this.#e=t,this.#t=n,this.lastPoint=s}toSVGPath(){const t=[];for(const n of this.#e){let[s,r]=n;t.push(`M${s} ${r}`);for(let o=2;o<n.length;o+=2){const c=n[o],h=n[o+1];c===s?(t.push(`V${h}`),r=h):h===r&&(t.push(`H${c}`),s=c)}t.push("Z")}return t.join(" ")}serialize([t,n,s,r],o){const c=[],h=s-t,f=r-n;for(const p of this.#e){const g=new Array(p.length);for(let y=0;y<p.length;y+=2)g[y]=t+p[y]*h,g[y+1]=r-p[y+1]*f;c.push(g)}return c}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Ah extends ns{newFreeDrawOutline(t,n,s,r,o,c){return new vS(t,n,s,r,o,c)}}class vS extends My{newOutliner(t,n,s,r,o,c=0){return new Ah(t,n,s,r,o,c)}}class on{#t=null;#e=null;#n;#i=null;#a=!1;#s=!1;#l=null;#o;#h=null;#c=null;#d;static#u=null;static get _keyboardManager(){return Ct(this,"_keyboardManager",new Or([[["Escape","mac+Escape"],on.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],on.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],on.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],on.prototype._moveToPrevious],[["Home","mac+Home"],on.prototype._moveToBeginning],[["End","mac+End"],on.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:n=null}){t?(this.#s=!1,this.#d=Mt.HIGHLIGHT_COLOR,this.#l=t):(this.#s=!0,this.#d=Mt.HIGHLIGHT_DEFAULT_COLOR),this.#c=t?._uiManager||n,this.#o=this.#c._eventBus,this.#n=t?.color||this.#c?.highlightColors.values().next().value||"#FFFF98",on.#u||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const n=this.#c._signal;t.addEventListener("click",this.#m.bind(this),{signal:n}),t.addEventListener("keydown",this.#p.bind(this),{signal:n});const s=this.#e=document.createElement("span");return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=this.#n,t.append(s),t}renderMainDropdown(){const t=this.#i=this.#f();return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}#f(){const t=document.createElement("div"),n=this.#c._signal;t.addEventListener("contextmenu",An,{signal:n}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,r]of this.#c.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=s,o.setAttribute("data-l10n-id",on.#u[s]);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=r,o.setAttribute("aria-selected",r===this.#n),o.addEventListener("click",this.#r.bind(this,r),{signal:n}),t.append(o)}return t.addEventListener("keydown",this.#p.bind(this),{signal:n}),t}#r(t,n){n.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#m(t);return}const n=t.target.getAttribute("data-color");n&&this.#r(n,t)}_moveToNext(t){if(!this.#y){this.#m(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#y&&this._hideDropdownFromKeyboard();return}this.#y||this.#m(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#y){this.#m(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#y){this.#m(t);return}this.#i.lastChild?.focus()}#p(t){on._keyboardManager.exec(this,t)}#m(t){if(this.#y){this.hideDropdown();return}if(this.#a=t.detail===0,this.#h||(this.#h=new AbortController,window.addEventListener("pointerdown",this.#g.bind(this),{signal:this.#c.combinedSignal(this.#h)})),this.#i){this.#i.classList.remove("hidden");return}const n=this.#i=this.#f();this.#t.append(n)}#g(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#h?.abort(),this.#h=null}get#y(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#y){this.#l?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const n=this.#c.highlightColors.values();for(const s of this.#i.children)s.setAttribute("aria-selected",n.next().value===t)}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class ne extends ut{#t=null;#e=0;#n;#i=null;#a=null;#s=null;#l=null;#o=0;#h=null;#c=null;#d=null;#u=!1;#f=null;#r;#p=null;#m="";#g;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=vt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=ne.prototype;return Ct(this,"_keyboardManager",new Or([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||ne._defaultColor,this.#g=t.thickness||ne._defaultThickness,this.#r=t.opacity||ne._defaultOpacity,this.#n=t.boxes||null,this.#y=t.methodOfCreation||"",this.#m=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#u=!0,this.#v(t),this.#M()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#l=t.focusNode,this.#o=t.focusOffset,this.#b(),this.#M(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#u?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#g,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#b(){const t=new vh(this.#n,.001);this.#c=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#c.box;const n=new vh(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#s=n.getOutlines();const{lastPoint:s}=this.#s;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]}#v({highlightOutlines:t,highlightId:n,clipPathId:s}){this.#c=t;const r=1.5;if(this.#s=t.getNewOutline(this.#g/2+r,.0025),n>=0)this.#d=n,this.#i=s,this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:ne.#E(this.#c.box,(g-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:ne.#E(this.#s.box,g),path:{d:this.#s.toSVGPath()}})}const[o,c,h,f]=t.box;switch(this.rotation){case 0:this.x=o,this.y=c,this.width=h,this.height=f;break;case 90:{const[g,y]=this.parentDimensions;this.x=c,this.y=1-o,this.width=h*y/g,this.height=f*g/y;break}case 180:this.x=1-o,this.y=1-c,this.width=h,this.height=f;break;case 270:{const[g,y]=this.parentDimensions;this.x=1-c,this.y=o,this.width=h*y/g,this.height=f*g/y;break}}const{lastPoint:p}=this.#s;this.#f=[(p[0]-o)/h,(p[1]-c)/f]}static initialize(t,n){ut.initialize(t,n),ne._defaultColor||=n.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,n){switch(t){case Mt.HIGHLIGHT_DEFAULT_COLOR:ne._defaultColor=n;break;case Mt.HIGHLIGHT_THICKNESS:ne._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return this.#f}updateParams(t,n){switch(t){case Mt.HIGHLIGHT_COLOR:this.#S(n);break;case Mt.HIGHLIGHT_THICKNESS:this.#_(n);break}}static get defaultPropertiesToUpdate(){return[[Mt.HIGHLIGHT_DEFAULT_COLOR,ne._defaultColor],[Mt.HIGHLIGHT_THICKNESS,ne._defaultThickness]]}get propertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,this.color||ne._defaultColor],[Mt.HIGHLIGHT_THICKNESS,this.#g||ne._defaultThickness],[Mt.HIGHLIGHT_FREE,this.#u]]}#S(t){const n=(o,c)=>{this.color=o,this.#r=c,this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:o,"fill-opacity":c}}),this.#a?.updateColor(o)},s=this.color,r=this.#r;this.addCommands({cmd:n.bind(this,t,ne._defaultOpacity),undo:n.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#_(t){const n=this.#g,s=r=>{this.#g=r,this.#T(r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(this.#a=new on({editor:this}),t.addColorPicker(this.#a)),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#O())}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,this.#O())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#R(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#M(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let n=!1;this.parent&&!t?this.#R():t&&(this.#M(t),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),n&&this.select()}#T(t){if(!this.#u)return;this.#v({highlightOutlines:this.#c.getNewOutline(t/2)}),this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)}#R(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#M(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#c.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#r},rootClass:{highlight:!0,free:this.#u},path:{d:this.#c.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#u},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#u),this.#h&&(this.#h.style.clipPath=this.#i))}static#E([t,n,s,r],o){switch(o){case 90:return[1-n-r,t,r,s];case 180:return[1-t-s,1-n-r,s,r];case 270:return[n,1-t-s,r,s]}return[t,n,s,r]}rotate(t){const{drawLayer:n}=this.parent;let s;this.#u?(t=(t-this.rotation+360)%360,s=ne.#E(this.#c.box,t)):s=ne.#E([this.x,this.y,this.width,this.height],t),n.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),n.updateProperties(this.#p,{bbox:ne.#E(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#m&&(t.setAttribute("aria-label",this.#m),t.setAttribute("role","mark")),this.#u?t.classList.add("free"):this.div.addEventListener("keydown",this.#C.bind(this),{signal:this._uiManager._signal});const n=this.#h=document.createElement("div");t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=this.#i;const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),ny(this,this.#h,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#C(t){ne._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#x(!0);break;case 1:case 3:this.#x(!1);break}}#x(t){if(!this.#t)return;const n=window.getSelection();t?n.setPosition(this.#t,this.#e):n.setPosition(this.#l,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#u||this.#x(!1))}get _mustFixPosition(){return!this.#u}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#O(){return this.#u?this.rotation:0}#L(){if(this.#u)return null;const[t,n]=this.pageDimensions,[s,r]=this.pageTranslation,o=this.#n,c=new Float32Array(o.length*8);let h=0;for(const{x:f,y:p,width:g,height:y}of o){const b=f*t+s,A=(1-p)*n+r;c[h]=c[h+4]=b,c[h+1]=c[h+3]=A,c[h+2]=c[h+6]=b+g*t,c[h+5]=c[h+7]=A-y*n,h+=8}return c}#N(t){return this.#c.serialize(t,this.#O())}static startHighlighting(t,n,{target:s,x:r,y:o}){const{x:c,y:h,width:f,height:p}=s.getBoundingClientRect(),g=new AbortController,y=t.combinedSignal(g),b=A=>{g.abort(),this.#w(t,A)};window.addEventListener("blur",b,{signal:y}),window.addEventListener("pointerup",b,{signal:y}),window.addEventListener("pointerdown",ie,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",An,{signal:y}),s.addEventListener("pointermove",this.#F.bind(this,t),{signal:y}),this._freeHighlight=new Ah({x:r,y:o},[c,h,f,p],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#F(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#w(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,n,s){let r=null;if(t instanceof xy){const{data:{quadPoints:S,rect:E,rotation:w,id:T,color:L,opacity:R,popupRef:N},parent:{page:{pageNumber:C}}}=t;r=t={annotationType:vt.HIGHLIGHT,color:Array.from(L),opacity:R,quadPoints:S,boxes:null,pageIndex:C-1,rect:E.slice(0),rotation:w,id:T,deleted:!1,popupRef:N}}else if(t instanceof Yh){const{data:{inkLists:S,rect:E,rotation:w,id:T,color:L,borderStyle:{rawWidth:R},popupRef:N},parent:{page:{pageNumber:C}}}=t;r=t={annotationType:vt.HIGHLIGHT,color:Array.from(L),thickness:R,inkLists:S,boxes:null,pageIndex:C-1,rect:E.slice(0),rotation:w,id:T,deleted:!1,popupRef:N}}const{color:o,quadPoints:c,inkLists:h,opacity:f}=t,p=await super.deserialize(t,n,s);p.color=ct.makeHexColor(...o),p.#r=f||1,h&&(p.#g=t.thickness),p.annotationElementId=t.id||null,p._initialData=r;const[g,y]=p.pageDimensions,[b,A]=p.pageTranslation;if(c){const S=p.#n=[];for(let E=0;E<c.length;E+=8)S.push({x:(c[E]-b)/g,y:1-(c[E+1]-A)/y,width:(c[E+2]-c[E])/g,height:(c[E+1]-c[E+5])/y});p.#b(),p.#M(),p.rotate(p.rotation)}else if(h){p.#u=!0;const S=h[0],E={x:S[0]-b,y:y-(S[1]-A)},w=new Ah(E,[0,0,g,y],1,p.#g/2,!0,.001);for(let R=0,N=S.length;R<N;R+=2)E.x=S[R]-b,E.y=y-(S[R+1]-A),w.add(E);const{id:T,clipPathId:L}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:w.toSVGPath()}},!0,!0);p.#v({highlightOutlines:w.getOutlines(),highlightId:T,clipPathId:L}),p.#M(),p.rotate(p.parentRotation)}return p}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),s=ut._colorManager.convert(this.color),r={annotationType:vt.HIGHLIGHT,color:s,opacity:this.#r,thickness:this.#g,quadPoints:this.#L(),outlines:this.#N(n),pageIndex:this.pageIndex,rect:n,rotation:this.#O(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#A(r)?null:(r.id=this.annotationElementId,r)}#A(t){const{color:n}=this._initialData;return t.color.some((s,r)=>s!==n[r])}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class Dy{#t=Object.create(null);updateProperty(t,n){this[t]=n,this.updateSVGProperty(t,n)}updateProperties(t){if(t)for(const[n,s]of Object.entries(t))n.startsWith("_")||this.updateProperty(n,s)}updateSVGProperty(t,n){this.#t[t]=n}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){It("Not implemented")}}class ft extends ut{#t=null;#e;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#a=null;static#s=NaN;static#l=null;static#o=null;static#h=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(this.#c(t),this.#f())}#c({drawOutlines:t,drawId:n,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#m(t.box)}#d(t,n){const{id:s}=n.drawLayer.draw(ft._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,n){const s=new Set(Object.keys(t));for(const[r,o]of Object.entries(n))s.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){It("Not implemented")}static get typesMap(){It("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,n),this._currentParent&&(ft.#n.updateProperty(s,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)t.push([s,n[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[s,r]of this.constructor.typesMap)t.push([s,n[r]]);return t}_updateProperty(t,n,s){const r=this._drawingOptions,o=r[n],c=h=>{r.updateProperty(n,h);const f=this.#t.updateProperty(n,h);f&&this.#m(f),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:c.bind(this,s),undo:c.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#g()}))}_onTranslating(t,n){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#u(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#m(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#u()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),n&&this.select()}#u(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#r([t,n,s,r]){const{parentDimensions:[o,c],rotation:h}=this;switch(h){case 90:return[n,1-t,s*(c/o),r*(o/c)];case 180:return[1-t,1-n,s,r];case 270:return[1-n,t,s*(c/o),r*(o/c)];default:return[t,n,s,r]}}#p(){const{x:t,y:n,width:s,height:r,parentDimensions:[o,c],rotation:h}=this;switch(h){case 90:return[1-n,t,s*(o/c),r*(c/o)];case 180:return[1-t,1-n,s,r];case 270:return[n,1-t,s*(o/c),r*(c/o)];default:return[t,n,s,r]}}#m(t){if([this.x,this.y,this.width,this.height]=this.#r(t),this.div){this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)}this._onResized()}#g(){const{x:t,y:n,width:s,height:r,rotation:o,parentRotation:c,parentDimensions:[h,f]}=this;switch((o*4+c)/90){case 1:return[1-n-r,t,r,s];case 2:return[1-t-s,1-n-r,s,r];case 3:return[n,1-t-s,r,s];case 4:return[t,n-s*(h/f),r*(f/h),s*(h/f)];case 5:return[1-n,t,s*(h/f),r*(f/h)];case 6:return[1-t-r*(f/h),1-n,r*(f/h),s*(h/f)];case 7:return[n-s*(h/f),1-t-r*(f/h),s*(h/f),r*(f/h)];case 8:return[t-s,n-r,s,r];case 9:return[1-n,t-s,r,s];case 10:return[1-t,1-n,s,r];case 11:return[n-r,1-t,r,s];case 12:return[t-r*(f/h),n,r*(f/h),s*(h/f)];case 13:return[1-n-s*(h/f),t-r*(f/h),s*(h/f),r*(f/h)];case 14:return[1-t,1-n-s*(h/f),r*(f/h),s*(h/f)];case 15:return[n,1-t,s*(h/f),r*(f/h)];default:return[t,n,s,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties({bbox:this.#g()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#m(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[o,c]=this.parentDimensions;return this.setDims(this.width*o,this.height*c),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),s}static createDrawerInstance(t,n,s,r,o){It("Not implemented")}static startDrawing(t,n,s,r){const{target:o,offsetX:c,offsetY:h,pointerId:f,pointerType:p}=r;if(ft.#l&&ft.#l!==p)return;const{viewport:{rotation:g}}=t,{width:y,height:b}=o.getBoundingClientRect(),A=ft.#i=new AbortController,S=t.combinedSignal(A);if(ft.#s||=f,ft.#l??=p,window.addEventListener("pointerup",E=>{ft.#s===E.pointerId?this._endDraw(E):ft.#o?.delete(E.pointerId)},{signal:S}),window.addEventListener("pointercancel",E=>{ft.#s===E.pointerId?this._currentParent.endDrawingSession():ft.#o?.delete(E.pointerId)},{signal:S}),window.addEventListener("pointerdown",E=>{ft.#l===E.pointerType&&((ft.#o||=new Set).add(E.pointerId),ft.#n.isCancellable()&&(ft.#n.removeLastElement(),ft.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:S}),window.addEventListener("contextmenu",An,{signal:S}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:S}),o.addEventListener("touchmove",E=>{E.timeStamp===ft.#h&&ie(E)},{signal:S}),t.toggleDrawing(),n._editorUndoBar?.hide(),ft.#n){t.drawLayer.updateProperties(this._currentDrawId,ft.#n.startNew(c,h,y,b,g));return}n.updateUIForDefaultProperties(this),ft.#n=this.createDrawerInstance(c,h,y,b,g),ft.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(ft.#a.toSVGProperties(),ft.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(ft.#h=-1,!ft.#n)return;const{offsetX:n,offsetY:s,pointerId:r}=t;if(ft.#s===r){if(ft.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,ft.#n.add(n,s)),ft.#h=t.timeStamp,ie(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,ft.#n=null,ft.#a=null,ft.#l=null,ft.#h=NaN),ft.#i&&(ft.#i.abort(),ft.#i=null,ft.#s=NaN,ft.#o=null)}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),t?.target===n.div&&n.drawLayer.updateProperties(this._currentDrawId,ft.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=ft.#n,r=this._currentDrawId,o=s.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(r,s.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:Mt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Mt.DRAW_STEP),!ft.#n.isEmpty()){const{pageDimensions:[s,r],scale:o}=n,c=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:ft.#n.getOutlines(s*o,r*o,o,this._INNER_MARGIN),drawingOptions:ft.#a,mustBeCommitted:!t});return this._cleanup(!0),c}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,s,r,o,c){It("Not implemented")}static async deserialize(t,n,s){const{rawDims:{pageWidth:r,pageHeight:o,pageX:c,pageY:h}}=n.viewport,f=this.deserializeDraw(c,h,r,o,this._INNER_MARGIN,t),p=await super.deserialize(t,n,s);return p.createDrawingOptions(t),p.#c({drawOutlines:f}),p.#f(),p.onScaleChanging(),p.rotate(),p}serializeDraw(t){const[n,s]=this.pageTranslation,[r,o]=this.pageDimensions;return this.#t.serialize([n,s,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class AS{#t=new Float64Array(6);#e;#n;#i;#a;#s;#l="";#o=0;#h=new Pr;#c;#d;constructor(t,n,s,r,o,c){this.#c=s,this.#d=r,this.#i=o,this.#a=c,[t,n]=this.#u(t,n);const h=this.#e=[NaN,NaN,NaN,NaN,t,n];this.#s=[t,n],this.#n=[{line:h,points:this.#s}],this.#t.set(h,0)}updateProperty(t,n){t==="stroke-width"&&(this.#a=n)}#u(t,n){return et._normalizePoint(t,n,this.#c,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#s.length<=10}add(t,n){[t,n]=this.#u(t,n);const[s,r,o,c]=this.#t.subarray(2,6),h=t-o,f=n-c;return Math.hypot(this.#c*h,this.#d*f)<=2?null:(this.#s.push(t,n),isNaN(s)?(this.#t.set([o,c,t,n],2),this.#e.push(NaN,NaN,NaN,NaN,t,n),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,r,o,c,t,n],0),this.#e.push(...et.createBezierPoints(s,r,o,c,t,n)),{path:{d:this.toSVGPath()}}))}end(t,n){const s=this.add(t,n);return s||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,n,s,r,o){this.#c=s,this.#d=r,this.#i=o,[t,n]=this.#u(t,n);const c=this.#e=[NaN,NaN,NaN,NaN,t,n];this.#s=[t,n];const h=this.#n.at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),this.#n.push({line:c,points:this.#s}),this.#t.set(c,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#s=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#h.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#h.removeLastElement();this.#n.pop(),this.#l="";for(let t=0,n=this.#n.length;t<n;t++){const{line:s,points:r}=this.#n[t];this.#e=s,this.#s=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#l}}}toSVGPath(){const t=et.svgRound(this.#e[4]),n=et.svgRound(this.#e[5]);if(this.#s.length===2)return this.#l=`${this.#l} M ${t} ${n} Z`,this.#l;if(this.#s.length<=6){const r=this.#l.lastIndexOf("M");this.#l=`${this.#l.slice(0,r)} M ${t} ${n}`,this.#o=6}if(this.#s.length===4){const r=et.svgRound(this.#e[10]),o=et.svgRound(this.#e[11]);return this.#l=`${this.#l} L ${r} ${o}`,this.#o=12,this.#l}const s=[];this.#o===0&&(s.push(`M ${t} ${n}`),this.#o=6);for(let r=this.#o,o=this.#e.length;r<o;r+=6){const[c,h,f,p,g,y]=this.#e.slice(r,r+6).map(et.svgRound);s.push(`C${c} ${h} ${f} ${p} ${g} ${y}`)}return this.#l+=s.join(" "),this.#o=this.#e.length,this.#l}getOutlines(t,n,s,r){const o=this.#n.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#h.build(this.#n,t,n,s,this.#i,this.#a,r),this.#t=null,this.#e=null,this.#n=null,this.#l=null,this.#h}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Pr extends et{#t;#e=0;#n;#i;#a;#s;#l;#o;#h;build(t,n,s,r,o,c,h){this.#a=n,this.#s=s,this.#l=r,this.#o=o,this.#h=c,this.#n=h??0,this.#i=t,this.#u()}get thickness(){return this.#h}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of this.#i){if(t.push(`M${et.svgRound(n[4])} ${et.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${et.svgRound(n[10])} ${et.svgRound(n[11])}`);continue}for(let s=6,r=n.length;s<r;s+=6){const[o,c,h,f,p,g]=n.subarray(s,s+6).map(et.svgRound);t.push(`C${o} ${c} ${h} ${f} ${p} ${g}`)}}return t.join("")}serialize([t,n,s,r],o){const c=[],h=[],[f,p,g,y]=this.#d();let b,A,S,E,w,T,L,R,N;switch(this.#o){case 0:N=et._rescale,b=t,A=n+r,S=s,E=-r,w=t+f*s,T=n+(1-p-y)*r,L=t+(f+g)*s,R=n+(1-p)*r;break;case 90:N=et._rescaleAndSwap,b=t,A=n,S=s,E=r,w=t+p*s,T=n+f*r,L=t+(p+y)*s,R=n+(f+g)*r;break;case 180:N=et._rescale,b=t+s,A=n,S=-s,E=r,w=t+(1-f-g)*s,T=n+p*r,L=t+(1-f)*s,R=n+(p+y)*r;break;case 270:N=et._rescaleAndSwap,b=t+s,A=n+r,S=-s,E=-r,w=t+(1-p-y)*s,T=n+(1-f-g)*r,L=t+(1-p)*s,R=n+(1-f)*r;break}for(const{line:C,points:U}of this.#i)c.push(N(C,b,A,S,E,o?new Array(C.length):null)),h.push(N(U,b,A,S,E,o?new Array(U.length):null));return{lines:c,points:h,rect:[w,T,L,R]}}static deserialize(t,n,s,r,o,{paths:{lines:c,points:h},rotation:f,thickness:p}){const g=[];let y,b,A,S,E;switch(f){case 0:E=et._rescale,y=-t/s,b=n/r+1,A=1/s,S=-1/r;break;case 90:E=et._rescaleAndSwap,y=-n/r,b=-t/s,A=1/r,S=1/s;break;case 180:E=et._rescale,y=t/s+1,b=-n/r,A=-1/s,S=1/r;break;case 270:E=et._rescaleAndSwap,y=n/r+1,b=t/s+1,A=-1/r,S=-1/s;break}if(!c){c=[];for(const T of h){const L=T.length;if(L===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,T[0],T[1]]));continue}if(L===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,T[0],T[1],NaN,NaN,NaN,NaN,T[2],T[3]]));continue}const R=new Float32Array(3*(L-2));c.push(R);let[N,C,U,z]=T.subarray(0,4);R.set([NaN,NaN,NaN,NaN,N,C],0);for(let V=4;V<L;V+=2){const G=T[V],K=T[V+1];R.set(et.createBezierPoints(N,C,U,z,G,K),(V-2)*3),[N,C,U,z]=[U,z,G,K]}}}for(let T=0,L=c.length;T<L;T++)g.push({line:E(c[T].map(R=>R??NaN),y,b,A,S),points:E(h[T].map(R=>R??NaN),y,b,A,S)});const w=new this.prototype.constructor;return w.build(g,s,r,1,f,p,o),w}#c(t=this.#h){const n=this.#n+t/2*this.#l;return this.#o%180===0?[n/this.#a,n/this.#s]:[n/this.#s,n/this.#a]}#d(){const[t,n,s,r]=this.#t,[o,c]=this.#c(0);return[t+o,n+c,s-2*o,r-2*c]}#u(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#i){if(r.length<=12){for(let h=4,f=r.length;h<f;h+=6)ct.pointBoundingBox(r[h],r[h+1],t);continue}let o=r[4],c=r[5];for(let h=6,f=r.length;h<f;h+=6){const[p,g,y,b,A,S]=r.subarray(h,h+6);ct.bezierBoundingBox(o,c,p,g,y,b,A,S,t),o=A,c=S}}const[n,s]=this.#c();t[0]=Ne(t[0]-n,0,1),t[1]=Ne(t[1]-s,0,1),t[2]=Ne(t[2]+n,0,1),t[3]=Ne(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,n){return t==="stroke-width"?this.#f(n):null}#f(t){const[n,s]=this.#c();this.#h=t;const[r,o]=this.#c(),[c,h]=[r-n,o-s],f=this.#t;return f[0]-=c,f[1]-=h,f[2]+=2*c,f[3]+=2*h,f}updateParentDimensions([t,n],s){const[r,o]=this.#c();this.#a=t,this.#s=n,this.#l=s;const[c,h]=this.#c(),f=c-r,p=h-o,g=this.#t;return g[0]-=f,g[1]-=p,g[2]+=2*f,g[3]+=2*p,g}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(et.svgRound).join(" ")}get defaultProperties(){const[t,n]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=this.#t;let s=0,r=0,o=0,c=0,h=0,f=0;switch(this.#e){case 90:r=n/t,o=-t/n,h=t;break;case 180:s=-1,c=-1,h=t,f=n;break;case 270:r=-n/t,o=t/n,f=n;break;default:return""}return`matrix(${s} ${r} ${o} ${c} ${et.svgRound(h)} ${et.svgRound(f)})`}getPathResizingSVGProperties([t,n,s,r]){const[o,c]=this.#c(),[h,f,p,g]=this.#t;if(Math.abs(p-o)<=et.PRECISION||Math.abs(g-c)<=et.PRECISION){const E=t+s/2-(h+p/2),w=n+r/2-(f+g/2);return{path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(n)}`,transform:`${this.rotationTransform} translate(${E} ${w})`}}}const y=(s-2*o)/(p-2*o),b=(r-2*c)/(g-2*c),A=p/s,S=g/r;return{path:{"transform-origin":`${et.svgRound(h)} ${et.svgRound(f)}`,transform:`${this.rotationTransform} scale(${A} ${S}) translate(${et.svgRound(o)} ${et.svgRound(c)}) scale(${y} ${b}) translate(${et.svgRound(-o)} ${et.svgRound(-c)})`}}}getPathResizedSVGProperties([t,n,s,r]){const[o,c]=this.#c(),h=this.#t,[f,p,g,y]=h;if(h[0]=t,h[1]=n,h[2]=s,h[3]=r,Math.abs(g-o)<=et.PRECISION||Math.abs(y-c)<=et.PRECISION){const w=t+s/2-(f+g/2),T=n+r/2-(p+y/2);for(const{line:L,points:R}of this.#i)et._translate(L,w,T,L),et._translate(R,w,T,R);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(s-2*o)/(g-2*o),A=(r-2*c)/(y-2*c),S=-b*(f+o)+t+o,E=-A*(p+c)+n+c;if(b!==1||A!==1||S!==0||E!==0)for(const{line:w,points:T}of this.#i)et._rescale(w,S,E,b,A,w),et._rescale(T,S,E,b,A,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],s){const[r,o]=s,c=this.#t,h=t-c[0],f=n-c[1];if(this.#a===r&&this.#s===o)for(const{line:p,points:g}of this.#i)et._translate(p,h,f,p),et._translate(g,h,f,g);else{const p=this.#a/r,g=this.#s/o;this.#a=r,this.#s=o;for(const{line:y,points:b}of this.#i)et._rescale(y,h,f,p,g,y),et._rescale(b,h,f,p,g,b);c[2]*=p,c[3]*=g}return c[0]=t,c[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${et.svgRound(t)} ${et.svgRound(n)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${et.svgRound(t[0])} ${et.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class _l extends Dy{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ut._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,n){t==="stroke-width"&&(n??=this["stroke-width"],n*=this._viewParameters.realScale),super.updateSVGProperty(t,n)}clone(){const t=new _l(this._viewParameters);return t.updateAll(this),t}}class Kh extends ft{static _type="ink";static _editorType=vt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){ut.initialize(t,n),this._defaultDrawingOptions=new _l(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ct(this,"typesMap",new Map([[Mt.INK_THICKNESS,"stroke-width"],[Mt.INK_COLOR,"stroke"],[Mt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,s,r,o){return new AS(t,n,s,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,s,r,o,c){return Pr.deserialize(t,n,s,r,o,c)}static async deserialize(t,n,s){let r=null;if(t instanceof Yh){const{data:{inkLists:c,rect:h,rotation:f,id:p,color:g,opacity:y,borderStyle:{rawWidth:b},popupRef:A},parent:{page:{pageNumber:S}}}=t;r=t={annotationType:vt.INK,color:Array.from(g),thickness:b,opacity:y,paths:{points:c},boxes:null,pageIndex:S-1,rect:h.slice(0),rotation:f,id:p,deleted:!1,popupRef:A}}const o=await super.deserialize(t,n,s);return o.annotationElementId=t.id||null,o._initialData=r,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:s}=this;n.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:s}){this._drawingOptions=Kh.getDefaultDrawingOptions({stroke:ct.makeHexColor(...t),"stroke-width":n,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:s,rect:r}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":c,"stroke-width":h}}=this,f={annotationType:vt.INK,color:ut._colorManager.convert(o),opacity:c,thickness:h,paths:{lines:n,points:s},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(f.isCopy=!0,f):this.annotationElementId&&!this.#t(f)?null:(f.id=this.annotationElementId,f)}#t(t){const{color:n,thickness:s,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((c,h)=>c!==n[h])||t.thickness!==s||t.opacity!==r||t.pageIndex!==o}renderAnnotationElement(t){const{points:n,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:n}),null}}class Sh extends Pr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const ol=8,pr=3;class es{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,n,s,r){return s-=t,r-=n,s===0?r>0?0:4:s===1?r+6:2-r}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,n,s,r,o,c,h){const f=this.#e(s,r,o,c);for(let p=0;p<8;p++){const g=(-p+f-h+16)%8,y=this.#n[2*g],b=this.#n[2*g+1];if(t[(s+y)*n+(r+b)]!==0)return g}return-1}static#a(t,n,s,r,o,c,h){const f=this.#e(s,r,o,c);for(let p=0;p<8;p++){const g=(p+f+h+16)%8,y=this.#n[2*g],b=this.#n[2*g+1];if(t[(s+y)*n+(r+b)]!==0)return g}return-1}static#s(t,n,s,r){const o=t.length,c=new Int32Array(o);for(let g=0;g<o;g++)c[g]=t[g]<=r?1:0;for(let g=1;g<s-1;g++)c[g*n]=c[g*n+n-1]=0;for(let g=0;g<n;g++)c[g]=c[n*s-1-g]=0;let h=1,f;const p=[];for(let g=1;g<s-1;g++){f=1;for(let y=1;y<n-1;y++){const b=g*n+y,A=c[b];if(A===0)continue;let S=g,E=y;if(A===1&&c[b-1]===0)h+=1,E-=1;else if(A>=1&&c[b+1]===0)h+=1,E+=1,A>1&&(f=A);else{A!==1&&(f=Math.abs(A));continue}const w=[y,g],T=E===y+1,L={isHole:T,points:w,id:h,parent:0};p.push(L);let R;for(const Z of p)if(Z.id===f){R=Z;break}R?R.isHole?L.parent=T?R.parent:f:L.parent=T?f:R.parent:L.parent=T?f:0;const N=this.#i(c,n,g,y,S,E,0);if(N===-1){c[b]=-h,c[b]!==1&&(f=Math.abs(c[b]));continue}let C=this.#n[2*N],U=this.#n[2*N+1];const z=g+C,V=y+U;S=z,E=V;let G=g,K=y;for(;;){const Z=this.#a(c,n,G,K,S,E,1);C=this.#n[2*Z],U=this.#n[2*Z+1];const st=G+C,mt=K+U;w.push(mt,st);const lt=G*n+K;if(c[lt+1]===0?c[lt]=-h:c[lt]===1&&(c[lt]=h),st===g&&mt===y&&G===z&&K===V){c[b]!==1&&(f=Math.abs(c[b]));break}else S=G,E=K,G=st,K=mt}}}return p}static#l(t,n,s,r){if(s-n<=4){for(let z=n;z<s-2;z+=2)r.push(t[z],t[z+1]);return}const o=t[n],c=t[n+1],h=t[s-4]-o,f=t[s-3]-c,p=Math.hypot(h,f),g=h/p,y=f/p,b=g*c-y*o,A=f/h,S=1/p,E=Math.atan(A),w=Math.cos(E),T=Math.sin(E),L=S*(Math.abs(w)+Math.abs(T)),R=S*(1-L+L**2),N=Math.max(Math.atan(Math.abs(T+w)*R),Math.atan(Math.abs(T-w)*R));let C=0,U=n;for(let z=n+2;z<s-2;z+=2){const V=Math.abs(b-g*t[z+1]+y*t[z]);V>C&&(U=z,C=V)}C>(p*N)**2?(this.#l(t,n,U+2,r),this.#l(t,U,s,r)):r.push(o,c)}static#o(t){const n=[],s=t.length;return this.#l(t,0,s,n),n.push(t[s-2],t[s-1]),n.length<=4?null:n}static#h(t,n,s,r,o,c){const h=new Float32Array(c**2),f=-2*r**2,p=c>>1;for(let E=0;E<c;E++){const w=(E-p)**2;for(let T=0;T<c;T++)h[E*c+T]=Math.exp((w+(T-p)**2)/f)}const g=new Float32Array(256),y=-2*o**2;for(let E=0;E<256;E++)g[E]=Math.exp(E**2/y);const b=t.length,A=new Uint8Array(b),S=new Uint32Array(256);for(let E=0;E<s;E++)for(let w=0;w<n;w++){const T=E*n+w,L=t[T];let R=0,N=0;for(let U=0;U<c;U++){const z=E+U-p;if(!(z<0||z>=s))for(let V=0;V<c;V++){const G=w+V-p;if(G<0||G>=n)continue;const K=t[z*n+G],Z=h[U*c+V]*g[Math.abs(K-L)];R+=K*Z,N+=Z}}const C=A[T]=Math.round(R/N);S[C]++}return[A,S]}static#c(t){const n=new Uint32Array(256);for(const s of t)n[s]++;return n}static#d(t){const n=t.length,s=new Uint8ClampedArray(n>>2);let r=-1/0,o=1/0;for(let h=0,f=s.length;h<f;h++){if(t[(h<<2)+3]===0){r=s[h]=255;continue}const g=s[h]=t[h<<2];g>r&&(r=g),g<o&&(o=g)}const c=255/(r-o);for(let h=0;h<n;h++)s[h]=(s[h]-o)*c;return s}static#u(t){let n,s=-1/0,r=-1/0;const o=t.findIndex(f=>f!==0);let c=o,h=o;for(n=o;n<256;n++){const f=t[n];f>s&&(n-c>r&&(r=n-c,h=n-1),s=f,c=n)}for(n=h-1;n>=0&&!(t[n]>t[n+1]);n--);return n}static#f(t){const n=t,{width:s,height:r}=t,{maxDim:o}=this.#t;let c=s,h=r;if(s>o||r>o){let b=s,A=r,S=Math.log2(Math.max(s,r)/o);const E=Math.floor(S);S=S===E?E-1:E;for(let T=0;T<S;T++){c=Math.ceil(b/2),h=Math.ceil(A/2);const L=new OffscreenCanvas(c,h);L.getContext("2d").drawImage(t,0,0,b,A,0,0,c,h),b=c,A=h,t!==n&&t.close(),t=L.transferToImageBitmap()}const w=Math.min(o/c,o/h);c=Math.round(c*w),h=Math.round(h*w)}const p=new OffscreenCanvas(c,h).getContext("2d",{willReadFrequently:!0});p.filter="grayscale(1)",p.drawImage(t,0,0,t.width,t.height,0,0,c,h);const g=p.getImageData(0,0,c,h).data;return[this.#d(g),c,h]}static extractContoursFromText(t,{fontFamily:n,fontStyle:s,fontWeight:r},o,c,h,f){let p=new OffscreenCanvas(1,1),g=p.getContext("2d",{alpha:!1});const y=200,b=g.font=`${s} ${r} ${y}px ${n}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:S,actualBoundingBoxAscent:E,actualBoundingBoxDescent:w,fontBoundingBoxAscent:T,fontBoundingBoxDescent:L,width:R}=g.measureText(t),N=1.5,C=Math.ceil(Math.max(Math.abs(A)+Math.abs(S)||0,R)*N),U=Math.ceil(Math.max(Math.abs(E)+Math.abs(w)||y,Math.abs(T)+Math.abs(L)||y)*N);p=new OffscreenCanvas(C,U),g=p.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=b,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,C,U),g.fillStyle="black",g.fillText(t,C*(N-1)/2,U*(3-N)/2);const z=this.#d(g.getImageData(0,0,C,U).data),V=this.#c(z),G=this.#u(V),K=this.#s(z,C,U,G);return this.processDrawnLines({lines:{curves:K,width:C,height:U},pageWidth:o,pageHeight:c,rotation:h,innerMargin:f,mustSmooth:!0,areContours:!0})}static process(t,n,s,r,o){const[c,h,f]=this.#f(t),[p,g]=this.#h(c,h,f,Math.hypot(h,f)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#u(g),b=this.#s(p,h,f,y);return this.processDrawnLines({lines:{curves:b,width:h,height:f},pageWidth:n,pageHeight:s,rotation:r,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:n,pageHeight:s,rotation:r,innerMargin:o,mustSmooth:c,areContours:h}){r%180!==0&&([n,s]=[s,n]);const{curves:f,width:p,height:g}=t,y=t.thickness??0,b=[],A=Math.min(n/p,s/g),S=A/n,E=A/s,w=[];for(const{points:L}of f){const R=c?this.#o(L):L;if(!R)continue;w.push(R);const N=R.length,C=new Float32Array(N),U=new Float32Array(3*(N===2?2:N-2));if(b.push({line:U,points:C}),N===2){C[0]=R[0]*S,C[1]=R[1]*E,U.set([NaN,NaN,NaN,NaN,C[0],C[1]],0);continue}let[z,V,G,K]=R;z*=S,V*=E,G*=S,K*=E,C.set([z,V,G,K],0),U.set([NaN,NaN,NaN,NaN,z,V],0);for(let Z=4;Z<N;Z+=2){const st=C[Z]=R[Z]*S,mt=C[Z+1]=R[Z+1]*E;U.set(et.createBezierPoints(z,V,G,K,st,mt),(Z-2)*3),[z,V,G,K]=[G,K,st,mt]}}if(b.length===0)return null;const T=h?new Sh:new Pr;return T.build(b,n,s,1,r,h?0:y,o),{outline:T,newCurves:w,areContours:h,thickness:y,width:p,height:g}}static async compressSignature({outlines:t,areContours:n,thickness:s,width:r,height:o}){let c=1/0,h=-1/0,f=0;for(const R of t){f+=R.length;for(let N=2,C=R.length;N<C;N++){const U=R[N]-R[N-2];c=Math.min(c,U),h=Math.max(h,U)}}let p;c>=-128&&h<=127?p=Int8Array:c>=-32768&&h<=32767?p=Int16Array:p=Int32Array;const g=t.length,y=ol+pr*g,b=new Uint32Array(y);let A=0;b[A++]=y*Uint32Array.BYTES_PER_ELEMENT+(f-2*g)*p.BYTES_PER_ELEMENT,b[A++]=0,b[A++]=r,b[A++]=o,b[A++]=n?0:1,b[A++]=Math.max(0,Math.floor(s??0)),b[A++]=g,b[A++]=p.BYTES_PER_ELEMENT;for(const R of t)b[A++]=R.length-2,b[A++]=R[0],b[A++]=R[1];const S=new CompressionStream("deflate-raw"),E=S.writable.getWriter();await E.ready,E.write(b);const w=p.prototype.constructor;for(const R of t){const N=new w(R.length-2);for(let C=2,U=R.length;C<U;C++)N[C-2]=R[C]-R[C-2];E.write(N)}E.close();const T=await new Response(S.readable).arrayBuffer(),L=new Uint8Array(T);return Zm(L)}static async decompressSignature(t){try{const n=Qv(t),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),o=r.getWriter();await o.ready,o.write(n).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let c=null,h=0;for await(const R of s)c||=new Uint8Array(new Uint32Array(R.buffer,0,4)[0]),c.set(R,h),h+=R.length;const f=new Uint32Array(c.buffer,0,c.length>>2),p=f[1];if(p!==0)throw new Error(`Invalid version: ${p}`);const g=f[2],y=f[3],b=f[4]===0,A=f[5],S=f[6],E=f[7],w=[],T=(ol+pr*S)*Uint32Array.BYTES_PER_ELEMENT;let L;switch(E){case Int8Array.BYTES_PER_ELEMENT:L=new Int8Array(c.buffer,T);break;case Int16Array.BYTES_PER_ELEMENT:L=new Int16Array(c.buffer,T);break;case Int32Array.BYTES_PER_ELEMENT:L=new Int32Array(c.buffer,T);break}h=0;for(let R=0;R<S;R++){const N=f[pr*R+ol],C=new Float32Array(N+2);w.push(C);for(let U=0;U<pr-1;U++)C[U]=f[pr*R+ol+U+1];for(let U=0;U<N;U++)C[U+2]=C[U]+L[h++]}return{areContours:b,thickness:A,outlines:w,width:g,height:y}}catch(n){return At(`decompressSignature: ${n}`),null}}}class Qh extends Dy{constructor(){super(),super.updateProperties({fill:ut._defaultLineColor,"stroke-width":0})}clone(){const t=new Qh;return t.updateAll(this),t}}class Wh extends _l{constructor(t){super(t),super.updateProperties({stroke:ut._defaultLineColor,"stroke-width":1})}clone(){const t=new Wh(this._viewParameters);return t.updateAll(this),t}}class zn extends ft{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=vt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){ut.initialize(t,n),this._defaultDrawingOptions=new Qh,this._defaultDrawnSignatureOptions=new Wh(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Ct(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:r,mustSmooth:o,areContours:c,description:h,uuid:f,heightInPage:p}=this.#n,{rawDims:{pageWidth:g,pageHeight:y},rotation:b}=this.parent.viewport,A=es.processDrawnLines({lines:r,pageWidth:g,pageHeight:y,rotation:b,innerMargin:zn._INNER_MARGIN,mustSmooth:o,areContours:c});this.addSignature(A,p,h,f)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return s&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,super.addEditToolbar().then(n=>{n?.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:s,width:r,height:o}=this.#n,c=Math.max(r,o),h=es.processDrawnLines({lines:{curves:t.map(f=>({points:f})),thickness:s,width:r,height:o},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:h.outline}}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.signatureManager&&this.#e!==null&&(await t.addEditSignatureButton(this._uiManager.signatureManager,this.#i,this.#e),t.show()),t):null}addSignature(t,n,s,r){const{x:o,y:c}=this,{outline:h}=this.#n=t;this.#t=h instanceof Sh,this.#e=s,this.div.setAttribute("data-l10n-args",JSON.stringify({description:s}));let f;this.#t?f=zn.getDefaultDrawingOptions():(f=zn._defaultDrawnSignatureOptions.clone(),f.updateProperties({"stroke-width":h.thickness})),this._addOutlines({drawOutlines:h,drawingOptions:f});const[p,g]=this.parentDimensions,[,y]=this.pageDimensions;let b=n/y;b=b>=1?.5:b,this.width*=b/this.height,this.width>=1&&(b*=.9/this.width,this.width=.9),this.height=b,this.setDims(p*this.width,g*this.height),this.x=o,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:s},rotation:r}=this.parent.viewport;return es.process(t,n,s,r,zn._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:s,pageHeight:r},rotation:o}=this.parent.viewport;return es.extractContoursFromText(t,n,s,r,o,zn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:s},rotation:r}=this.parent.viewport;return es.processDrawnLines({lines:t,pageWidth:n,pageHeight:s,rotation:r,innerMargin:zn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=zn.getDefaultDrawingOptions():(this._drawingOptions=zn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:s,rect:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":o}}=this,c={annotationType:vt.SIGNATURE,isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:o,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(c.paths={lines:n,points:s},c.uuid=this.#i,c.isCopy=!0):c.lines=n,this.#e&&(c.accessibilityData={type:"Figure",alt:this.#e}),c}static deserializeDraw(t,n,s,r,o,c){return c.areContours?Sh.deserialize(t,n,s,r,o,c):Pr.deserialize(t,n,s,r,o,c)}static async deserialize(t,n,s){const r=await super.deserialize(t,n,s);return r.#t=t.areContours,r.#e=t.accessibilityData?.alt||"",r.#i=t.uuid,r}}class SS extends ut{#t=null;#e=null;#n=null;#i=null;#a=null;#s="";#l=null;#o=!1;#h=null;#c=!1;#d=!1;static _type="stamp";static _editorType=vt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#a=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){ut.initialize(t,n)}static isHandlingMimeForPasting(t){return pl.includes(t)}static paste(t,n){n.pasteEditor({mode:vt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}#u(t,n=!1){if(!t){this.remove();return}this.#t=t.bitmap,n||(this.#e=t.id,this.#c=t.isSvg),t.file&&(this.#s=t.file.name),this.#p()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:c}=t||this.copyCanvas(null,null,!0).imageData,h=await s.guess({name:"altText",request:{data:r,width:o,height:c,channels:r.length/(o*c)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const f=h.output;return await this.setGuessedAltText(f),n&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}#r(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#u(s,!0)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(s).then(r=>this.#u(r)).finally(()=>this.#f());return}if(this.#a){const s=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(s).then(r=>this.#u(r)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=pl.join(",");const n=this._uiManager._signal;this.#n=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#u(r)}s()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#l?.remove(),this.#l=null,this.#h&&(clearTimeout(this.#h),this.#h=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#r();return}super.rebuild(),this.div!==null&&(this.#e&&this.#l===null&&this.#r(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#a||this.#e||this.#o)}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),this.#o||(this.#t?this.#p():this.#r()),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,r&&(this.#t=r),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#h!==null&&clearTimeout(this.#h);const t=200;this.#h=setTimeout(()=>{this.#h=null,this.#g()},t)}#p(){const{div:t}=this;let{width:n,height:s}=this.#t;const[r,o]=this.pageDimensions,c=.75;if(this.width)n=this.width*r,s=this.height*o;else if(n>c*r||s>c*o){const g=Math.min(c*r/n,c*o/s);n*=g,s*=g}const[h,f]=this.parentDimensions;this.setDims(n*h/r,s*f/o),this._uiManager.enableWaiting(!1);const p=this.#l=document.createElement("canvas");p.setAttribute("role","img"),this.addContainer(p),this.width=n/r,this.height=s/o,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#g(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s)}copyCanvas(t,n,s=!1){t||(t=224);const{width:r,height:o}=this.#t,c=new Tn;let h=this.#t,f=r,p=o,g=null;if(n){if(r>n||o>n){const U=Math.min(n/r,n/o);f=Math.floor(r*U),p=Math.floor(o*U)}g=document.createElement("canvas");const b=g.width=Math.ceil(f*c.sx),A=g.height=Math.ceil(p*c.sy);this.#c||(h=this.#m(b,A));const S=g.getContext("2d");S.filter=this._uiManager.hcmFilter;let E="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(E="#8f8f9d",w="#42414d");const T=15,L=T*c.sx,R=T*c.sy,N=new OffscreenCanvas(L*2,R*2),C=N.getContext("2d");C.fillStyle=E,C.fillRect(0,0,L*2,R*2),C.fillStyle=w,C.fillRect(0,0,L,R),C.fillRect(L,R,L,R),S.fillStyle=S.createPattern(N,"repeat"),S.fillRect(0,0,b,A),S.drawImage(h,0,0,h.width,h.height,0,0,b,A)}let y=null;if(s){let b,A;if(c.symmetric&&h.width<t&&h.height<t)b=h.width,A=h.height;else if(h=this.#t,r>t||o>t){const w=Math.min(t/r,t/o);b=Math.floor(r*w),A=Math.floor(o*w),this.#c||(h=this.#m(b,A))}const E=new OffscreenCanvas(b,A).getContext("2d",{willReadFrequently:!0});E.drawImage(h,0,0,h.width,h.height,0,0,b,A),y={width:b,height:A,data:E.getImageData(0,0,b,A).data}}return{canvas:g,width:f,height:p,imageData:y}}#m(t,n){const{width:s,height:r}=this.#t;let o=s,c=r,h=this.#t;for(;o>2*t||c>2*n;){const f=o,p=c;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),c>2*n&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const g=new OffscreenCanvas(o,c);g.getContext("2d").drawImage(h,0,0,f,p,0,0,o,c),h=g.transferToImageBitmap()}return h}#g(){const[t,n]=this.parentDimensions,{width:s,height:r}=this,o=new Tn,c=Math.ceil(s*t*o.sx),h=Math.ceil(r*n*o.sy),f=this.#l;if(!f||f.width===c&&f.height===h)return;f.width=c,f.height=h;const p=this.#c?this.#t:this.#m(c,h),g=f.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(p,0,0,p.width,p.height,0,0,c,h)}#y(t){if(t){if(this.#c){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=this.#t,n.getContext("2d").drawImage(this.#t,0,0),n.toDataURL()}if(this.#c){const[n,s]=this.pageDimensions,r=Math.round(this.width*n*ls.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*ls.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(r,o);return c.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,o),c.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,n,s){let r=null,o=!1;if(t instanceof Ry){const{data:{rect:E,rotation:w,id:T,structParent:L,popupRef:R},container:N,parent:{page:{pageNumber:C}},canvas:U}=t;let z,V;U?(delete t.canvas,{id:z,bitmap:V}=s.imageManager.getFromCanvas(N.id,U),U.remove()):(o=!0,t._hasNoCanvas=!0);const G=(await n._structTree.getAriaAttributes(`${kh}${T}`))?.get("aria-label")||"";r=t={annotationType:vt.STAMP,bitmapId:z,bitmap:V,pageIndex:C-1,rect:E.slice(0),rotation:w,id:T,deleted:!1,accessibilityData:{decorative:!1,altText:G},isSvg:!1,structParent:L,popupRef:R}}const c=await super.deserialize(t,n,s),{rect:h,bitmap:f,bitmapUrl:p,bitmapId:g,isSvg:y,accessibilityData:b}=t;o?(s.addMissingCanvas(t.id,c),c.#o=!0):g&&s.imageManager.isValidId(g)?(c.#e=g,f&&(c.#t=f)):c.#i=p,c.#c=y;const[A,S]=c.pageDimensions;return c.width=(h[2]-h[0])/A,c.height=(h[3]-h[1])/S,c.annotationElementId=t.id||null,b&&(c.altTextData=b),c._initialData=r,c.#d=!!r,c}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:vt.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=this.#y(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const h=this.#b(s);if(h.isSame)return null;h.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,n===null)return s;n.stamps||=new Map;const c=this.#c?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(this.#e))n.stamps.set(this.#e,{area:c,serialized:s}),s.bitmap=this.#y(!1);else if(this.#c){const h=n.stamps.get(this.#e);c>h.area&&(h.area=c,h.serialized.bitmap.close(),h.serialized.bitmap=this.#y(!1))}return s}#b(t){const{pageIndex:n,accessibilityData:{altText:s}}=this._initialData,r=t.pageIndex===n,o=(t.accessibilityData?.alt||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}class Hn{#t;#e=!1;#n=null;#i=null;#a=null;#s=new Map;#l=!1;#o=!1;#h=!1;#c=null;#d=null;#u=null;#f=null;#r;static _initialized=!1;static#p=new Map([ye,Kh,SS,ne,zn].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:n,div:s,structTreeLayer:r,accessibilityManager:o,annotationLayer:c,drawLayer:h,textLayer:f,viewport:p,l10n:g}){const y=[...Hn.#p.values()];if(!Hn._initialized){Hn._initialized=!0;for(const b of y)b.initialize(g,t)}t.registerEditorTypes(y),this.#r=t,this.pageIndex=n,this.div=s,this.#t=o,this.#n=c,this.viewport=p,this.#u=f,this.drawLayer=h,this._structTree=r,this.#r.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#r.getMode()===vt.NONE}updateToolbar(t){this.#r.updateToolbar(t)}updateMode(t=this.#r.getMode()){switch(this.#v(),t){case vt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case vt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case vt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;for(const s of Hn.#p.values())n.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#u?.div}setEditingState(t){this.#r.setEditingState(t)}addCommands(t){this.#r.addCommands(t)}cleanUndoStack(t){this.#r.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}async enable(){this.#h=!0,this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const s of this.#s.values())s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#r.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!this.#n){this.#h=!1;return}const n=this.#n.getEditableAnnotations();for(const s of n){if(s.hide(),this.#r.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}this.#h=!1}disable(){this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,n=new Map;for(const r of this.#s.values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else n.set(r.annotationElementId,r);this.getEditableAnnotation(r.annotationElementId)?.show(),r.remove()}if(this.#n){const r=this.#n.getEditableAnnotations();for(const o of r){const{id:c}=o.data;if(this.#r.isDeletedAnnotationElement(c))continue;let h=n.get(c);if(h){h.resetAnnotationElement(o),h.show(!1),o.show();continue}h=t.get(c),h&&(this.#r.addChangedExistingAnnotation(h),h.renderAnnotationElement(o)&&h.show(!1)),o.show()}}this.#v(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of Hn.#p.values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#r.getActive()!==t&&this.#r.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#u?.div&&!this.#f){this.#f=new AbortController;const t=this.#r.combinedSignal(this.#f);this.#u.div.addEventListener("pointerdown",this.#m.bind(this),{signal:t}),this.#u.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#u?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#u.div.classList.remove("highlighting"))}#m(t){this.#r.unselectAll();const{target:n}=t;if(n===this.#u.div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&this.#u.div.contains(n)){const{isMac:s}=we.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#r.showAllEditors("highlight",!0,!0),this.#u.div.classList.add("free"),this.toggleDrawing(),ne.startHighlighting(this,this.#r.direction==="ltr",{target:this.#u.div,x:t.x,y:t.y}),this.#u.div.addEventListener("pointerup",()=>{this.#u.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#r._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#r.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const n=this.pointerup.bind(this);this.div.addEventListener("pointerup",n,{signal:t}),this.div.addEventListener("pointercancel",n,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:n}=t;n&&this.#r.isDeletedAnnotationElement(n)&&this.#r.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#r.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#r.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#r.addDeletedAnnotationElement(t.annotationElementId),ut.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#r.addEditor(t),this.attach(t),!t.isAttachedToDOM){const n=t.render();this.div.append(n),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#h),this.#r.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:n}=document;t.div.contains(n)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#r._signal}),n.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const n=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:n,undo:s,mustExec:!1})}getNextId(){return this.#r.getId()}get#g(){return Hn.#p.get(this.#r.getMode())}combinedSignal(t){return this.#r.combinedSignal(t)}#y(t){const n=this.#g;return n?new n.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#g?.canCreateNewEmptyEditor()}async pasteEditor(t,n){this.updateToolbar(t),await this.#r.updateMode(t.mode);const{offsetX:s,offsetY:r}=this.#b(),o=this.getNextId(),c=this.#y({parent:this,id:o,x:s,y:r,uiManager:this.#r,isCentered:!0,...n});c&&this.add(c)}async deserialize(t){return await Hn.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#r)||null}createAndAddNewEditor(t,n,s={}){const r=this.getNextId(),o=this.#y({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#r,isCentered:n,...s});return o&&this.add(o),o}#b(){const{x:t,y:n,width:s,height:r}=this.div.getBoundingClientRect(),o=Math.max(0,t),c=Math.max(0,n),h=Math.min(window.innerWidth,t+s),f=Math.min(window.innerHeight,n+r),p=(o+h)/2-t,g=(c+f)/2-n,[y,b]=this.viewport.rotation%180===0?[p,g]:[g,p];return{offsetX:y,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#b(),!0,t)}setSelected(t){this.#r.setSelected(t)}toggleSelected(t){this.#r.toggleSelected(t)}unselect(t){this.#r.unselect(t)}pointerup(t){const{isMac:n}=we.platform;if(t.button!==0||t.ctrlKey&&n||t.target!==this.div||!this.#l||(this.#l=!1,this.#g?.isDrawer&&this.#g.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#r.getMode();if(s===vt.STAMP||s===vt.SIGNATURE){this.#r.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#r.getMode()===vt.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}const{isMac:n}=we.platform;if(t.button!==0||t.ctrlKey&&n||t.target!==this.div)return;if(this.#l=!0,this.#g?.isDrawer){this.startDrawingSession(t);return}const s=this.#r.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#c){this.#g.startDrawing(this,this.#r,!1,t);return}this.#r.setCurrentDrawingSession(this),this.#c=new AbortController;const n=this.#r.combinedSignal(this.#c);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:n}),this.#g.startDrawing(this,this.#r,!1,t)}pause(t){if(t){const{activeElement:n}=document;this.div.contains(n)&&(this.#d=n);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#c?(this.#r.setCurrentDrawingSession(null),this.#c.abort(),this.#c=null,this.#d=null,this.#g.endDrawing(t)):null}findNewParent(t,n,s){const r=this.#r.findParent(n,s);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#c?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#c&&this.#g.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#r.getActive()?.parent===this&&(this.#r.commitOrRemove(),this.#r.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#r.removeLayer(this)}#v(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,ki(this.div,t);for(const n of this.#r.getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:t}){this.#r.commitOrRemove(),this.#v();const n=this.viewport.rotation,s=t.rotation;if(this.viewport=t,ki(this.div,{rotation:s}),n!==s)for(const r of this.#s.values())r.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:n}=this.viewport.rawDims;return[t,n]}get scale(){return this.#r.viewParameters.realScale}}class _e{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const n of this.#e.values())n.remove(),t.append(n);this.#t=t}}static get _svgFactory(){return Ct(this,"_svgFactory",new Tr)}static#a(t,[n,s,r,o]){const{style:c}=t;c.top=`${100*s}%`,c.left=`${100*n}%`,c.width=`${100*r}%`,c.height=`${100*o}%`}#s(){const t=_e._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#l(t,n){const s=_e._svgFactory.createElement("clipPath");t.append(s);const r=`clip_${n}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const o=_e._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${n}`),o.classList.add("clip"),r}#o(t,n){for(const[s,r]of Object.entries(n))r===null?t.removeAttribute(s):t.setAttribute(s,r)}draw(t,n=!1,s=!1){const r=_e.#i++,o=this.#s(),c=_e._svgFactory.createElement("defs");o.append(c);const h=_e._svgFactory.createElement("path");c.append(h);const f=`path_p${this.pageIndex}_${r}`;h.setAttribute("id",f),h.setAttribute("vector-effect","non-scaling-stroke"),n&&this.#n.set(r,h);const p=s?this.#l(c,f):null,g=_e._svgFactory.createElement("use");return o.append(g),g.setAttribute("href",`#${f}`),this.updateProperties(o,t),this.#e.set(r,o),{id:r,clipPathId:`url(#${p})`}}drawOutline(t,n){const s=_e.#i++,r=this.#s(),o=_e._svgFactory.createElement("defs");r.append(o);const c=_e._svgFactory.createElement("path");o.append(c);const h=`path_p${this.pageIndex}_${s}`;c.setAttribute("id",h),c.setAttribute("vector-effect","non-scaling-stroke");let f;if(n){const y=_e._svgFactory.createElement("mask");o.append(y),f=`mask_p${this.pageIndex}_${s}`,y.setAttribute("id",f),y.setAttribute("maskUnits","objectBoundingBox");const b=_e._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const A=_e._svgFactory.createElement("use");y.append(A),A.setAttribute("href",`#${h}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const p=_e._svgFactory.createElement("use");r.append(p),p.setAttribute("href",`#${h}`),f&&p.setAttribute("mask",`url(#${f})`);const g=p.cloneNode();return r.append(g),p.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(s,r),s}finalizeDraw(t,n){this.#n.delete(t),this.updateProperties(t,n)}updateProperties(t,n){if(!n)return;const{root:s,bbox:r,rootClass:o,path:c}=n,h=typeof t=="number"?this.#e.get(t):t;if(h){if(s&&this.#o(h,s),r&&_e.#a(h,r),o){const{classList:f}=h;for(const[p,g]of Object.entries(o))f.toggle(p,g)}if(c){const p=h.firstChild.firstChild;this.#o(p,c)}}}updateParent(t,n){if(n===this)return;const s=this.#e.get(t);s&&(n.#t.append(s),this.#e.delete(t),n.#e.set(t,s))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:vh};globalThis.pdfjsLib={AbortException:ai,AnnotationEditorLayer:Hn,AnnotationEditorParamsType:Mt,AnnotationEditorType:vt,AnnotationEditorUIManager:ri,AnnotationLayer:$h,AnnotationMode:Fn,AnnotationType:ee,build:Sy,ColorPicker:on,createValidAbsoluteUrl:Oh,DOMSVGFactory:Tr,DrawLayer:_e,FeatureTest:we,fetchData:ca,getDocument:Gh,getFilenameFromUrl:Jm,getPdfFilenameFromUrl:ty,getUuid:Nh,getXfaPageViewport:ey,GlobalWorkerOptions:Ni,ImageKind:vr,InvalidPDFException:fl,isDataScheme:Dr,isPdfFile:Sl,isValidExplicitDest:ay,MathClamp:Ne,noContextMenu:An,normalizeUnicode:Wm,OPS:Sr,OutputScale:Tn,PasswordResponses:Km,PDFDataRangeTransport:Vh,PDFDateString:Ph,PDFWorker:oa,PermissionFlag:$m,PixelsPerInch:ls,RenderingCancelledException:Al,ResponseException:Er,setLayerDimensions:ki,shadow:Ct,SignatureExtractor:es,stopEvent:ie,SupportedImageMimeTypes:pl,TextLayer:_r,TouchManager:Lr,updateUrlHash:Lh,Util:ct,VerbosityLevel:Rr,version:Ay,XfaLayer:Xh};const ES=Object.freeze(Object.defineProperty({__proto__:null,AbortException:ai,AnnotationEditorLayer:Hn,AnnotationEditorParamsType:Mt,AnnotationEditorType:vt,AnnotationEditorUIManager:ri,AnnotationLayer:$h,AnnotationMode:Fn,AnnotationType:ee,ColorPicker:on,DOMSVGFactory:Tr,DrawLayer:_e,FeatureTest:we,GlobalWorkerOptions:Ni,ImageKind:vr,InvalidPDFException:fl,MathClamp:Ne,OPS:Sr,OutputScale:Tn,PDFDataRangeTransport:Vh,PDFDateString:Ph,PDFWorker:oa,PasswordResponses:Km,PermissionFlag:$m,PixelsPerInch:ls,RenderingCancelledException:Al,ResponseException:Er,SignatureExtractor:es,SupportedImageMimeTypes:pl,TextLayer:_r,TouchManager:Lr,Util:ct,VerbosityLevel:Rr,XfaLayer:Xh,build:Sy,createValidAbsoluteUrl:Oh,fetchData:ca,getDocument:Gh,getFilenameFromUrl:Jm,getPdfFilenameFromUrl:ty,getUuid:Nh,getXfaPageViewport:ey,isDataScheme:Dr,isPdfFile:Sl,isValidExplicitDest:ay,noContextMenu:An,normalizeUnicode:Wm,setLayerDimensions:ki,shadow:Ct,stopEvent:ie,updateUrlHash:Lh,version:Ay},Symbol.toStringTag,{value:"Module"})),_S=["onCopy","onCut","onPaste"],wS=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],TS=["onFocus","onBlur"],xS=["onInput","onInvalid","onReset","onSubmit"],RS=["onLoad","onError"],CS=["onKeyDown","onKeyPress","onKeyUp"],MS=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],DS=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],OS=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],LS=["onSelect"],NS=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],kS=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],PS=["onScroll"],BS=["onWheel"],zS=["onAnimationStart","onAnimationEnd","onAnimationIteration"],US=["onTransitionEnd"],HS=["onToggle"],FS=["onChange"],IS=[..._S,...wS,...TS,...xS,...RS,...CS,...MS,...DS,...OS,...LS,...NS,...kS,...PS,...BS,...zS,...US,...FS,...HS];function Oy(u,t){const n={};for(const s of IS){const r=u[s];r&&(t?n[s]=o=>r(o,t(s)):n[s]=r)}return n}function Br(u){let t=!1;return{promise:new Promise((s,r)=>{u.then(o=>!t&&s(o)).catch(o=>!t&&r(o))}),cancel(){t=!0}}}function Ly(u){var t,n,s="";if(typeof u=="string"||typeof u=="number")s+=u;else if(typeof u=="object")if(Array.isArray(u)){var r=u.length;for(t=0;t<r;t++)u[t]&&(n=Ly(u[t]))&&(s&&(s+=" "),s+=n)}else for(n in u)u[n]&&(s&&(s+=" "),s+=n);return s}function wl(){for(var u,t,n=0,s="",r=arguments.length;n<r;n++)(u=arguments[n])&&(t=Ly(u))&&(s&&(s+=" "),s+=t);return s}var jS="Invariant failed";function Gt(u,t){if(!u)throw new Error(jS)}var uh,wm;function GS(){if(wm)return uh;wm=1;var u=function(){};return uh=u,uh}var qS=GS();const ke=Mv(qS);var Tm=Object.prototype.hasOwnProperty;function xm(u,t,n){for(n of u.keys())if(sa(n,t))return n}function sa(u,t){var n,s,r;if(u===t)return!0;if(u&&t&&(n=u.constructor)===t.constructor){if(n===Date)return u.getTime()===t.getTime();if(n===RegExp)return u.toString()===t.toString();if(n===Array){if((s=u.length)===t.length)for(;s--&&sa(u[s],t[s]););return s===-1}if(n===Set){if(u.size!==t.size)return!1;for(s of u)if(r=s,r&&typeof r=="object"&&(r=xm(t,r),!r)||!t.has(r))return!1;return!0}if(n===Map){if(u.size!==t.size)return!1;for(s of u)if(r=s[0],r&&typeof r=="object"&&(r=xm(t,r),!r)||!sa(s[1],t.get(r)))return!1;return!0}if(n===ArrayBuffer)u=new Uint8Array(u),t=new Uint8Array(t);else if(n===DataView){if((s=u.byteLength)===t.byteLength)for(;s--&&u.getInt8(s)===t.getInt8(s););return s===-1}if(ArrayBuffer.isView(u)){if((s=u.byteLength)===t.byteLength)for(;s--&&u[s]===t[s];);return s===-1}if(!n||typeof u=="object"){s=0;for(n in u)if(Tm.call(u,n)&&++s&&!Tm.call(t,n)||!(n in t)||!sa(u[n],t[n]))return!1;return Object.keys(t).length===s}}return u!==u&&t!==t}const Ny=tt.createContext(null);function aa({children:u,type:t}){return bt.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:u})}const VS="noopener noreferrer nofollow";class XS{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Gt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){Gt(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(n=>{Gt(this.pdfDocument),Gt(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(n):Array.isArray(t)?n(t):t.then(n)}).then(n=>{Gt(Array.isArray(n));const s=n[0];new Promise(r=>{Gt(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(o=>{r(o)}).catch(()=>{Gt(!1)}):typeof s=="number"?r(s):Gt(!1)}).then(r=>{const o=r+1;Gt(this.pdfViewer),Gt(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:n,pageIndex:r,pageNumber:o})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const n=t-1;Gt(this.pdfViewer),Gt(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:n,pageNumber:t})}addLinkAttributes(t,n,s){t.href=n,t.rel=this.externalLinkRel||VS,t.target=s?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const Rm={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},Tl=typeof window<"u",ky=Tl&&window.location.protocol==="file:";function YS(u){return typeof u<"u"}function ts(u){return YS(u)&&u!==null}function $S(u){return typeof u=="string"}function KS(u){return u instanceof ArrayBuffer}function QS(u){return Gt(Tl),u instanceof Blob}function Eh(u){return $S(u)&&/^data:/.test(u)}function Cm(u){Gt(Eh(u));const[t="",n=""]=u.split(",");return t.split(";").indexOf("base64")!==-1?atob(n):unescape(n)}function WS(){return Tl&&window.devicePixelRatio||1}const Py="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Mm(){ke(!ky,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${Py}`)}function ZS(){ke(!ky,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${Py}`)}function us(u){u?.cancel&&u.cancel()}function _h(u,t){return Object.defineProperty(u,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(u,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(u,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(u,"originalHeight",{get(){return this.view[3]},configurable:!0}),u}function JS(u){return u.name==="RenderingCancelledException"}function tE(u){return new Promise((t,n)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return n(new Error("Error while reading a file."));t(s.result)},s.onerror=r=>{if(!r.target)return n(new Error("Error while reading a file."));const{error:o}=r.target;if(!o)return n(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return n(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return n(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return n(new Error("Error while reading a file: Aborted."));default:return n(new Error("Error while reading a file."))}},s.readAsArrayBuffer(u)})}function eE(u,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return u}}function la(){return tt.useReducer(eE,{value:void 0,error:void 0})}var Dm=function(u,t){var n={};for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&t.indexOf(s)<0&&(n[s]=u[s]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(u);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(u,s[r])&&(n[s[r]]=u[s[r]]);return n};const{PDFDataRangeTransport:nE}=ES,iE=(u,t)=>{switch(t){case Rm.NEED_PASSWORD:{const n=prompt("Enter the password to open this PDF file.");u(n);break}case Rm.INCORRECT_PASSWORD:{const n=prompt("Invalid password. Please try again.");u(n);break}}};function Om(u){return typeof u=="object"&&u!==null&&("data"in u||"range"in u||"url"in u)}const sE=tt.forwardRef(function(t,n){var{children:s,className:r,error:o="Failed to load PDF file.",externalLinkRel:c,externalLinkTarget:h,file:f,inputRef:p,imageResourcesPath:g,loading:y="Loading PDF",noData:b="No PDF file specified.",onItemClick:A,onLoadError:S,onLoadProgress:E,onLoadSuccess:w,onPassword:T=iE,onSourceError:L,onSourceSuccess:R,options:N,renderMode:C,rotate:U,scale:z}=t,V=Dm(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate","scale"]);const[G,K]=la(),{value:Z,error:st}=G,[mt,lt]=la(),{value:rt,error:D}=mt,H=tt.useRef(new XS),J=tt.useRef([]),yt=tt.useRef(void 0),M=tt.useRef(void 0);f&&f!==yt.current&&Om(f)&&(ke(!sa(f,yt.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),yt.current=f),N&&N!==M.current&&(ke(!sa(N,M.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),M.current=N);const X=tt.useRef({scrollPageIntoView:kt=>{const{dest:re,pageNumber:$t,pageIndex:pe=$t-1}=kt;if(A){A({dest:re,pageIndex:pe,pageNumber:$t});return}const oi=J.current[pe];if(oi){oi.scrollIntoView();return}ke(!1,`An internal link leading to page ${$t} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});tt.useImperativeHandle(n,()=>({linkService:H,pages:J,viewer:X}),[]);function W(){R&&R()}function Q(){st&&(ke(!1,st.toString()),L&&L(st))}function nt(){K({type:"RESET"})}tt.useEffect(nt,[f,K]);const pt=tt.useCallback(async()=>{if(!f)return null;if(typeof f=="string")return Eh(f)?{data:Cm(f)}:(Mm(),{url:f});if(f instanceof nE)return{range:f};if(KS(f))return{data:f};if(Tl&&QS(f))return{data:await tE(f)};if(Gt(typeof f=="object"),Gt(Om(f)),"url"in f&&typeof f.url=="string"){if(Eh(f.url)){const{url:kt}=f,re=Dm(f,["url"]),$t=Cm(kt);return Object.assign({data:$t},re)}Mm()}return f},[f]);tt.useEffect(()=>{const kt=Br(pt());return kt.promise.then(re=>{K({type:"RESOLVE",value:re})}).catch(re=>{K({type:"REJECT",error:re})}),()=>{us(kt)}},[pt,K]),tt.useEffect(()=>{if(!(typeof Z>"u")){if(Z===!1){Q();return}W()}},[Z]);function at(){rt&&(w&&w(rt),J.current=new Array(rt.numPages),H.current.setDocument(rt))}function Et(){D&&(ke(!1,D.toString()),S&&S(D))}tt.useEffect(function(){lt({type:"RESET"})},[lt,Z]),tt.useEffect(function(){if(!Z)return;const re=N?Object.assign(Object.assign({},Z),N):Z,$t=Gh(re);E&&($t.onProgress=E),T&&($t.onPassword=T);const pe=$t,oi=pe.promise.then(li=>{lt({type:"RESOLVE",value:li})}).catch(li=>{pe.destroyed||lt({type:"REJECT",error:li})});return()=>{oi.finally(()=>pe.destroy())}},[N,lt,Z]),tt.useEffect(()=>{if(!(typeof rt>"u")){if(rt===!1){Et();return}at()}},[rt]),tt.useEffect(function(){H.current.setViewer(X.current),H.current.setExternalLinkRel(c),H.current.setExternalLinkTarget(h)},[c,h]);const Dt=tt.useCallback((kt,re)=>{J.current[kt]=re},[]),de=tt.useCallback(kt=>{delete J.current[kt]},[]),zt=tt.useMemo(()=>({imageResourcesPath:g,linkService:H.current,onItemClick:A,pdf:rt,registerPage:Dt,renderMode:C,rotate:U,scale:z,unregisterPage:de}),[g,A,rt,Dt,C,U,z,de]),He=tt.useMemo(()=>Oy(V,()=>rt),[V,rt]);function Qe(){return bt.jsx(Ny.Provider,{value:zt,children:s})}function fe(){return f?rt==null?bt.jsx(aa,{type:"loading",children:typeof y=="function"?y():y}):rt===!1?bt.jsx(aa,{type:"error",children:typeof o=="function"?o():o}):Qe():bt.jsx(aa,{type:"no-data",children:typeof b=="function"?b():b})}return bt.jsx("div",Object.assign({className:wl("react-pdf__Document",r),ref:p},He,{children:fe()}))});function By(){return tt.useContext(Ny)}function zy(){for(var u=[],t=0;t<arguments.length;t++)u[t]=arguments[t];var n=u.filter(Boolean);if(n.length<=1){var s=n[0];return s||null}return function(o){for(var c=0,h=n;c<h.length;c++){var f=h[c];typeof f=="function"?f(o):f&&(f.current=o)}}}const Uy=tt.createContext(null),Hy={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},aE=/^H(\d+)$/;function rE(u){return u in Hy}function xl(u){return"children"in u}function Fy(u){return xl(u)?u.children.length===1&&0 in u.children&&"id"in u.children[0]:!1}function oE(u){const t={};if(xl(u)){const{role:n}=u,s=n.match(aE);if(s)t.role="heading",t["aria-level"]=Number(s[1]);else if(rE(n)){const r=Hy[n];r&&(t.role=r)}}return t}function Iy(u){const t={};if(xl(u)){if(u.alt!==void 0&&(t["aria-label"]=u.alt),u.lang!==void 0&&(t.lang=u.lang),Fy(u)){const[n]=u.children;if(n){const s=Iy(n);return Object.assign(Object.assign({},t),s)}}}else"id"in u&&(t["aria-owns"]=u.id);return t}function lE(u){return u?Object.assign(Object.assign({},oE(u)),Iy(u)):null}function jy({className:u,node:t}){const n=tt.useMemo(()=>lE(t),[t]),s=tt.useMemo(()=>!xl(t)||Fy(t)?null:t.children.map((r,o)=>bt.jsx(jy,{node:r},o)),[t]);return bt.jsx("span",Object.assign({className:u},n,{children:s}))}function Rl(){return tt.useContext(Uy)}function cE(){const u=Rl();Gt(u);const{onGetStructTreeError:t,onGetStructTreeSuccess:n}=u,[s,r]=la(),{value:o,error:c}=s,{customTextRenderer:h,page:f}=u;function p(){o&&n&&n(o)}function g(){c&&(ke(!1,c.toString()),t&&t(c))}return tt.useEffect(function(){r({type:"RESET"})},[r,f]),tt.useEffect(function(){if(h||!f)return;const b=Br(f.getStructTree()),A=b;return b.promise.then(S=>{r({type:"RESOLVE",value:S})}).catch(S=>{r({type:"REJECT",error:S})}),()=>us(A)},[h,f,r]),tt.useEffect(()=>{if(o!==void 0){if(o===!1){g();return}p()}},[o]),o?bt.jsx(jy,{className:"react-pdf__Page__structTree structTree",node:o}):null}const Lm=Fn;function uE(u){const t=Rl();Gt(t);const n=Object.assign(Object.assign({},t),u),{_className:s,canvasBackground:r,devicePixelRatio:o=WS(),onRenderError:c,onRenderSuccess:h,page:f,renderForms:p,renderTextLayer:g,rotate:y,scale:b}=n,{canvasRef:A}=u;Gt(f);const S=tt.useRef(null);function E(){f&&h&&h(_h(f,b))}function w(N){JS(N)||(ke(!1,N.toString()),c&&c(N))}const T=tt.useMemo(()=>f.getViewport({scale:b*o,rotation:y}),[o,f,y,b]),L=tt.useMemo(()=>f.getViewport({scale:b,rotation:y}),[f,y,b]);tt.useEffect(function(){if(!f)return;f.cleanup();const{current:C}=S;if(!C)return;C.width=T.width,C.height=T.height,C.style.width=`${Math.floor(L.width)}px`,C.style.height=`${Math.floor(L.height)}px`,C.style.visibility="hidden";const U={annotationMode:p?Lm.ENABLE_FORMS:Lm.ENABLE,canvasContext:C.getContext("2d",{alpha:!1}),viewport:T};r&&(U.background=r);const z=f.render(U),V=z;return z.promise.then(()=>{C.style.visibility="",E()}).catch(w),()=>us(V)},[r,f,p,T,L]);const R=tt.useCallback(()=>{const{current:N}=S;N&&(N.width=0,N.height=0)},[]);return tt.useEffect(()=>R,[R]),bt.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:zy(A,S),style:{display:"block",userSelect:"none"},children:g?bt.jsx(cE,{}):null})}function hE(u){return"str"in u}function dE(){const u=Rl();Gt(u);const{customTextRenderer:t,onGetTextError:n,onGetTextSuccess:s,onRenderTextLayerError:r,onRenderTextLayerSuccess:o,page:c,pageIndex:h,pageNumber:f,rotate:p,scale:g}=u;Gt(c);const[y,b]=la(),{value:A,error:S}=y,E=tt.useRef(null);ke(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function w(){A&&s&&s(A)}function T(){S&&(ke(!1,S.toString()),n&&n(S))}tt.useEffect(function(){b({type:"RESET"})},[c,b]),tt.useEffect(function(){if(!c)return;const V=Br(c.getTextContent()),G=V;return V.promise.then(K=>{b({type:"RESOLVE",value:K})}).catch(K=>{b({type:"REJECT",error:K})}),()=>us(G)},[c,b]),tt.useEffect(()=>{if(A!==void 0){if(A===!1){T();return}w()}},[A]);const L=tt.useCallback(()=>{o&&o()},[o]),R=tt.useCallback(z=>{ke(!1,z.toString()),r&&r(z)},[r]);function N(){const z=E.current;z&&z.classList.add("selecting")}function C(){const z=E.current;z&&z.classList.remove("selecting")}const U=tt.useMemo(()=>c.getViewport({scale:g,rotation:p}),[c,p,g]);return tt.useLayoutEffect(function(){if(!c||!A)return;const{current:V}=E;if(!V)return;V.innerHTML="";const G=c.streamTextContent({includeMarkedContent:!0}),K={container:V,textContentSource:G,viewport:U},Z=new _r(K),st=Z;return Z.render().then(()=>{const mt=document.createElement("div");mt.className="endOfContent",V.append(mt);const lt=V.querySelectorAll('[role="presentation"]');if(t){let rt=0;A.items.forEach((D,H)=>{if(!hE(D))return;const J=lt[rt];if(!J)return;const yt=t(Object.assign({pageIndex:h,pageNumber:f,itemIndex:H},D));J.innerHTML=yt,rt+=D.str&&D.hasEOL?2:1})}L()}).catch(R),()=>us(st)},[t,R,L,c,h,f,A,U]),bt.jsx("div",{className:wl("react-pdf__Page__textContent","textLayer"),onMouseUp:C,onMouseDown:N,ref:E})}function fE(){const u=By(),t=Rl();Gt(t);const n=Object.assign(Object.assign({},u),t),{imageResourcesPath:s,linkService:r,onGetAnnotationsError:o,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:h,onRenderAnnotationLayerSuccess:f,page:p,pdf:g,renderForms:y,rotate:b,scale:A=1}=n;Gt(g),Gt(p),Gt(r);const[S,E]=la(),{value:w,error:T}=S,L=tt.useRef(null);ke(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function R(){w&&c&&c(w)}function N(){T&&(ke(!1,T.toString()),o&&o(T))}tt.useEffect(function(){E({type:"RESET"})},[E,p]),tt.useEffect(function(){if(!p)return;const G=Br(p.getAnnotations()),K=G;return G.promise.then(Z=>{E({type:"RESOLVE",value:Z})}).catch(Z=>{E({type:"REJECT",error:Z})}),()=>{us(K)}},[E,p]),tt.useEffect(()=>{if(w!==void 0){if(w===!1){N();return}R()}},[w]);function C(){f&&f()}function U(V){ke(!1,`${V}`),h&&h(V)}const z=tt.useMemo(()=>p.getViewport({scale:A,rotation:b}),[p,b,A]);return tt.useEffect(function(){if(!g||!p||!r||!w)return;const{current:G}=L;if(!G)return;const K=z.clone({dontFlip:!0}),Z={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:G,l10n:null,page:p,structTreeLayer:null,viewport:K},st={annotations:w,annotationStorage:g.annotationStorage,div:G,imageResourcesPath:s,linkService:r,page:p,renderForms:y,viewport:K};G.innerHTML="";try{new $h(Z).render(st),C()}catch(mt){U(mt)}return()=>{}},[w,s,r,p,g,y,z]),bt.jsx("div",{className:wl("react-pdf__Page__annotations","annotationLayer"),ref:L})}var pE=function(u,t){var n={};for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&t.indexOf(s)<0&&(n[s]=u[s]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(u);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(u,s[r])&&(n[s[r]]=u[s[r]]);return n};const Nm=1;function gE(u){const t=By(),n=Object.assign(Object.assign({},t),u),{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:o,canvasRef:c,children:h,className:f,customRenderer:p,customTextRenderer:g,devicePixelRatio:y,error:b="Failed to load the page.",height:A,inputRef:S,loading:E="Loading page",noData:w="No page specified.",onGetAnnotationsError:T,onGetAnnotationsSuccess:L,onGetStructTreeError:R,onGetStructTreeSuccess:N,onGetTextError:C,onGetTextSuccess:U,onLoadError:z,onLoadSuccess:V,onRenderAnnotationLayerError:G,onRenderAnnotationLayerSuccess:K,onRenderError:Z,onRenderSuccess:st,onRenderTextLayerError:mt,onRenderTextLayerSuccess:lt,pageIndex:rt,pageNumber:D,pdf:H,registerPage:J,renderAnnotationLayer:yt=!0,renderForms:M=!1,renderMode:X="canvas",renderTextLayer:W=!0,rotate:Q,scale:nt=Nm,unregisterPage:pt,width:at}=n,Et=pE(n,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Dt,de]=la(),{value:zt,error:He}=Dt,Qe=tt.useRef(null);Gt(H);const fe=ts(D)?D-1:rt??null,kt=D??(ts(rt)?rt+1:null),re=Q??(zt?zt.rotate:null),$t=tt.useMemo(()=>{if(!zt)return null;let oe=1;const We=nt??Nm;if(at||A){const be=zt.getViewport({scale:1,rotation:re});at?oe=at/be.width:A&&(oe=A/be.height)}return We*oe},[A,zt,re,nt,at]);tt.useEffect(function(){return()=>{ts(fe)&&r&&pt&&pt(fe)}},[r,H,fe,pt]);function pe(){if(V){if(!zt||!$t)return;V(_h(zt,$t))}if(r&&J){if(!ts(fe)||!Qe.current)return;J(fe,Qe.current)}}function oi(){He&&(ke(!1,He.toString()),z&&z(He))}tt.useEffect(function(){de({type:"RESET"})},[de,H,fe]),tt.useEffect(function(){if(!H||!kt)return;const We=Br(H.getPage(kt)),be=We;return We.promise.then(da=>{de({type:"RESOLVE",value:da})}).catch(da=>{de({type:"REJECT",error:da})}),()=>us(be)},[de,H,kt]),tt.useEffect(()=>{if(zt!==void 0){if(zt===!1){oi();return}pe()}},[zt,$t]);const li=tt.useMemo(()=>zt&&ts(fe)&&kt&&ts(re)&&ts($t)?{_className:s,canvasBackground:o,customTextRenderer:g,devicePixelRatio:y,onGetAnnotationsError:T,onGetAnnotationsSuccess:L,onGetStructTreeError:R,onGetStructTreeSuccess:N,onGetTextError:C,onGetTextSuccess:U,onRenderAnnotationLayerError:G,onRenderAnnotationLayerSuccess:K,onRenderError:Z,onRenderSuccess:st,onRenderTextLayerError:mt,onRenderTextLayerSuccess:lt,page:zt,pageIndex:fe,pageNumber:kt,renderForms:M,renderTextLayer:W,rotate:re,scale:$t}:null,[s,o,g,y,T,L,R,N,C,U,G,K,Z,st,mt,lt,zt,fe,kt,M,W,re,$t]),Hr=tt.useMemo(()=>Oy(Et,()=>zt&&($t?_h(zt,$t):void 0)),[Et,zt,$t]),In=`${fe}@${$t}/${re}`;function Pl(){switch(X){case"custom":return Gt(p),bt.jsx(p,{},`${In}_custom`);case"none":return null;case"canvas":default:return bt.jsx(uE,{canvasRef:c},`${In}_canvas`)}}function Fr(){return W?bt.jsx(dE,{},`${In}_text`):null}function Bl(){return yt?bt.jsx(fE,{},`${In}_annotations`):null}function zl(){return bt.jsxs(Uy.Provider,{value:li,children:[Pl(),Fr(),Bl(),h]})}function Pi(){return kt?H===null||zt===void 0||zt===null?bt.jsx(aa,{type:"loading",children:typeof E=="function"?E():E}):H===!1||zt===!1?bt.jsx(aa,{type:"error",children:typeof b=="function"?b():b}):zl():bt.jsx(aa,{type:"no-data",children:typeof w=="function"?w():w})}return bt.jsx("div",Object.assign({className:wl(s,f),"data-page-number":kt,ref:zy(S,Qe),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${$t}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Hr,{children:Pi()}))}ZS();Ni.workerSrc="pdf.worker.mjs";function Gy(u,t){return function(){return u.apply(t,arguments)}}const{toString:mE}=Object.prototype,{getPrototypeOf:Zh}=Object,{iterator:Cl,toStringTag:qy}=Symbol,Ml=(u=>t=>{const n=mE.call(t);return u[n]||(u[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),xn=u=>(u=u.toLowerCase(),t=>Ml(t)===u),Dl=u=>t=>typeof t===u,{isArray:ua}=Array,xr=Dl("undefined");function yE(u){return u!==null&&!xr(u)&&u.constructor!==null&&!xr(u.constructor)&&$e(u.constructor.isBuffer)&&u.constructor.isBuffer(u)}const Vy=xn("ArrayBuffer");function bE(u){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(u):t=u&&u.buffer&&Vy(u.buffer),t}const vE=Dl("string"),$e=Dl("function"),Xy=Dl("number"),Ol=u=>u!==null&&typeof u=="object",AE=u=>u===!0||u===!1,ul=u=>{if(Ml(u)!=="object")return!1;const t=Zh(u);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(qy in u)&&!(Cl in u)},SE=xn("Date"),EE=xn("File"),_E=xn("Blob"),wE=xn("FileList"),TE=u=>Ol(u)&&$e(u.pipe),xE=u=>{let t;return u&&(typeof FormData=="function"&&u instanceof FormData||$e(u.append)&&((t=Ml(u))==="formdata"||t==="object"&&$e(u.toString)&&u.toString()==="[object FormData]"))},RE=xn("URLSearchParams"),[CE,ME,DE,OE]=["ReadableStream","Request","Response","Headers"].map(xn),LE=u=>u.trim?u.trim():u.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function zr(u,t,{allOwnKeys:n=!1}={}){if(u===null||typeof u>"u")return;let s,r;if(typeof u!="object"&&(u=[u]),ua(u))for(s=0,r=u.length;s<r;s++)t.call(null,u[s],s,u);else{const o=n?Object.getOwnPropertyNames(u):Object.keys(u),c=o.length;let h;for(s=0;s<c;s++)h=o[s],t.call(null,u[h],h,u)}}function Yy(u,t){t=t.toLowerCase();const n=Object.keys(u);let s=n.length,r;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const is=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,$y=u=>!xr(u)&&u!==is;function wh(){const{caseless:u}=$y(this)&&this||{},t={},n=(s,r)=>{const o=u&&Yy(t,r)||r;ul(t[o])&&ul(s)?t[o]=wh(t[o],s):ul(s)?t[o]=wh({},s):ua(s)?t[o]=s.slice():t[o]=s};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&zr(arguments[s],n);return t}const NE=(u,t,n,{allOwnKeys:s}={})=>(zr(t,(r,o)=>{n&&$e(r)?u[o]=Gy(r,n):u[o]=r},{allOwnKeys:s}),u),kE=u=>(u.charCodeAt(0)===65279&&(u=u.slice(1)),u),PE=(u,t,n,s)=>{u.prototype=Object.create(t.prototype,s),u.prototype.constructor=u,Object.defineProperty(u,"super",{value:t.prototype}),n&&Object.assign(u.prototype,n)},BE=(u,t,n,s)=>{let r,o,c;const h={};if(t=t||{},u==null)return t;do{for(r=Object.getOwnPropertyNames(u),o=r.length;o-- >0;)c=r[o],(!s||s(c,u,t))&&!h[c]&&(t[c]=u[c],h[c]=!0);u=n!==!1&&Zh(u)}while(u&&(!n||n(u,t))&&u!==Object.prototype);return t},zE=(u,t,n)=>{u=String(u),(n===void 0||n>u.length)&&(n=u.length),n-=t.length;const s=u.indexOf(t,n);return s!==-1&&s===n},UE=u=>{if(!u)return null;if(ua(u))return u;let t=u.length;if(!Xy(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=u[t];return n},HE=(u=>t=>u&&t instanceof u)(typeof Uint8Array<"u"&&Zh(Uint8Array)),FE=(u,t)=>{const s=(u&&u[Cl]).call(u);let r;for(;(r=s.next())&&!r.done;){const o=r.value;t.call(u,o[0],o[1])}},IE=(u,t)=>{let n;const s=[];for(;(n=u.exec(t))!==null;)s.push(n);return s},jE=xn("HTMLFormElement"),GE=u=>u.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),km=(({hasOwnProperty:u})=>(t,n)=>u.call(t,n))(Object.prototype),qE=xn("RegExp"),Ky=(u,t)=>{const n=Object.getOwnPropertyDescriptors(u),s={};zr(n,(r,o)=>{let c;(c=t(r,o,u))!==!1&&(s[o]=c||r)}),Object.defineProperties(u,s)},VE=u=>{Ky(u,(t,n)=>{if($e(u)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=u[n];if($e(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},XE=(u,t)=>{const n={},s=r=>{r.forEach(o=>{n[o]=!0})};return ua(u)?s(u):s(String(u).split(t)),n},YE=()=>{},$E=(u,t)=>u!=null&&Number.isFinite(u=+u)?u:t;function KE(u){return!!(u&&$e(u.append)&&u[qy]==="FormData"&&u[Cl])}const QE=u=>{const t=new Array(10),n=(s,r)=>{if(Ol(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[r]=s;const o=ua(s)?[]:{};return zr(s,(c,h)=>{const f=n(c,r+1);!xr(f)&&(o[h]=f)}),t[r]=void 0,o}}return s};return n(u,0)},WE=xn("AsyncFunction"),ZE=u=>u&&(Ol(u)||$e(u))&&$e(u.then)&&$e(u.catch),Qy=((u,t)=>u?setImmediate:t?((n,s)=>(is.addEventListener("message",({source:r,data:o})=>{r===is&&o===n&&s.length&&s.shift()()},!1),r=>{s.push(r),is.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",$e(is.postMessage)),JE=typeof queueMicrotask<"u"?queueMicrotask.bind(is):typeof process<"u"&&process.nextTick||Qy,t_=u=>u!=null&&$e(u[Cl]),j={isArray:ua,isArrayBuffer:Vy,isBuffer:yE,isFormData:xE,isArrayBufferView:bE,isString:vE,isNumber:Xy,isBoolean:AE,isObject:Ol,isPlainObject:ul,isReadableStream:CE,isRequest:ME,isResponse:DE,isHeaders:OE,isUndefined:xr,isDate:SE,isFile:EE,isBlob:_E,isRegExp:qE,isFunction:$e,isStream:TE,isURLSearchParams:RE,isTypedArray:HE,isFileList:wE,forEach:zr,merge:wh,extend:NE,trim:LE,stripBOM:kE,inherits:PE,toFlatObject:BE,kindOf:Ml,kindOfTest:xn,endsWith:zE,toArray:UE,forEachEntry:FE,matchAll:IE,isHTMLForm:jE,hasOwnProperty:km,hasOwnProp:km,reduceDescriptors:Ky,freezeMethods:VE,toObjectSet:XE,toCamelCase:GE,noop:YE,toFiniteNumber:$E,findKey:Yy,global:is,isContextDefined:$y,isSpecCompliantForm:KE,toJSONObject:QE,isAsyncFn:WE,isThenable:ZE,setImmediate:Qy,asap:JE,isIterable:t_};function St(u,t,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=u,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}j.inherits(St,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:j.toJSONObject(this.config),code:this.code,status:this.status}}});const Wy=St.prototype,Zy={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(u=>{Zy[u]={value:u}});Object.defineProperties(St,Zy);Object.defineProperty(Wy,"isAxiosError",{value:!0});St.from=(u,t,n,s,r,o)=>{const c=Object.create(Wy);return j.toFlatObject(u,c,function(f){return f!==Error.prototype},h=>h!=="isAxiosError"),St.call(c,u.message,t,n,s,r),c.cause=u,c.name=u.name,o&&Object.assign(c,o),c};const e_=null;function Th(u){return j.isPlainObject(u)||j.isArray(u)}function Jy(u){return j.endsWith(u,"[]")?u.slice(0,-2):u}function Pm(u,t,n){return u?u.concat(t).map(function(r,o){return r=Jy(r),!n&&o?"["+r+"]":r}).join(n?".":""):t}function n_(u){return j.isArray(u)&&!u.some(Th)}const i_=j.toFlatObject(j,{},null,function(t){return/^is[A-Z]/.test(t)});function Ll(u,t,n){if(!j.isObject(u))throw new TypeError("target must be an object");t=t||new FormData,n=j.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,w){return!j.isUndefined(w[E])});const s=n.metaTokens,r=n.visitor||g,o=n.dots,c=n.indexes,f=(n.Blob||typeof Blob<"u"&&Blob)&&j.isSpecCompliantForm(t);if(!j.isFunction(r))throw new TypeError("visitor must be a function");function p(S){if(S===null)return"";if(j.isDate(S))return S.toISOString();if(j.isBoolean(S))return S.toString();if(!f&&j.isBlob(S))throw new St("Blob is not supported. Use a Buffer instead.");return j.isArrayBuffer(S)||j.isTypedArray(S)?f&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function g(S,E,w){let T=S;if(S&&!w&&typeof S=="object"){if(j.endsWith(E,"{}"))E=s?E:E.slice(0,-2),S=JSON.stringify(S);else if(j.isArray(S)&&n_(S)||(j.isFileList(S)||j.endsWith(E,"[]"))&&(T=j.toArray(S)))return E=Jy(E),T.forEach(function(R,N){!(j.isUndefined(R)||R===null)&&t.append(c===!0?Pm([E],N,o):c===null?E:E+"[]",p(R))}),!1}return Th(S)?!0:(t.append(Pm(w,E,o),p(S)),!1)}const y=[],b=Object.assign(i_,{defaultVisitor:g,convertValue:p,isVisitable:Th});function A(S,E){if(!j.isUndefined(S)){if(y.indexOf(S)!==-1)throw Error("Circular reference detected in "+E.join("."));y.push(S),j.forEach(S,function(T,L){(!(j.isUndefined(T)||T===null)&&r.call(t,T,j.isString(L)?L.trim():L,E,b))===!0&&A(T,E?E.concat(L):[L])}),y.pop()}}if(!j.isObject(u))throw new TypeError("data must be an object");return A(u),t}function Bm(u){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(u).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Jh(u,t){this._pairs=[],u&&Ll(u,this,t)}const tb=Jh.prototype;tb.append=function(t,n){this._pairs.push([t,n])};tb.toString=function(t){const n=t?function(s){return t.call(this,s,Bm)}:Bm;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function s_(u){return encodeURIComponent(u).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function eb(u,t,n){if(!t)return u;const s=n&&n.encode||s_;j.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let o;if(r?o=r(t,n):o=j.isURLSearchParams(t)?t.toString():new Jh(t,n).toString(s),o){const c=u.indexOf("#");c!==-1&&(u=u.slice(0,c)),u+=(u.indexOf("?")===-1?"?":"&")+o}return u}class zm{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){j.forEach(this.handlers,function(s){s!==null&&t(s)})}}const nb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},a_=typeof URLSearchParams<"u"?URLSearchParams:Jh,r_=typeof FormData<"u"?FormData:null,o_=typeof Blob<"u"?Blob:null,l_={isBrowser:!0,classes:{URLSearchParams:a_,FormData:r_,Blob:o_},protocols:["http","https","file","blob","url","data"]},td=typeof window<"u"&&typeof document<"u",xh=typeof navigator=="object"&&navigator||void 0,c_=td&&(!xh||["ReactNative","NativeScript","NS"].indexOf(xh.product)<0),u_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",h_=td&&window.location.href||"http://localhost",d_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:td,hasStandardBrowserEnv:c_,hasStandardBrowserWebWorkerEnv:u_,navigator:xh,origin:h_},Symbol.toStringTag,{value:"Module"})),Pe={...d_,...l_};function f_(u,t){return Ll(u,new Pe.classes.URLSearchParams,Object.assign({visitor:function(n,s,r,o){return Pe.isNode&&j.isBuffer(n)?(this.append(s,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function p_(u){return j.matchAll(/\w+|\[(\w*)]/g,u).map(t=>t[0]==="[]"?"":t[1]||t[0])}function g_(u){const t={},n=Object.keys(u);let s;const r=n.length;let o;for(s=0;s<r;s++)o=n[s],t[o]=u[o];return t}function ib(u){function t(n,s,r,o){let c=n[o++];if(c==="__proto__")return!0;const h=Number.isFinite(+c),f=o>=n.length;return c=!c&&j.isArray(r)?r.length:c,f?(j.hasOwnProp(r,c)?r[c]=[r[c],s]:r[c]=s,!h):((!r[c]||!j.isObject(r[c]))&&(r[c]=[]),t(n,s,r[c],o)&&j.isArray(r[c])&&(r[c]=g_(r[c])),!h)}if(j.isFormData(u)&&j.isFunction(u.entries)){const n={};return j.forEachEntry(u,(s,r)=>{t(p_(s),r,n,0)}),n}return null}function m_(u,t,n){if(j.isString(u))try{return(t||JSON.parse)(u),j.trim(u)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(u)}const Ur={transitional:nb,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,o=j.isObject(t);if(o&&j.isHTMLForm(t)&&(t=new FormData(t)),j.isFormData(t))return r?JSON.stringify(ib(t)):t;if(j.isArrayBuffer(t)||j.isBuffer(t)||j.isStream(t)||j.isFile(t)||j.isBlob(t)||j.isReadableStream(t))return t;if(j.isArrayBufferView(t))return t.buffer;if(j.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let h;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return f_(t,this.formSerializer).toString();if((h=j.isFileList(t))||s.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Ll(h?{"files[]":t}:t,f&&new f,this.formSerializer)}}return o||r?(n.setContentType("application/json",!1),m_(t)):t}],transformResponse:[function(t){const n=this.transitional||Ur.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(j.isResponse(t)||j.isReadableStream(t))return t;if(t&&j.isString(t)&&(s&&!this.responseType||r)){const c=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(h){if(c)throw h.name==="SyntaxError"?St.from(h,St.ERR_BAD_RESPONSE,this,null,this.response):h}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pe.classes.FormData,Blob:Pe.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};j.forEach(["delete","get","head","post","put","patch"],u=>{Ur.headers[u]={}});const y_=j.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),b_=u=>{const t={};let n,s,r;return u&&u.split(`
`).forEach(function(c){r=c.indexOf(":"),n=c.substring(0,r).trim().toLowerCase(),s=c.substring(r+1).trim(),!(!n||t[n]&&y_[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},Um=Symbol("internals");function gr(u){return u&&String(u).trim().toLowerCase()}function hl(u){return u===!1||u==null?u:j.isArray(u)?u.map(hl):String(u)}function v_(u){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(u);)t[s[1]]=s[2];return t}const A_=u=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(u.trim());function hh(u,t,n,s,r){if(j.isFunction(s))return s.call(this,t,n);if(r&&(t=n),!!j.isString(t)){if(j.isString(s))return t.indexOf(s)!==-1;if(j.isRegExp(s))return s.test(t)}}function S_(u){return u.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function E_(u,t){const n=j.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(u,s+n,{value:function(r,o,c){return this[s].call(this,t,r,o,c)},configurable:!0})})}let Ke=class{constructor(t){t&&this.set(t)}set(t,n,s){const r=this;function o(h,f,p){const g=gr(f);if(!g)throw new Error("header name must be a non-empty string");const y=j.findKey(r,g);(!y||r[y]===void 0||p===!0||p===void 0&&r[y]!==!1)&&(r[y||f]=hl(h))}const c=(h,f)=>j.forEach(h,(p,g)=>o(p,g,f));if(j.isPlainObject(t)||t instanceof this.constructor)c(t,n);else if(j.isString(t)&&(t=t.trim())&&!A_(t))c(b_(t),n);else if(j.isObject(t)&&j.isIterable(t)){let h={},f,p;for(const g of t){if(!j.isArray(g))throw TypeError("Object iterator must return a key-value pair");h[p=g[0]]=(f=h[p])?j.isArray(f)?[...f,g[1]]:[f,g[1]]:g[1]}c(h,n)}else t!=null&&o(n,t,s);return this}get(t,n){if(t=gr(t),t){const s=j.findKey(this,t);if(s){const r=this[s];if(!n)return r;if(n===!0)return v_(r);if(j.isFunction(n))return n.call(this,r,s);if(j.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=gr(t),t){const s=j.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||hh(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let r=!1;function o(c){if(c=gr(c),c){const h=j.findKey(s,c);h&&(!n||hh(s,s[h],h,n))&&(delete s[h],r=!0)}}return j.isArray(t)?t.forEach(o):o(t),r}clear(t){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const o=n[s];(!t||hh(this,this[o],o,t,!0))&&(delete this[o],r=!0)}return r}normalize(t){const n=this,s={};return j.forEach(this,(r,o)=>{const c=j.findKey(s,o);if(c){n[c]=hl(r),delete n[o];return}const h=t?S_(o):String(o).trim();h!==o&&delete n[o],n[h]=hl(r),s[h]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return j.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=t&&j.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[Um]=this[Um]={accessors:{}}).accessors,r=this.prototype;function o(c){const h=gr(c);s[h]||(E_(r,c),s[h]=!0)}return j.isArray(t)?t.forEach(o):o(t),this}};Ke.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);j.reduceDescriptors(Ke.prototype,({value:u},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>u,set(s){this[n]=s}}});j.freezeMethods(Ke);function dh(u,t){const n=this||Ur,s=t||n,r=Ke.from(s.headers);let o=s.data;return j.forEach(u,function(h){o=h.call(n,o,r.normalize(),t?t.status:void 0)}),r.normalize(),o}function sb(u){return!!(u&&u.__CANCEL__)}function ha(u,t,n){St.call(this,u??"canceled",St.ERR_CANCELED,t,n),this.name="CanceledError"}j.inherits(ha,St,{__CANCEL__:!0});function ab(u,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?u(n):t(new St("Request failed with status code "+n.status,[St.ERR_BAD_REQUEST,St.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function __(u){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(u);return t&&t[1]||""}function w_(u,t){u=u||10;const n=new Array(u),s=new Array(u);let r=0,o=0,c;return t=t!==void 0?t:1e3,function(f){const p=Date.now(),g=s[o];c||(c=p),n[r]=f,s[r]=p;let y=o,b=0;for(;y!==r;)b+=n[y++],y=y%u;if(r=(r+1)%u,r===o&&(o=(o+1)%u),p-c<t)return;const A=g&&p-g;return A?Math.round(b*1e3/A):void 0}}function T_(u,t){let n=0,s=1e3/t,r,o;const c=(p,g=Date.now())=>{n=g,r=null,o&&(clearTimeout(o),o=null),u.apply(null,p)};return[(...p)=>{const g=Date.now(),y=g-n;y>=s?c(p,g):(r=p,o||(o=setTimeout(()=>{o=null,c(r)},s-y)))},()=>r&&c(r)]}const gl=(u,t,n=3)=>{let s=0;const r=w_(50,250);return T_(o=>{const c=o.loaded,h=o.lengthComputable?o.total:void 0,f=c-s,p=r(f),g=c<=h;s=c;const y={loaded:c,total:h,progress:h?c/h:void 0,bytes:f,rate:p||void 0,estimated:p&&h&&g?(h-c)/p:void 0,event:o,lengthComputable:h!=null,[t?"download":"upload"]:!0};u(y)},n)},Hm=(u,t)=>{const n=u!=null;return[s=>t[0]({lengthComputable:n,total:u,loaded:s}),t[1]]},Fm=u=>(...t)=>j.asap(()=>u(...t)),x_=Pe.hasStandardBrowserEnv?((u,t)=>n=>(n=new URL(n,Pe.origin),u.protocol===n.protocol&&u.host===n.host&&(t||u.port===n.port)))(new URL(Pe.origin),Pe.navigator&&/(msie|trident)/i.test(Pe.navigator.userAgent)):()=>!0,R_=Pe.hasStandardBrowserEnv?{write(u,t,n,s,r,o){const c=[u+"="+encodeURIComponent(t)];j.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),j.isString(s)&&c.push("path="+s),j.isString(r)&&c.push("domain="+r),o===!0&&c.push("secure"),document.cookie=c.join("; ")},read(u){const t=document.cookie.match(new RegExp("(^|;\\s*)("+u+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(u){this.write(u,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function C_(u){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(u)}function M_(u,t){return t?u.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):u}function rb(u,t,n){let s=!C_(t);return u&&(s||n==!1)?M_(u,t):t}const Im=u=>u instanceof Ke?{...u}:u;function hs(u,t){t=t||{};const n={};function s(p,g,y,b){return j.isPlainObject(p)&&j.isPlainObject(g)?j.merge.call({caseless:b},p,g):j.isPlainObject(g)?j.merge({},g):j.isArray(g)?g.slice():g}function r(p,g,y,b){if(j.isUndefined(g)){if(!j.isUndefined(p))return s(void 0,p,y,b)}else return s(p,g,y,b)}function o(p,g){if(!j.isUndefined(g))return s(void 0,g)}function c(p,g){if(j.isUndefined(g)){if(!j.isUndefined(p))return s(void 0,p)}else return s(void 0,g)}function h(p,g,y){if(y in t)return s(p,g);if(y in u)return s(void 0,p)}const f={url:o,method:o,data:o,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:h,headers:(p,g,y)=>r(Im(p),Im(g),y,!0)};return j.forEach(Object.keys(Object.assign({},u,t)),function(g){const y=f[g]||r,b=y(u[g],t[g],g);j.isUndefined(b)&&y!==h||(n[g]=b)}),n}const ob=u=>{const t=hs({},u);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:o,headers:c,auth:h}=t;t.headers=c=Ke.from(c),t.url=eb(rb(t.baseURL,t.url,t.allowAbsoluteUrls),u.params,u.paramsSerializer),h&&c.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):"")));let f;if(j.isFormData(n)){if(Pe.hasStandardBrowserEnv||Pe.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((f=c.getContentType())!==!1){const[p,...g]=f?f.split(";").map(y=>y.trim()).filter(Boolean):[];c.setContentType([p||"multipart/form-data",...g].join("; "))}}if(Pe.hasStandardBrowserEnv&&(s&&j.isFunction(s)&&(s=s(t)),s||s!==!1&&x_(t.url))){const p=r&&o&&R_.read(o);p&&c.set(r,p)}return t},D_=typeof XMLHttpRequest<"u",O_=D_&&function(u){return new Promise(function(n,s){const r=ob(u);let o=r.data;const c=Ke.from(r.headers).normalize();let{responseType:h,onUploadProgress:f,onDownloadProgress:p}=r,g,y,b,A,S;function E(){A&&A(),S&&S(),r.cancelToken&&r.cancelToken.unsubscribe(g),r.signal&&r.signal.removeEventListener("abort",g)}let w=new XMLHttpRequest;w.open(r.method.toUpperCase(),r.url,!0),w.timeout=r.timeout;function T(){if(!w)return;const R=Ke.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),C={data:!h||h==="text"||h==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:R,config:u,request:w};ab(function(z){n(z),E()},function(z){s(z),E()},C),w=null}"onloadend"in w?w.onloadend=T:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(T)},w.onabort=function(){w&&(s(new St("Request aborted",St.ECONNABORTED,u,w)),w=null)},w.onerror=function(){s(new St("Network Error",St.ERR_NETWORK,u,w)),w=null},w.ontimeout=function(){let N=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const C=r.transitional||nb;r.timeoutErrorMessage&&(N=r.timeoutErrorMessage),s(new St(N,C.clarifyTimeoutError?St.ETIMEDOUT:St.ECONNABORTED,u,w)),w=null},o===void 0&&c.setContentType(null),"setRequestHeader"in w&&j.forEach(c.toJSON(),function(N,C){w.setRequestHeader(C,N)}),j.isUndefined(r.withCredentials)||(w.withCredentials=!!r.withCredentials),h&&h!=="json"&&(w.responseType=r.responseType),p&&([b,S]=gl(p,!0),w.addEventListener("progress",b)),f&&w.upload&&([y,A]=gl(f),w.upload.addEventListener("progress",y),w.upload.addEventListener("loadend",A)),(r.cancelToken||r.signal)&&(g=R=>{w&&(s(!R||R.type?new ha(null,u,w):R),w.abort(),w=null)},r.cancelToken&&r.cancelToken.subscribe(g),r.signal&&(r.signal.aborted?g():r.signal.addEventListener("abort",g)));const L=__(r.url);if(L&&Pe.protocols.indexOf(L)===-1){s(new St("Unsupported protocol "+L+":",St.ERR_BAD_REQUEST,u));return}w.send(o||null)})},L_=(u,t)=>{const{length:n}=u=u?u.filter(Boolean):[];if(t||n){let s=new AbortController,r;const o=function(p){if(!r){r=!0,h();const g=p instanceof Error?p:this.reason;s.abort(g instanceof St?g:new ha(g instanceof Error?g.message:g))}};let c=t&&setTimeout(()=>{c=null,o(new St(`timeout ${t} of ms exceeded`,St.ETIMEDOUT))},t);const h=()=>{u&&(c&&clearTimeout(c),c=null,u.forEach(p=>{p.unsubscribe?p.unsubscribe(o):p.removeEventListener("abort",o)}),u=null)};u.forEach(p=>p.addEventListener("abort",o));const{signal:f}=s;return f.unsubscribe=()=>j.asap(h),f}},N_=function*(u,t){let n=u.byteLength;if(n<t){yield u;return}let s=0,r;for(;s<n;)r=s+t,yield u.slice(s,r),s=r},k_=async function*(u,t){for await(const n of P_(u))yield*N_(n,t)},P_=async function*(u){if(u[Symbol.asyncIterator]){yield*u;return}const t=u.getReader();try{for(;;){const{done:n,value:s}=await t.read();if(n)break;yield s}}finally{await t.cancel()}},jm=(u,t,n,s)=>{const r=k_(u,t);let o=0,c,h=f=>{c||(c=!0,s&&s(f))};return new ReadableStream({async pull(f){try{const{done:p,value:g}=await r.next();if(p){h(),f.close();return}let y=g.byteLength;if(n){let b=o+=y;n(b)}f.enqueue(new Uint8Array(g))}catch(p){throw h(p),p}},cancel(f){return h(f),r.return()}},{highWaterMark:2})},Nl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",lb=Nl&&typeof ReadableStream=="function",B_=Nl&&(typeof TextEncoder=="function"?(u=>t=>u.encode(t))(new TextEncoder):async u=>new Uint8Array(await new Response(u).arrayBuffer())),cb=(u,...t)=>{try{return!!u(...t)}catch{return!1}},z_=lb&&cb(()=>{let u=!1;const t=new Request(Pe.origin,{body:new ReadableStream,method:"POST",get duplex(){return u=!0,"half"}}).headers.has("Content-Type");return u&&!t}),Gm=64*1024,Rh=lb&&cb(()=>j.isReadableStream(new Response("").body)),ml={stream:Rh&&(u=>u.body)};Nl&&(u=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!ml[t]&&(ml[t]=j.isFunction(u[t])?n=>n[t]():(n,s)=>{throw new St(`Response type '${t}' is not supported`,St.ERR_NOT_SUPPORT,s)})})})(new Response);const U_=async u=>{if(u==null)return 0;if(j.isBlob(u))return u.size;if(j.isSpecCompliantForm(u))return(await new Request(Pe.origin,{method:"POST",body:u}).arrayBuffer()).byteLength;if(j.isArrayBufferView(u)||j.isArrayBuffer(u))return u.byteLength;if(j.isURLSearchParams(u)&&(u=u+""),j.isString(u))return(await B_(u)).byteLength},H_=async(u,t)=>{const n=j.toFiniteNumber(u.getContentLength());return n??U_(t)},F_=Nl&&(async u=>{let{url:t,method:n,data:s,signal:r,cancelToken:o,timeout:c,onDownloadProgress:h,onUploadProgress:f,responseType:p,headers:g,withCredentials:y="same-origin",fetchOptions:b}=ob(u);p=p?(p+"").toLowerCase():"text";let A=L_([r,o&&o.toAbortSignal()],c),S;const E=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let w;try{if(f&&z_&&n!=="get"&&n!=="head"&&(w=await H_(g,s))!==0){let C=new Request(t,{method:"POST",body:s,duplex:"half"}),U;if(j.isFormData(s)&&(U=C.headers.get("content-type"))&&g.setContentType(U),C.body){const[z,V]=Hm(w,gl(Fm(f)));s=jm(C.body,Gm,z,V)}}j.isString(y)||(y=y?"include":"omit");const T="credentials"in Request.prototype;S=new Request(t,{...b,signal:A,method:n.toUpperCase(),headers:g.normalize().toJSON(),body:s,duplex:"half",credentials:T?y:void 0});let L=await fetch(S,b);const R=Rh&&(p==="stream"||p==="response");if(Rh&&(h||R&&E)){const C={};["status","statusText","headers"].forEach(G=>{C[G]=L[G]});const U=j.toFiniteNumber(L.headers.get("content-length")),[z,V]=h&&Hm(U,gl(Fm(h),!0))||[];L=new Response(jm(L.body,Gm,z,()=>{V&&V(),E&&E()}),C)}p=p||"text";let N=await ml[j.findKey(ml,p)||"text"](L,u);return!R&&E&&E(),await new Promise((C,U)=>{ab(C,U,{data:N,headers:Ke.from(L.headers),status:L.status,statusText:L.statusText,config:u,request:S})})}catch(T){throw E&&E(),T&&T.name==="TypeError"&&/Load failed|fetch/i.test(T.message)?Object.assign(new St("Network Error",St.ERR_NETWORK,u,S),{cause:T.cause||T}):St.from(T,T&&T.code,u,S)}}),Ch={http:e_,xhr:O_,fetch:F_};j.forEach(Ch,(u,t)=>{if(u){try{Object.defineProperty(u,"name",{value:t})}catch{}Object.defineProperty(u,"adapterName",{value:t})}});const qm=u=>`- ${u}`,I_=u=>j.isFunction(u)||u===null||u===!1,ub={getAdapter:u=>{u=j.isArray(u)?u:[u];const{length:t}=u;let n,s;const r={};for(let o=0;o<t;o++){n=u[o];let c;if(s=n,!I_(n)&&(s=Ch[(c=String(n)).toLowerCase()],s===void 0))throw new St(`Unknown adapter '${c}'`);if(s)break;r[c||"#"+o]=s}if(!s){const o=Object.entries(r).map(([h,f])=>`adapter ${h} `+(f===!1?"is not supported by the environment":"is not available in the build"));let c=t?o.length>1?`since :
`+o.map(qm).join(`
`):" "+qm(o[0]):"as no adapter specified";throw new St("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return s},adapters:Ch};function fh(u){if(u.cancelToken&&u.cancelToken.throwIfRequested(),u.signal&&u.signal.aborted)throw new ha(null,u)}function Vm(u){return fh(u),u.headers=Ke.from(u.headers),u.data=dh.call(u,u.transformRequest),["post","put","patch"].indexOf(u.method)!==-1&&u.headers.setContentType("application/x-www-form-urlencoded",!1),ub.getAdapter(u.adapter||Ur.adapter)(u).then(function(s){return fh(u),s.data=dh.call(u,u.transformResponse,s),s.headers=Ke.from(s.headers),s},function(s){return sb(s)||(fh(u),s&&s.response&&(s.response.data=dh.call(u,u.transformResponse,s.response),s.response.headers=Ke.from(s.response.headers))),Promise.reject(s)})}const hb="1.10.0",kl={};["object","boolean","number","function","string","symbol"].forEach((u,t)=>{kl[u]=function(s){return typeof s===u||"a"+(t<1?"n ":" ")+u}});const Xm={};kl.transitional=function(t,n,s){function r(o,c){return"[Axios v"+hb+"] Transitional option '"+o+"'"+c+(s?". "+s:"")}return(o,c,h)=>{if(t===!1)throw new St(r(c," has been removed"+(n?" in "+n:"")),St.ERR_DEPRECATED);return n&&!Xm[c]&&(Xm[c]=!0,console.warn(r(c," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,c,h):!0}};kl.spelling=function(t){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function j_(u,t,n){if(typeof u!="object")throw new St("options must be an object",St.ERR_BAD_OPTION_VALUE);const s=Object.keys(u);let r=s.length;for(;r-- >0;){const o=s[r],c=t[o];if(c){const h=u[o],f=h===void 0||c(h,o,u);if(f!==!0)throw new St("option "+o+" must be "+f,St.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new St("Unknown option "+o,St.ERR_BAD_OPTION)}}const dl={assertOptions:j_,validators:kl},Bn=dl.validators;let os=class{constructor(t){this.defaults=t||{},this.interceptors={request:new zm,response:new zm}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch{}}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=hs(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:o}=n;s!==void 0&&dl.assertOptions(s,{silentJSONParsing:Bn.transitional(Bn.boolean),forcedJSONParsing:Bn.transitional(Bn.boolean),clarifyTimeoutError:Bn.transitional(Bn.boolean)},!1),r!=null&&(j.isFunction(r)?n.paramsSerializer={serialize:r}:dl.assertOptions(r,{encode:Bn.function,serialize:Bn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),dl.assertOptions(n,{baseUrl:Bn.spelling("baseURL"),withXsrfToken:Bn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let c=o&&j.merge(o.common,o[n.method]);o&&j.forEach(["delete","get","head","post","put","patch","common"],S=>{delete o[S]}),n.headers=Ke.concat(c,o);const h=[];let f=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(f=f&&E.synchronous,h.unshift(E.fulfilled,E.rejected))});const p=[];this.interceptors.response.forEach(function(E){p.push(E.fulfilled,E.rejected)});let g,y=0,b;if(!f){const S=[Vm.bind(this),void 0];for(S.unshift.apply(S,h),S.push.apply(S,p),b=S.length,g=Promise.resolve(n);y<b;)g=g.then(S[y++],S[y++]);return g}b=h.length;let A=n;for(y=0;y<b;){const S=h[y++],E=h[y++];try{A=S(A)}catch(w){E.call(this,w);break}}try{g=Vm.call(this,A)}catch(S){return Promise.reject(S)}for(y=0,b=p.length;y<b;)g=g.then(p[y++],p[y++]);return g}getUri(t){t=hs(this.defaults,t);const n=rb(t.baseURL,t.url,t.allowAbsoluteUrls);return eb(n,t.params,t.paramsSerializer)}};j.forEach(["delete","get","head","options"],function(t){os.prototype[t]=function(n,s){return this.request(hs(s||{},{method:t,url:n,data:(s||{}).data}))}});j.forEach(["post","put","patch"],function(t){function n(s){return function(o,c,h){return this.request(hs(h||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:c}))}}os.prototype[t]=n(),os.prototype[t+"Form"]=n(!0)});let G_=class db{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const s=this;this.promise.then(r=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](r);s._listeners=null}),this.promise.then=r=>{let o;const c=new Promise(h=>{s.subscribe(h),o=h}).then(r);return c.cancel=function(){s.unsubscribe(o)},c},t(function(o,c,h){s.reason||(s.reason=new ha(o,c,h),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=s=>{t.abort(s)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new db(function(r){t=r}),cancel:t}}};function q_(u){return function(n){return u.apply(null,n)}}function V_(u){return j.isObject(u)&&u.isAxiosError===!0}const Mh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Mh).forEach(([u,t])=>{Mh[t]=u});function fb(u){const t=new os(u),n=Gy(os.prototype.request,t);return j.extend(n,os.prototype,t,{allOwnKeys:!0}),j.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return fb(hs(u,r))},n}const ae=fb(Ur);ae.Axios=os;ae.CanceledError=ha;ae.CancelToken=G_;ae.isCancel=sb;ae.VERSION=hb;ae.toFormData=Ll;ae.AxiosError=St;ae.Cancel=ae.CanceledError;ae.all=function(t){return Promise.all(t)};ae.spread=q_;ae.isAxiosError=V_;ae.mergeConfig=hs;ae.AxiosHeaders=Ke;ae.formToJSON=u=>ib(j.isHTMLForm(u)?new FormData(u):u);ae.getAdapter=ub.getAdapter;ae.HttpStatusCode=Mh;ae.default=ae;const{Axios:Z_,AxiosError:J_,CanceledError:tw,isCancel:ew,CancelToken:nw,VERSION:iw,all:sw,Cancel:aw,isAxiosError:rw,spread:ow,toFormData:lw,AxiosHeaders:cw,HttpStatusCode:uw,formToJSON:hw,getAdapter:dw,mergeConfig:fw}=ae;Ni.workerSrc=new URL(""+new URL("pdf.worker.min-BFAMBS4k.mjs",import.meta.url).href,import.meta.url).toString();const Ym={yellow:"rgba(255, 255, 0, 0.4)",green:"rgba(0, 255, 0, 0.3)",blue:"rgba(0, 0, 255, 0.3)"},X_=()=>{const[u,t]=tt.useState(null),[n,s]=tt.useState(null),[r,o]=tt.useState(""),[c,h]=tt.useState(""),[f,p]=tt.useState(!1),g=tt.useRef(null),[y,b]=tt.useState([]),[A,S]=tt.useState("https://koroshi.github.io/cxc-react-web-pdf/plan.pdf"),E=G=>{const K=G.target.files[0];K&&t(URL.createObjectURL(K))},w=G=>{t(G)},T=({numPages:G})=>{s(G)},L=G=>{const K=window.getSelection();if(K.toString()){o(K.toString()),R(K.toString());const st=document.querySelectorAll(".pdf-page-wrapper")[G-1].getBoundingClientRect(),mt=[];for(let lt=0;lt<K.rangeCount;lt++){const D=K.getRangeAt(lt).getClientRects();for(let H=0;H<D.length;H++){const J=D[H];mt.push({left:J.left-st.left,top:J.top-st.top,width:J.width,height:J.height,pageIndex:G})}}V(mt)}},R=async G=>{p(!0);try{const K=await ae.post("/api/translate",{text:G});h(K.data.translation)}catch(K){console.error(":",K,G),h("")}finally{p(!1)}},N=G=>{if(!z||z.length===0)return;const K=z.map(Z=>({id:Date.now()+Math.random(),type:"highlight",color:G,text:r,...Z}));console.log(K),b(Z=>[...Z,...K])},C=G=>y.filter(K=>K.pageIndex===G).map(K=>bt.jsx("div",{style:{position:"absolute",left:`${K.left}px`,top:`${K.top}px`,width:`${K.width}px`,height:`${K.height}px`,backgroundColor:K.color,pointerEvents:"none"}},K.id)),U=["red","green","blue","yellow"],[z,V]=tt.useState([]);return bt.jsxs(bt.Fragment,{children:[bt.jsxs("div",{className:"pdf-reader-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px",overflow:"scroll"},children:[bt.jsxs("div",{className:"annotation-toolbar",children:[Object.keys(Ym).map(G=>bt.jsx("button",{style:{backgroundColor:G,width:"20px",height:"20px",border:"none"},onClick:()=>N(Ym[G])},G)),bt.jsx("input",{type:"text",value:A,onChange:G=>S(G.target.value),placeholder:"PDF"}),bt.jsx("button",{onClick:()=>w(A),children:""})]}),r&&bt.jsxs("div",{className:"translation-popup",children:[bt.jsx("p",{children:r}),bt.jsx("div",{className:"loading-indicator",children:f&&"..."}),bt.jsx("p",{className:"translation-result",children:c})]})]}),bt.jsxs("div",{className:"pdf-reader-container",children:[bt.jsx("input",{type:"file",accept:".pdf",onChange:E}),bt.jsx("div",{ref:g,children:u&&bt.jsx(sE,{file:u,onLoadSuccess:T,onLoadError:console.error,children:Array.from(new Array(n),(G,K)=>bt.jsxs("div",{className:"pdf-page-wrapper",style:{position:"relative",width:800,zIndex:1e3,border:`1px solid ${U[K]}`},children:[bt.jsx(gE,{pageNumber:K+1,width:800,onMouseUp:Z=>L(K+1)},K),C(K+1)]},K))})})]})]})};function Y_(){return bt.jsx(bt.Fragment,{children:bt.jsx(X_,{})})}Hv.createRoot(document.getElementById("root")).render(bt.jsx(tt.StrictMode,{children:bt.jsx(Y_,{})}));
